{"version":3,"sources":["serviceWorker.ts","actions/action.tsx","components/Services.tsx","utils/Connector.tsx","reducers/reducers.tsx","utils/Links.tsx","components/Login.tsx","utils/Constants.tsx","components/base/PlusFabButton.tsx","dto/UserDTO.tsx","components/forms/UserForm.tsx","components/Users.tsx","dto/VehicleDTO.tsx","components/forms/VehicleForm.tsx","components/Vehicles.tsx","dto/TripDTO.tsx","dto/TripUsersDTO.tsx","components/forms/TripForm.tsx","components/base/RoleChoose.tsx","components/forms/DuplicateTripForm.tsx","components/PersonalArea.tsx","components/Dashboard.tsx","App.tsx","index.tsx"],"names":["Boolean","window","location","hostname","match","ReduxActionTypes","setUsersData","users","type","SET_USERS_DATA","data","setUserData","user","SET_USER_DATA","ViewModeType","Connector","username","password","axiosInstance","this","hash","btoa","headers","Authorization","axios","create","baseURL","undefined","call","committeeId","operation","vehicle","id","body","JSON","stringify","tripId","tripUserId","userId","trip","tripUser","committeeUserId","committeeUserInfo","publishUser","userResponse","status","console","log","Error","publishedUser","committeeUser","role","occupation","disabled","bodyCommUser","operationCommUser","tempInstance","url","method","stateDefault","committee","connector","showLoading","AppReducers","combineReducers","appData","state","action","normalizedUser","committee_users","newState","SET_COMMITTEE_DATA","SET_SHOW_LOADING","RESET_AUTH_DATA","normalizedUsers","map","userToNormalize","Links","Option","Select","LoginForm","committees","loading","handleSelectChange","value","props","form","setFieldsValue","buildCommitteesSelect","length","getFieldDecorator","Item","rules","required","message","onChange","key","description","handleSubmit","e","preventDefault","validateFields","err","values","setState","findUserByUsername","then","res","founded","find","element","error","setCommitteeData","getUsers","uRes","success","history","push","catch","uErr","getCommittees","visible","closable","confirmLoading","footer","style","textAlign","gutter","span","alt","src","width","onSubmit","className","prefix","color","placeholder","htmlType","React","WrappeLoginForm","Form","name","LoginContainer","connect","ownProps","PlusFabButton","mainButtonStyles","backgroundColor","alwaysShowTitle","event","icon","position","bottom","right","onClick","UserRoleType","0","1","2","UserOccupationType","3","UserGenderType","User","getInitialValueBirthDate","birth_date","moment","userToSave","format","onSave","onCancel","personalArea","layout","label","initialValue","Password","surname","gender","email","visibility","withDrivingLicense","valuePropName","flgPasswordChanged","borderTop","padding","background","marginRight","UserContainer","UserForm","Users","columns","title","dataIndex","render","record","text","size","_onEditRow","placement","onConfirm","_onDeleteUser","okText","cancelText","marginLeft","emptyUser","superuser","showForm","loadData","_onClose","selectedUser","getUserTrips","deleteCommitteesUsers","deleteUser","_onSave","warn","publishUserCommittee","_onCreate","getDataSource","filter","pagination","pageSize","dataSource","onClose","bodyStyle","paddingBottom","loggedUserId","UsersContainer","VehicleType","Vehicle","vehicleToSave","nextProps","plate","sign","TextArea","rows","VehicleContainer","VehicleForm","Vehicles","_onEditVehicle","_onDeleteVehicle","emptyVehicle","selectedVehicle","vehicles","getVehicles","deleteVehicle","publishVehicle","VehiclesContainer","ServiceTargetRoleType","ServiceTargetLocationType","FlgArType","ServiceRoleType","Trip","dateForHour","Date","hour","Number","substring","formValues","tripDate","date","tripHour","tripToSave","vehicleId","Group","marginTop","min","max","TripContainer","TripForm","RoleChoose","userSelected","isUserAdmin","loggedUser","roleSelected","_onChangeRole","target","_onChangeUser","defaultValue","buttonStyle","Button","onConfirmRole","DuplicateTrip","onDeleteDate","k","keys","getFieldValue","duplicateElements","index","onAddDate","nextKeys","concat","getInitialDateValue","tripToDuplicate","add","getInitialHourValue","myFormItems","DuplicateTripContainer","DuplicateTripForm","WeekDays","Months","today","Services","selectedDate","firstDayOfView","viewMode","week","trips","showDuplicateTripForm","selectedTrip","rolesVisible","getEmptyTrip","flgDestination","flgAr","siteDeparture","siteArrival","serviceType","patientData","extraUsers","flgNurse","flgToNotify","notes","trip_users","getTrips","vRes","vErr","_onChangeView","_onClickDayOfWeek","renderDayOfWeek","isSelected","getDate","getMonth","getFullYear","isOld","getTime","isToday","renderCardHeaderDate","cursor","borderRadius","height","border","renderCardBodyWeekDay","renderDays","numRows","rowIndex","days","renderDaysOfWeek","row","justify","margin","_onMoveViewLeft","_onMoveViewRight","startDate","elements","result","_onDeleteTrip","deleteTripUsersByTrip","deleteTrip","tRes","tErr","_onEditTrip","_onDuplicateTrip","setHours","sort","trip1","trip2","hour1Replaced","split","join","hour2Replaced","handleRoleVisibleChange","uniqueIndex","roleVisible","newArray","_onDeleteTripUser","deleteTripUsers","renderTooltipUserAvatar","trip_user","renderTimeline","todayTrips","maximumUsers","reduce","p","v","sharedSpan","Math","floor","totalUsers","popoverVisible","zIndex","count","shape","fontSize","content","renderRoleChoose","trigger","onVisibleChange","substr","_onConfirmRole","tripToPublish","newRolesVisible","publishTripUser","_onCloseTripForm","_onCloseDuplicateTripForm","_onConfirmDuplicateTrip","newDates","a","withError","newDate","newTrip","publishTrip","newFirstDayOfView","dayOfMonth","month","weekDay","getDay","Component","ServicesContainer","PersonalArea","_onCancel","goBack","PersonalAreaContainer","Header","Layout","Content","Footer","Sider","Dashboard","collapsed","_onCollapse","_onClickLogout","resetAuthData","_onLogout","replace","minHeight","collapsible","onCollapse","theme","defaultSelectedKeys","mode","maxHeight","fontStyle","ghost","path","component","DashboardContainer","App","exact","configureStore","createStore","ReactDOM","store","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.60afb454.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import CommitteeDTO from '../dto/CommitteeDTO';\r\nimport UserDTO from '../dto/UserDTO';\r\n\r\nexport enum ReduxActionTypes {\r\n  SET_SHOW_LOADING = 'SET_SHOW_LOADING',\r\n  SET_USER_DATA = 'SET_USER_DATA',\r\n  SET_COMMITTEE_DATA = 'SET_COMMITTEE_DATA',\r\n  RESET_AUTH_DATA = 'RESET_AUTH_DATA',\r\n  SET_USERS_DATA = 'SET_USERS_DATA'\r\n}\r\n\r\nexport interface IReduxBaseAction {\r\n  type: ReduxActionTypes;\r\n}\r\n\r\nexport interface IReduxSetUserData extends IReduxBaseAction {\r\n  type: ReduxActionTypes.SET_USER_DATA;\r\n  data: {\r\n    user: UserDTO;\r\n  };\r\n}\r\n\r\nexport interface IReduxSetCommitteeData extends IReduxBaseAction {\r\n  type: ReduxActionTypes.SET_COMMITTEE_DATA;\r\n  data: {\r\n    committee: CommitteeDTO;\r\n  };\r\n}\r\n\r\nexport interface IReduxSetUsersData extends IReduxBaseAction {\r\n  type: ReduxActionTypes.SET_USERS_DATA;\r\n  data: {\r\n    users: UserDTO[];\r\n  };\r\n}\r\n\r\nexport interface IReduxSetShowLoading extends IReduxBaseAction {\r\n  type: ReduxActionTypes.SET_SHOW_LOADING;\r\n  data: boolean;\r\n}\r\n\r\nexport interface IReduxResetAuthData extends IReduxBaseAction {\r\n  type: ReduxActionTypes.RESET_AUTH_DATA;\r\n}\r\n\r\nexport type TReducerActions =\r\n  | IReduxSetUserData\r\n  | IReduxSetCommitteeData\r\n  | IReduxSetShowLoading\r\n  | IReduxResetAuthData\r\n  | IReduxSetUsersData;\r\n\r\nexport interface ISetUsersDataProps {\r\n  setUsersData(users: UserDTO[]): IReduxSetUsersData;\r\n}\r\n\r\nexport interface ISetUserDataProps {\r\n  setUserData(user: UserDTO): IReduxSetUserData;\r\n}\r\n\r\nexport interface ISetCommitteeDataProps {\r\n  setCommitteeData(committee: CommitteeDTO): IReduxSetCommitteeData;\r\n}\r\n\r\nexport interface IResetAuthDataProps {\r\n  resetAuthData(): IReduxResetAuthData;\r\n}\r\n\r\nexport function setUsersData(users: UserDTO[]): IReduxSetUsersData {\r\n  return {\r\n    type: ReduxActionTypes.SET_USERS_DATA,\r\n    data: {\r\n      users\r\n    }\r\n  };\r\n}\r\n\r\nexport function setUserData(user: UserDTO): IReduxSetUserData {\r\n  return {\r\n    type: ReduxActionTypes.SET_USER_DATA,\r\n    data: {\r\n      user\r\n    }\r\n  };\r\n}\r\n\r\nexport function setCommitteeData(\r\n  committee: CommitteeDTO\r\n): IReduxSetCommitteeData {\r\n  return {\r\n    type: ReduxActionTypes.SET_COMMITTEE_DATA,\r\n    data: {\r\n      committee\r\n    }\r\n  };\r\n}\r\n\r\nexport function resetAuthData(): IReduxResetAuthData {\r\n  return {\r\n    type: ReduxActionTypes.RESET_AUTH_DATA\r\n  };\r\n}\r\n","import React from 'react';\r\nimport { Row, Button, Col, Card, Radio, message, Timeline, Tag, Popconfirm, Avatar, Empty, Tooltip, Badge, Popover } from 'antd';\r\nimport { add, format } from 'date-fns';\r\nimport TripDTO, { ServiceTargetRoleType, ServiceTargetLocationType, FlgArType } from '../dto/TripDTO';\r\nimport { connect } from 'react-redux';\r\nimport { IWithUser, IWIthConnector, IWithCommittee, IWithUsers } from '../reducers/reducers';\r\nimport VehicleDTO, { VehicleType } from '../dto/VehicleDTO';\r\nimport TripUsersDTO, { ServiceRoleType } from '../dto/TripUsersDTO';\r\nimport UserDTO from '../dto/UserDTO';\r\nimport PlusFabButton from './base/PlusFabButton';\r\nimport TripForm from './forms/TripForm';\r\nimport RoleChoose from './base/RoleChoose';\r\nimport DuplicateTripForm, { IDuplicateTripItem } from './forms/DuplicateTripForm';\r\n\r\ninterface IServicesState {\r\n  loading: boolean;\r\n  selectedDate: Date;\r\n  firstDayOfView: Date;\r\n  viewMode: ViewModeType;\r\n  trips: TripDTO[];\r\n  vehicles: VehicleDTO[];\r\n  showForm: boolean;\r\n  showDuplicateTripForm: boolean;\r\n  selectedTrip: TripDTO | undefined;\r\n  rolesVisible: Array<boolean>;\r\n}\r\n\r\nenum ViewModeType {\r\n  week,\r\n  month\r\n}\r\n\r\nconst WeekDays: Array<string> = ['Domenica', 'Lunedì', 'Martedì', 'Mercoledì', 'Giovedì', 'Venerdì', 'Sabato'];\r\n\r\nconst Months: Array<string> = [\r\n  'Gennaio',\r\n  'Febbraio',\r\n  'Marzo',\r\n  'Aprile',\r\n  'Maggio',\r\n  'Giugno',\r\n  'Luglio',\r\n  'Agosto',\r\n  'Settembre',\r\n  'Ottobre',\r\n  'Novembre',\r\n  'Dicembre'\r\n];\r\n\r\nconst today = new Date();\r\n\r\nclass Services extends React.Component<IWithUser & IWIthConnector & IWithCommittee & IWithUsers, IServicesState> {\r\n  state = {\r\n    loading: false,\r\n    selectedDate: today,\r\n    firstDayOfView: today,\r\n    viewMode: ViewModeType.week,\r\n    trips: [],\r\n    vehicles: [],\r\n    showForm: false,\r\n    showDuplicateTripForm: false,\r\n    selectedTrip: undefined,\r\n    rolesVisible: []\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.loadData();\r\n  }\r\n\r\n  private getEmptyTrip = (): TripDTO => {\r\n    const { vehicles } = this.state;\r\n    const emptyTrip: TripDTO = {\r\n      id: 0,\r\n      date: format(this.state.selectedDate, 'yyyy-MM-dd'),\r\n      hour: '12:00:00',\r\n      flgDestination: 0,\r\n      flgAr: 0,\r\n      siteDeparture: '',\r\n      siteArrival: '',\r\n      serviceType: '',\r\n      patientData: undefined,\r\n      type: 2,\r\n      extraUsers: 1,\r\n      flgNurse: 0,\r\n      flgToNotify: 0,\r\n      notes: undefined,\r\n      committeeId: this.props.committee?.id || 0,\r\n      vehicleId: vehicles.length !== 0 ? (vehicles[0] as any).id : 0,\r\n      committee: undefined as any,\r\n      vehicle: undefined as any,\r\n      trip_users: []\r\n    };\r\n    return emptyTrip;\r\n  };\r\n\r\n  private loadData = () => {\r\n    const { committee } = this.props;\r\n    if (committee !== undefined) {\r\n      const committeeId: number = committee.id;\r\n      this.props.connector\r\n        .getTrips(committeeId)\r\n        .then((res) => {\r\n          this.setState({\r\n            trips: res.data\r\n          });\r\n          this.props.connector\r\n            .getVehicles(committeeId)\r\n            .then((vRes) => {\r\n              this.setState({\r\n                vehicles: vRes.data,\r\n                loading: false\r\n              });\r\n            })\r\n            .catch((vErr) => {\r\n              this.setState({ vehicles: [], loading: false });\r\n              console.error(vErr);\r\n            });\r\n        })\r\n        .catch((err) => {\r\n          this.setState({ trips: [], loading: false });\r\n          console.error(err);\r\n        });\r\n    }\r\n  };\r\n\r\n  private _onChangeView = (e: any) => {\r\n    const viewMode: any = e.target.value;\r\n    this.setState({ viewMode });\r\n  };\r\n\r\n  private _onClickDayOfWeek = (date: Date) => {\r\n    console.log(date);\r\n    this.setState({ selectedDate: date });\r\n  };\r\n\r\n  private renderCardHeaderDate(date: Date) {\r\n    const dayOfMonth: number = date.getDate();\r\n    const month: string = Months[date.getMonth()];\r\n    return (\r\n      <Row>\r\n        <Col style={{ textAlign: 'left' }} span={24}>\r\n          {dayOfMonth} {month.substring(0, 3)}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  }\r\n\r\n  private renderCardBodyWeekDay(date: Date) {\r\n    const weekDay: string = WeekDays[date.getDay()];\r\n    const todayTrips: TripDTO[] = this.getTrips(date);\r\n    return (\r\n      <Row>\r\n        <Col style={{ textAlign: 'left' }} span={24}>\r\n          <b>{weekDay}</b>\r\n          {todayTrips.length !== 0 ? <Badge count={todayTrips.length} style={{ backgroundColor: '#87D068', marginLeft: '3px' }} /> : undefined}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  }\r\n\r\n  private renderDayOfWeek = (date: Date) => {\r\n    const { selectedDate } = this.state;\r\n    const isSelected =\r\n      date.getDate() === selectedDate.getDate() && date.getMonth() === selectedDate.getMonth() && date.getFullYear() === selectedDate.getFullYear();\r\n    const isOld = date.getTime() < today.getTime();\r\n    const isToday = date.getTime() === today.getTime();\r\n    return (\r\n      <Col key={date.getTime()} span={3}>\r\n        <Card\r\n          onClick={() => this._onClickDayOfWeek(date)}\r\n          size=\"small\"\r\n          title={this.renderCardHeaderDate(date)}\r\n          className=\"current-day\"\r\n          style={{\r\n            cursor: 'pointer',\r\n            borderRadius: '10px',\r\n            height: '90px',\r\n            border: `2px solid ${isSelected ? '#1890ff' : '#e8e8e8'}`,\r\n            backgroundColor: `${isToday ? '#e6f7ff' : isOld ? '#f2f4f5' : 'white'}`\r\n          }}\r\n        >\r\n          {this.renderCardBodyWeekDay(date)}\r\n        </Card>\r\n      </Col>\r\n    );\r\n  };\r\n\r\n  private renderDays = () => {\r\n    const { viewMode, firstDayOfView } = this.state;\r\n    const numRows: number = viewMode === ViewModeType.week ? 1 : 4;\r\n    const rows = [];\r\n\r\n    for (let rowIndex = 0; rowIndex < numRows; rowIndex++) {\r\n      const days = this.renderDaysOfWeek(firstDayOfView, rowIndex);\r\n      const row = (\r\n        <Row justify=\"center\" key={rowIndex} type=\"flex\">\r\n          <Col span={1} style={{ textAlign: 'center' }}>\r\n            {rowIndex === 0 ? <Button icon=\"left\" style={{ margin: 5 }} onClick={this._onMoveViewLeft} /> : undefined}\r\n          </Col>\r\n          {days}\r\n          <Col span={1} style={{ textAlign: 'center' }}>\r\n            {rowIndex === 0 ? <Button icon=\"right\" style={{ margin: 5 }} onClick={this._onMoveViewRight} /> : undefined}\r\n          </Col>\r\n        </Row>\r\n      );\r\n      rows.push(row);\r\n    }\r\n\r\n    return rows;\r\n  };\r\n\r\n  private renderDaysOfWeek = (startDate: Date, rowIndex: number) => {\r\n    const elements: any = [];\r\n    for (let index = 0; index < 7; index++) {\r\n      var result = add(startDate, {\r\n        days: index + rowIndex * 7\r\n      });\r\n      elements.push(this.renderDayOfWeek(result));\r\n    }\r\n    return elements;\r\n  };\r\n\r\n  private _onDeleteTrip = (tripId: number) => {\r\n    this.props.connector\r\n      .deleteTripUsersByTrip(tripId)\r\n      .then((res) => {\r\n        this.props.connector\r\n          .deleteTrip(tripId)\r\n          .then((tRes) => {\r\n            this.loadData();\r\n          })\r\n          .catch((tErr) => {\r\n            console.log(`_onDeleteTrip error: ${tErr}`);\r\n            message.error(`Si è verificato un errore durante l'eliminazione`);\r\n            this.loadData();\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        console.log(`_onDeleteTrip error: ${err}`);\r\n        message.error(`Si è verificato un errore durante l'eliminazione`);\r\n      });\r\n  };\r\n\r\n  private _onEditTrip = (trip: TripDTO) => {\r\n    this.setState({ selectedTrip: trip, showForm: true });\r\n  };\r\n\r\n  private _onDuplicateTrip = (trip: TripDTO) => {\r\n    this.setState({ selectedTrip: trip, showDuplicateTripForm: true });\r\n  };\r\n\r\n  private getTrips = (date: Date): TripDTO[] => {\r\n    const { trips } = this.state;\r\n    const { user } = this.props;\r\n    const tripsOfDate: TripDTO[] = trips\r\n      .filter((trip: TripDTO) => {\r\n        return new Date(trip.date).setHours(0, 0, 0, 0) === date.setHours(0, 0, 0, 0);\r\n      })\r\n      .filter((trip: TripDTO) => {\r\n        if (user !== undefined && user.committeeUser !== undefined) {\r\n          const occupation = user.committeeUser.occupation;\r\n          if (occupation === 0) {\r\n            // Se è dipendente, vede tutti i servizi\r\n            return true;\r\n          }\r\n          // Volontario o altro, vede i servizi non destinati ai dipendenti\r\n          return trip.type > 0;\r\n        }\r\n        return false;\r\n      })\r\n      .sort((trip1: TripDTO, trip2: TripDTO) => {\r\n        const hour1Replaced = trip1.hour.split(':').join('');\r\n        const hour2Replaced = trip2.hour.split(':').join('');\r\n        return Number(hour1Replaced) - Number(hour2Replaced);\r\n      });\r\n    return tripsOfDate;\r\n  };\r\n\r\n  private handleRoleVisibleChange = (uniqueIndex: number, roleVisible: boolean) => {\r\n    const newArray: Array<boolean> = [...this.state.rolesVisible];\r\n    newArray[uniqueIndex] = roleVisible;\r\n    this.setState({ rolesVisible: newArray });\r\n  };\r\n\r\n  private _onDeleteTripUser = (tripUserId: number) => {\r\n    this.props.connector\r\n      .deleteTripUsers(tripUserId)\r\n      .then((res) => {\r\n        this.loadData();\r\n      })\r\n      .catch((err) => {\r\n        console.error(`_onDeleteTripUser: ${err}`);\r\n        message.error(`Si è verificato un errore nell'eliminazione`);\r\n      });\r\n  };\r\n\r\n  get isUserAdmin(): boolean {\r\n    const { user } = this.props;\r\n    if (user !== undefined && user.committeeUser !== undefined) {\r\n      return user?.committeeUser.role < 2;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private renderTooltipUserAvatar = (trip_user: TripUsersDTO) => {\r\n    const { user } = this.props;\r\n    const role: string = ServiceRoleType[trip_user.role];\r\n    return (\r\n      <p>\r\n        {role}\r\n        {this.isUserAdmin || (user?.id || 0) === trip_user.userId ? (\r\n          <Tooltip title=\"Elimina\">\r\n            <Button onClick={() => this._onDeleteTripUser(trip_user.id)} style={{ marginLeft: '5px' }} icon=\"delete\" type=\"danger\" />\r\n          </Tooltip>\r\n        ) : undefined}\r\n      </p>\r\n    );\r\n  };\r\n\r\n  private renderTimeline = () => {\r\n    const { selectedDate, rolesVisible } = this.state;\r\n    const todayTrips: TripDTO[] = this.getTrips(selectedDate);\r\n    if (todayTrips.length === 0) {\r\n      return <Empty />;\r\n    }\r\n    const tripWithMoreUsers: TripDTO = todayTrips.reduce((p: TripDTO, v: TripDTO) => {\r\n      return p.extraUsers > v.extraUsers ? p : v;\r\n    });\r\n    const maximumUsers: number = tripWithMoreUsers.extraUsers + 1;\r\n    const sharedSpan: number = Math.floor(24 / maximumUsers);\r\n    return (\r\n      <Timeline>\r\n        {todayTrips.map((trip: TripDTO, index: number) => {\r\n          const trip_users: TripUsersDTO[] = trip.trip_users || [];\r\n          const totalUsers = trip.extraUsers + 1;\r\n          let users: any[] = [];\r\n          for (let index = 0; index < totalUsers; index++) {\r\n            const trip_user: TripUsersDTO = trip_users[index];\r\n            const uniqueIndex: number = Number(`${trip.id}${index}`);\r\n            const popoverVisible: boolean = rolesVisible[uniqueIndex];\r\n            if (trip_user) {\r\n              const user: UserDTO | undefined = trip_user.user;\r\n              users.push(\r\n                <Col span={sharedSpan} key={index} style={{ textAlign: 'center' }}>\r\n                  <Tooltip title={this.renderTooltipUserAvatar(trip_user)}>\r\n                    <Badge style={{ zIndex: 1 }} count={<b>{ServiceRoleType[trip_user.role].substring(0, 1)}</b>}>\r\n                      <Avatar style={{ backgroundColor: '#87d068' }} shape=\"square\" icon=\"user\" />\r\n                    </Badge>\r\n                    <p>\r\n                      <span style={{ fontSize: '10px' }}>\r\n                        {user?.name} {user?.surname}\r\n                      </span>\r\n                    </p>\r\n                  </Tooltip>\r\n                </Col>\r\n              );\r\n              continue;\r\n            }\r\n            users.push(\r\n              <Col span={sharedSpan} key={index} style={{ textAlign: 'center' }}>\r\n                <Popover\r\n                  content={this.renderRoleChoose(trip)}\r\n                  trigger=\"click\"\r\n                  visible={popoverVisible}\r\n                  onVisibleChange={(visible: boolean) => this.handleRoleVisibleChange(uniqueIndex, visible)}\r\n                >\r\n                  <Button type=\"dashed\" icon=\"user\" />\r\n                </Popover>\r\n              </Col>\r\n            );\r\n          }\r\n          return (\r\n            <Timeline.Item key={index}>\r\n              <Row>\r\n                <Col span={8}>\r\n                  <Row>\r\n                    <b>Ora:</b> {trip.hour.substr(0, 5)}\r\n                    <Tag style={{ marginLeft: '5px' }} color=\"green\">\r\n                      {ServiceTargetLocationType[trip.flgDestination]}\r\n                    </Tag>\r\n                  </Row>\r\n                  <Row>\r\n                    <b>Partenza: </b>\r\n                    {trip.siteDeparture}\r\n                  </Row>\r\n                  <Row>\r\n                    <b>Arrivo: </b> {trip.siteArrival}\r\n                  </Row>\r\n                  <Row>\r\n                    <b>Veicolo: </b> {VehicleType[trip.vehicle.type]} - {trip.vehicle.sign} - {trip.vehicle.description}\r\n                  </Row>\r\n                </Col>\r\n                <Col span={4}>\r\n                  <Row>\r\n                    <Tag>{FlgArType[trip.flgAr]}</Tag>\r\n                  </Row>\r\n                  <Row>\r\n                    <Tag color=\"cyan\">{ServiceTargetRoleType[trip.type]}</Tag>\r\n                  </Row>\r\n                  <Row>{trip.flgNurse === 1 ? <Tag color=\"blue\">Con infermiere</Tag> : undefined}</Row>\r\n                </Col>\r\n                <Col span={5}>\r\n                  <Row>\r\n                    <b>Paziente: </b>\r\n                    {trip.patientData || '-'}\r\n                  </Row>\r\n                  <Row>\r\n                    <b>Servizio: </b>\r\n                    {trip.serviceType || '-'}\r\n                  </Row>\r\n                  <Row>{trip.notes}</Row>\r\n                </Col>\r\n                <Col span={this.isUserAdmin ? 5 : 7}>\r\n                  <Row>{users}</Row>\r\n                </Col>\r\n                {this.isUserAdmin ? (\r\n                  <Col\r\n                    span={2}\r\n                    style={{\r\n                      textAlign: 'center',\r\n                      padding: '10px'\r\n                    }}\r\n                  >\r\n                    <Tooltip title=\"Modifica\">\r\n                      <Button size=\"small\" icon=\"edit\" onClick={() => this._onEditTrip(trip)} />\r\n                    </Tooltip>\r\n                    <Tooltip title=\"Duplica\">\r\n                      <Button icon=\"copy\" size=\"small\" style={{ marginLeft: '1px' }} onClick={() => this._onDuplicateTrip(trip)} />\r\n                    </Tooltip>\r\n                    <Popconfirm\r\n                      placement=\"topLeft\"\r\n                      title={\"Confermare l'eliminazione del servizio?\"}\r\n                      onConfirm={() => this._onDeleteTrip(trip.id)}\r\n                      okText=\"Si\"\r\n                      cancelText=\"No\"\r\n                    >\r\n                      <Button size=\"small\" style={{ marginLeft: '1px' }} icon=\"delete\" type=\"danger\" />\r\n                    </Popconfirm>\r\n                  </Col>\r\n                ) : undefined}\r\n              </Row>\r\n            </Timeline.Item>\r\n          );\r\n        })}\r\n      </Timeline>\r\n    );\r\n  };\r\n\r\n  private _onConfirmRole = (role: number, trip: TripDTO, userId: number) => {\r\n    const tripToPublish: TripUsersDTO = {\r\n      id: 0,\r\n      tripId: trip.id,\r\n      userId,\r\n      role\r\n    };\r\n    const { rolesVisible } = this.state;\r\n    const newRolesVisible = rolesVisible.map((element: boolean) => false);\r\n    this.props.connector\r\n      .publishTripUser(tripToPublish)\r\n      .then((res) => {\r\n        message.success('Salvataggio completato');\r\n        this.setState({ rolesVisible: newRolesVisible }, () => {\r\n          this.loadData();\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        message.error('Si è verificato un errore nel salvataggio');\r\n      });\r\n  };\r\n\r\n  private renderRoleChoose = (trip: TripDTO) => {\r\n    const { users } = this.props;\r\n    return (\r\n      <RoleChoose\r\n        users={users.filter((user: UserDTO) => !!!user.committeeUser.disabled)}\r\n        isUserAdmin={this.isUserAdmin}\r\n        loggedUser={this.props.user as UserDTO}\r\n        onConfirmRole={(role: number, userId: number) => this._onConfirmRole(role, trip, userId)}\r\n      />\r\n    );\r\n  };\r\n\r\n  private _onCreate = () => {\r\n    this.setState({ selectedTrip: this.getEmptyTrip(), showForm: true });\r\n  };\r\n\r\n  private _onCloseTripForm = () => {\r\n    this.setState({ showForm: false, selectedTrip: undefined });\r\n  };\r\n\r\n  private _onCloseDuplicateTripForm = () => {\r\n    this.setState({ showDuplicateTripForm: false, selectedTrip: undefined });\r\n  };\r\n\r\n  private _onConfirmDuplicateTrip = async (trip: TripDTO, newDates: IDuplicateTripItem[]) => {\r\n    let withError: boolean = false;\r\n    for (let index = 0; index < newDates.length; index++) {\r\n      const newDate: IDuplicateTripItem = newDates[index];\r\n      const date: string = newDate.date.format('YYYY-MM-DD');\r\n      const hour: string = newDate.hour.format('HH:mm');\r\n      const newTrip: TripDTO = {\r\n        ...trip,\r\n        id: 0,\r\n        date,\r\n        hour\r\n      };\r\n\r\n      await this.props.connector\r\n        .publishTrip(newTrip)\r\n        .then((res) => {\r\n          console.log('_onConfirmDuplicateTrip done');\r\n        })\r\n        // eslint-disable-next-line\r\n        .catch((err) => {\r\n          withError = true;\r\n          console.error(`_onConfirmDuplicateTrip error for trip with date ${date} and hour ${hour}. Error: ${err}`);\r\n        });\r\n    }\r\n    this.setState({ showDuplicateTripForm: false, selectedTrip: undefined }, () => {\r\n      if (withError) {\r\n        message.error(`Si sono verificati degli errori durante l'operazione`);\r\n      } else {\r\n        message.success('Operazione completata con successo');\r\n      }\r\n      this.loadData();\r\n    });\r\n  };\r\n\r\n  private _onSave = (trip: TripDTO) => {\r\n    this.props.connector\r\n      .publishTrip(trip)\r\n      .then((res) => {\r\n        message.success('Salvataggio completato');\r\n        this.setState({ showForm: false, selectedTrip: undefined }, () => {\r\n          this.loadData();\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        message.error('Si è verificato un errore nel salvataggio');\r\n      });\r\n  };\r\n\r\n  private _onMoveViewRight = () => {\r\n    const { viewMode, firstDayOfView } = this.state;\r\n    var newFirstDayOfView = add(firstDayOfView, {\r\n      days: viewMode === ViewModeType.week ? 7 : 28\r\n    });\r\n    this.setState({\r\n      firstDayOfView: newFirstDayOfView,\r\n      selectedDate: newFirstDayOfView\r\n    });\r\n  };\r\n\r\n  private _onMoveViewLeft = () => {\r\n    const { viewMode, firstDayOfView } = this.state;\r\n    var newFirstDayOfView = add(firstDayOfView, {\r\n      days: viewMode === ViewModeType.week ? -7 : -28\r\n    });\r\n    this.setState({\r\n      firstDayOfView: newFirstDayOfView,\r\n      selectedDate: newFirstDayOfView\r\n    });\r\n  };\r\n\r\n  public render() {\r\n    const { selectedTrip, showForm, showDuplicateTripForm, vehicles } = this.state;\r\n    const { user } = this.props;\r\n    return (\r\n      <div>\r\n        <div style={{ textAlign: 'end', margin: 10 }}>\r\n          Visualizzazione:\r\n          <Radio.Group defaultValue={this.state.viewMode} size=\"default\" onChange={this._onChangeView} style={{ marginLeft: 5 }}>\r\n            <Radio.Button value={ViewModeType.week}>Settimana</Radio.Button>\r\n            <Radio.Button value={ViewModeType.month}>Mese</Radio.Button>\r\n          </Radio.Group>\r\n        </div>\r\n        <div>\r\n          <div>{this.renderDays()}</div>\r\n          <Card style={{ width: '100%', height: '100%', borderRadius: '10px' }}>{this.renderTimeline()}</Card>\r\n        </div>\r\n        <TripForm\r\n          visible={showForm}\r\n          trip={selectedTrip}\r\n          vehicles={vehicles.filter((vehicle: VehicleDTO) => !!!vehicle.disabled)}\r\n          onClose={this._onCloseTripForm}\r\n          onSave={this._onSave}\r\n        />\r\n        <DuplicateTripForm\r\n          visible={showDuplicateTripForm}\r\n          trip={selectedTrip}\r\n          onClose={this._onCloseDuplicateTripForm}\r\n          onConfirm={this._onConfirmDuplicateTrip}\r\n        />\r\n        {showForm || showDuplicateTripForm || (user && user.committeeUser.role > 1) ? undefined : <PlusFabButton onClick={this._onCreate} />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: any, ownProps: any) => {\r\n  return {\r\n    user: state.appData.user,\r\n    connector: state.appData.connector,\r\n    committee: state.appData.committee,\r\n    users: state.appData.users\r\n  };\r\n};\r\nconst ServicesContainer = connect(mapStateToProps)(Services);\r\nexport default ServicesContainer;\r\n","import axios, { AxiosInstance } from 'axios';\r\nimport VehicleDTO from '../dto/VehicleDTO';\r\nimport UserDTO from '../dto/UserDTO';\r\nimport CommitteeUserDTO from '../dto/CommitteeUserDTO';\r\nimport TripDTO from '../dto/TripDTO';\r\nimport TripUsersDTO from '../dto/TripUsersDTO';\r\n\r\nexport class Connector {\r\n  private axiosInstance: AxiosInstance;\r\n  private username: string;\r\n  private password: string;\r\n\r\n  constructor(username: string, password: string) {\r\n    this.username = username;\r\n    this.password = password;\r\n    const hash: string = btoa(`${this.username}:${this.password}`);\r\n    const headers = {\r\n      Authorization: `Basic ${hash}`,\r\n      'Content-Type': 'application/json'\r\n    };\r\n\r\n    let baseURL: string | undefined = undefined;\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\r\n      baseURL = 'http://localhost:3001';\r\n    }\r\n    this.axiosInstance = axios.create({\r\n      baseURL,\r\n      headers\r\n    });\r\n  }\r\n\r\n  public async getCommittees(): Promise<any> {\r\n    const operation = 'api/committees';\r\n    return await this.call(operation);\r\n  }\r\n\r\n  public async getVehicles(committeeId: number): Promise<any> {\r\n    const operation = `api/vehicles/findByCommittee/${committeeId}`;\r\n    return await this.call(operation);\r\n  }\r\n\r\n  public async publishVehicle(vehicle: VehicleDTO): Promise<any> {\r\n    const { id } = vehicle;\r\n    const operation = `api/vehicles/${id > 0 ? id : ''}`;\r\n    const body = JSON.stringify(vehicle);\r\n    return await this.call(operation, body, id > 0 ? 'PUT' : 'POST');\r\n  }\r\n\r\n  public async deleteVehicle(vehicle: VehicleDTO): Promise<any> {\r\n    const { id } = vehicle;\r\n    const operation = `api/vehicles/${id}`;\r\n    return await this.call(operation, undefined, 'DELETE');\r\n  }\r\n\r\n  public async deleteTripUsersByTrip(tripId: number): Promise<any> {\r\n    const operation = `api/trips_users/deleteByTrip/${tripId}`;\r\n    return await this.call(operation, undefined, 'DELETE');\r\n  }\r\n\r\n  public async deleteTripUsers(tripUserId: number): Promise<any> {\r\n    const operation = `api/trips_users/${tripUserId}`;\r\n    return await this.call(operation, undefined, 'DELETE');\r\n  }\r\n\r\n  public async deleteCommitteesUsers(userId: number): Promise<any> {\r\n    const operation = `api/committees_users/deleteByUserId/${userId}`;\r\n    return await this.call(operation, undefined, 'DELETE');\r\n  }\r\n\r\n  public async getUserTrips(userId: number): Promise<any> {\r\n    const operation = `api/trips_users/findByUserId/${userId}`;\r\n    return await this.call(operation);\r\n  }\r\n\r\n  public async deleteTrip(tripId: number): Promise<any> {\r\n    const operation = `api/trips/${tripId}`;\r\n    return await this.call(operation, undefined, 'DELETE');\r\n  }\r\n\r\n  public async getTrips(committeeId: number): Promise<any> {\r\n    const operation = `api/trips/findByCommittee/${committeeId}`;\r\n    return await this.call(operation);\r\n  }\r\n\r\n  public async publishTrip(trip: TripDTO): Promise<any> {\r\n    const { id } = trip;\r\n    const operation = `api/trips/${id > 0 ? id : ''}`;\r\n    const body = JSON.stringify(trip);\r\n    return await this.call(operation, body, id > 0 ? 'PUT' : 'POST');\r\n  }\r\n\r\n  public async publishTripUser(tripUser: TripUsersDTO): Promise<any> {\r\n    const { id } = tripUser;\r\n    const operation = `api/trips_users/${id > 0 ? id : ''}`;\r\n    const body = JSON.stringify(tripUser);\r\n    return await this.call(operation, body, id > 0 ? 'PUT' : 'POST');\r\n  }\r\n\r\n  public async getUsers(committeeId: number): Promise<any> {\r\n    const operation = `api/users/findByCommittee/${committeeId}`;\r\n    return await this.call(operation);\r\n  }\r\n\r\n  public async deleteUser(userId: number): Promise<any> {\r\n    const operation = `api/users/${userId}`;\r\n    return await this.call(operation, undefined, 'DELETE');\r\n  }\r\n\r\n  public async deleteCommitteeUser(committeeUserId: number): Promise<any> {\r\n    const operation = `api/committees_users/${committeeUserId}`;\r\n    return await this.call(operation, undefined, 'DELETE');\r\n  }\r\n\r\n  public async publishUser(user: UserDTO): Promise<any> {\r\n    const { id } = user;\r\n    const operation = `api/users/${id > 0 ? id : ''}`;\r\n    const body = JSON.stringify(user);\r\n    return this.call(operation, body, id > 0 ? 'PUT' : 'POST');\r\n  }\r\n\r\n  public async publishUserCommittee(user: UserDTO, committeeUserInfo: CommitteeUserDTO): Promise<any> {\r\n    const userResponse = await this.publishUser(user);\r\n    if (userResponse.status !== 200) {\r\n      console.log(userResponse);\r\n      throw new Error(`Si è verificato un errore nell'inserimento`);\r\n    }\r\n\r\n    const { id } = user;\r\n    const publishedUser: UserDTO = userResponse.data;\r\n    const committeeUser: CommitteeUserDTO = {\r\n      id: committeeUserInfo.id,\r\n      userId: id > 0 ? id : publishedUser.id,\r\n      committeeId: committeeUserInfo.committeeId,\r\n      role: committeeUserInfo.role,\r\n      occupation: committeeUserInfo.occupation,\r\n      disabled: committeeUserInfo.disabled\r\n    };\r\n    const bodyCommUser = JSON.stringify(committeeUser);\r\n    const operationCommUser = `api/committees_users/${committeeUserInfo.id > 0 ? committeeUserInfo.id : ''}`;\r\n    return await this.call(operationCommUser, bodyCommUser, committeeUserInfo.id > 0 ? 'PUT' : 'POST');\r\n  }\r\n\r\n  public async findUserByUsername(username: string, password: string): Promise<any> {\r\n    const operation = `api/users/findbyusername/${username}`;\r\n    const hash: string = btoa(`${username}:${password}`);\r\n    const headers = {\r\n      Authorization: `Basic ${hash}`\r\n    };\r\n    let baseURL: string | undefined = undefined;\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\r\n      baseURL = 'http://localhost:3001';\r\n    }\r\n    const tempInstance = axios.create({\r\n      baseURL,\r\n      headers\r\n    });\r\n    return tempInstance({\r\n      url: operation,\r\n      method: 'GET'\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @param url\r\n   * @param body stringa (in json) oppure UrlSearchParams per gli environment\r\n   * @param method\r\n   */\r\n  private async call(url: string, body?: string, method: 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE' = 'GET'): Promise<any> {\r\n    return this.axiosInstance({\r\n      url,\r\n      method,\r\n      data: body\r\n    });\r\n  }\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport { TReducerActions, ReduxActionTypes } from '../actions/action';\r\nimport { Connector } from '../utils/Connector';\r\nimport UserDTO from '../dto/UserDTO';\r\nimport CommitteeDTO from '../dto/CommitteeDTO';\r\n\r\nexport interface IAppDataState\r\n  extends IWithUser,\r\n    IWithCommittee,\r\n    IWIthConnector {\r\n  user: UserDTO | undefined;\r\n  committee: CommitteeDTO | undefined;\r\n  users: UserDTO[];\r\n  showLoading: boolean;\r\n  connector: Connector;\r\n}\r\n\r\nconst stateDefault: IAppDataState = {\r\n  user: undefined,\r\n  committee: undefined,\r\n  users: [],\r\n  connector: new Connector('', ''),\r\n  showLoading: false\r\n};\r\n\r\nexport interface IWithUser {\r\n  user: UserDTO | undefined;\r\n}\r\n\r\nexport interface IWithUsers {\r\n  users: UserDTO[];\r\n}\r\n\r\nexport interface IWithCommittee {\r\n  committee: CommitteeDTO | undefined;\r\n}\r\n\r\nexport interface IWIthConnector {\r\n  connector: Connector;\r\n}\r\n\r\nconst appData = (\r\n  state: IAppDataState = stateDefault,\r\n  action: TReducerActions\r\n): IAppDataState => {\r\n  switch (action.type) {\r\n    case ReduxActionTypes.SET_USER_DATA:\r\n      const { user } = action.data;\r\n      let connector: any;\r\n      let normalizedUser = (user && { ...user }) || undefined;\r\n      if (user) {\r\n        connector = new Connector(user.username, user.password);\r\n        if ((user as any).committee_users) {\r\n          normalizedUser = {\r\n            ...user,\r\n            committeeUser: (user as any).committee_users[0]\r\n          };\r\n        }\r\n      }\r\n      const newState = {\r\n        ...state,\r\n        user: normalizedUser,\r\n        connector\r\n      };\r\n      return newState;\r\n    case ReduxActionTypes.SET_COMMITTEE_DATA:\r\n      const { committee } = action.data;\r\n      return {\r\n        ...state,\r\n        committee\r\n      };\r\n    case ReduxActionTypes.SET_SHOW_LOADING:\r\n      return { ...state, showLoading: action.data };\r\n    case ReduxActionTypes.RESET_AUTH_DATA:\r\n      return {\r\n        ...state,\r\n        user: undefined,\r\n        committee: undefined,\r\n        connector: new Connector('', ''),\r\n        users: []\r\n      };\r\n    case ReduxActionTypes.SET_USERS_DATA:\r\n      const { users } = action.data;\r\n      const normalizedUsers: any = (users || []).map(\r\n        (userToNormalize: UserDTO) => {\r\n          return {\r\n            ...userToNormalize,\r\n            committeeUser: (userToNormalize as any).committee_users[0]\r\n          };\r\n        }\r\n      );\r\n      return {\r\n        ...state,\r\n        users: normalizedUsers\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst AppReducers = combineReducers({\r\n  appData\r\n});\r\n\r\nexport default AppReducers;\r\n","export const Links = {\r\n  LOGIN: '/',\r\n  LOGOUT: '/',\r\n  SERVICES: '/services',\r\n  USERS: '/users',\r\n  VEHICLES: '/vehicles',\r\n  PERSONAL_AREA: '/personal_area'\r\n};\r\n","import * as React from 'react';\r\nimport {\r\n  Button,\r\n  Col,\r\n  Form,\r\n  message,\r\n  Modal,\r\n  Row,\r\n  Input,\r\n  Select,\r\n  Icon\r\n} from 'antd';\r\nimport { connect } from 'react-redux';\r\nimport { IWithUser, IWIthConnector } from '../reducers/reducers';\r\nimport {\r\n  setUserData,\r\n  setCommitteeData,\r\n  setUsersData,\r\n  ISetUserDataProps,\r\n  ISetCommitteeDataProps,\r\n  ISetUsersDataProps\r\n} from '../actions/action';\r\nimport { Connector } from '../utils/Connector';\r\nimport CommitteeDTO from '../dto/CommitteeDTO';\r\nimport { FormComponentProps } from 'antd/lib/form/Form';\r\nimport { Links } from '../utils/Links';\r\nimport { RouterProps } from 'react-router';\r\nimport { PortalName } from '../utils/Constants';\r\n\r\nconst { Option } = Select;\r\n\r\ninterface ILoginFormState {\r\n  committees: CommitteeDTO[];\r\n  loading: boolean;\r\n}\r\n\r\nclass LoginForm extends React.Component<\r\n  IWithUser &\r\n    IWIthConnector &\r\n    ISetUserDataProps &\r\n    ISetCommitteeDataProps &\r\n    ISetUsersDataProps &\r\n    FormComponentProps &\r\n    RouterProps,\r\n  ILoginFormState\r\n> {\r\n  state = {\r\n    committees: [],\r\n    loading: false\r\n  };\r\n\r\n  connector: Connector | undefined;\r\n\r\n  componentDidMount() {\r\n    this.props.connector\r\n      .getCommittees()\r\n      .then(res => {\r\n        this.setState(\r\n          {\r\n            ...this.state,\r\n            committees: res.data\r\n          },\r\n          () => {\r\n            if (res.data && res.data[0]) {\r\n              this.handleSelectChange(res.data[0].id);\r\n              // TODO: da rimuovere\r\n              this.props.form.setFieldsValue({\r\n                username: 'f.marchetti',\r\n                password: 'default'\r\n              });\r\n            }\r\n          }\r\n        );\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  handleSelectChange = (value: number) => {\r\n    this.props.form.setFieldsValue({\r\n      committeeId: value\r\n    });\r\n  };\r\n\r\n  private buildCommitteesSelect = () => {\r\n    const { committees } = this.state;\r\n    if (committees.length === 0) {\r\n      return <Icon type=\"loading\" />;\r\n    }\r\n\r\n    const { getFieldDecorator } = this.props.form;\r\n    return (\r\n      <Form.Item>\r\n        {getFieldDecorator('committeeId', {\r\n          rules: [{ required: true, message: 'Selezionare il comitato' }]\r\n        })(\r\n          <Select onChange={this.handleSelectChange}>\r\n            {committees.map((committee: CommitteeDTO) => (\r\n              <Option key={committee.id} value={committee.id}>\r\n                {committee.description}\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n        )}\r\n      </Form.Item>\r\n    );\r\n  };\r\n\r\n  handleSubmit = (e: any) => {\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        this.setState({ loading: true }, () => {\r\n          const committeeId = values.committeeId;\r\n          this.props.connector\r\n            .findUserByUsername(values.username, values.password)\r\n            .then(res => {\r\n              this.setState({ loading: false });\r\n              const user = res.data;\r\n              const committee_users: Array<any> = user.committee_users;\r\n              if (committee_users) {\r\n                const founded = committee_users.find(\r\n                  element => element.committeeId === committeeId\r\n                );\r\n                if (!founded) {\r\n                  message.error('Utente non abilitato al comitato selezionato');\r\n                } else if (founded.disabled) {\r\n                  message.error('Utente non abilitato al comitato selezionato');\r\n                } else {\r\n                  this.props.setUserData(user);\r\n                  this.props.setCommitteeData(founded.committee);\r\n                  this.props.connector\r\n                    .getUsers(committeeId)\r\n                    .then(uRes => {\r\n                      message.success('Autenticato');\r\n                      this.props.setUsersData(uRes.data);\r\n                      this.props.history.push(Links.SERVICES);\r\n                    })\r\n                    .catch(uErr => {\r\n                      message.error(\r\n                        `Si è verificato un errore nel recupero degli utenti`\r\n                      );\r\n                      console.log(`Error retrieving users. Error: ${uErr}`);\r\n                    });\r\n                }\r\n              } else {\r\n                message.error('Utente non abilitato al comitato selezionato');\r\n              }\r\n            })\r\n            .catch(err => {\r\n              this.setState({ loading: false }, () =>\r\n                message.error('Username e password non validi')\r\n              );\r\n              console.error(err);\r\n            });\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  public render() {\r\n    const { getFieldDecorator } = this.props.form;\r\n    const { committees } = this.state;\r\n    return (\r\n      <Modal\r\n        visible={true}\r\n        closable={false}\r\n        confirmLoading={false}\r\n        footer={null}\r\n      >\r\n        <div style={{ textAlign: 'right' }}>\r\n          <b>{PortalName}</b>\r\n        </div>\r\n        <Row gutter={8}>\r\n          <Col span={24}>\r\n            <img\r\n              alt={''}\r\n              src={process.env.PUBLIC_URL + '/red_cross_logo.png'}\r\n              width=\"100%\"\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <Form onSubmit={this.handleSubmit} className=\"login-form\">\r\n          <Form.Item>\r\n            {getFieldDecorator('username', {\r\n              rules: [{ required: true, message: 'Username obbligatoria' }]\r\n            })(\r\n              <Input\r\n                prefix={\r\n                  <Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />\r\n                }\r\n                placeholder=\"Digitare il proprio username\"\r\n              />\r\n            )}\r\n          </Form.Item>\r\n          <Form.Item>\r\n            {getFieldDecorator('password', {\r\n              rules: [{ required: true, message: 'Password obbligatoria' }]\r\n            })(\r\n              <Input\r\n                prefix={\r\n                  <Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />\r\n                }\r\n                type=\"password\"\r\n                placeholder=\"Digitare la propria password\"\r\n              />\r\n            )}\r\n          </Form.Item>\r\n          {this.buildCommitteesSelect()}\r\n          <Form.Item>\r\n            <Button\r\n              loading={this.state.loading}\r\n              disabled={\r\n                committees === null ||\r\n                committees === undefined ||\r\n                committees.length === 0\r\n              }\r\n              type=\"primary\"\r\n              htmlType=\"submit\"\r\n              style={{ width: '100%' }}\r\n              className=\"login-form-button\"\r\n            >\r\n              Log in\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nconst WrappeLoginForm = Form.create({ name: 'normal_login' })(LoginForm);\r\nconst mapStateToProps = (state: any, ownProps: any) => {\r\n  return {\r\n    user: state.appData.user,\r\n    connector: state.appData.connector\r\n  };\r\n};\r\nconst LoginContainer = connect(mapStateToProps, {\r\n  setUserData,\r\n  setCommitteeData,\r\n  setUsersData\r\n})(WrappeLoginForm);\r\nexport default LoginContainer;\r\n","export const PortalName = \"Servizio Facile v.1.0\";","import * as React from 'react';\r\nimport { Fab } from 'react-tiny-fab';\r\n\r\nexport interface PlusFabButtonProps {\r\n  onClick: () => void;\r\n}\r\n\r\nclass PlusFabButton extends React.Component<PlusFabButtonProps, any> {\r\n  public render() {\r\n    return (\r\n      <Fab\r\n        mainButtonStyles={{ backgroundColor: '#1890ff' }}\r\n        alwaysShowTitle={false}\r\n        event={'click'}\r\n        icon={<span>+</span>}\r\n        position={{ bottom: 25, right: 25 }}\r\n        onClick={this.props.onClick}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default PlusFabButton;\r\n","import CommitteeUserDTO from './CommitteeUserDTO';\r\n\r\nexport default interface UserDTO {\r\n  id: number;\r\n  username: string;\r\n  password: string;\r\n  flgPasswordChanged: number;\r\n  name: string;\r\n  surname: string;\r\n  birth_date?: Date;\r\n  email?: string;\r\n  gender: number;\r\n  superuser: number;\r\n  withDrivingLicense: number;\r\n  committeeUser: CommitteeUserDTO;\r\n}\r\n\r\nexport const UserRoleType: { [code: number]: string } = {\r\n  0: 'Superuser',\r\n  1: 'Admin',\r\n  2: 'Utente'\r\n};\r\n\r\nexport const UserOccupationType: { [code: number]: string } = {\r\n  0: 'Dipendente',\r\n  1: 'Volontario',\r\n  2: 'Medico/Sanitario',\r\n  3: 'Altro'\r\n};\r\n\r\nexport const UserGenderType: { [code: number]: string } = {\r\n  0: 'Maschio',\r\n  1: 'Femmina',\r\n};\r\n","import * as React from 'react';\r\nimport { Form, Button, Col, Row, Input, Select, DatePicker, Switch } from 'antd';\r\nimport { FormComponentProps } from 'antd/lib/form/Form';\r\nimport UserDTO, { UserGenderType, UserRoleType, UserOccupationType } from '../../dto/UserDTO';\r\nimport moment from 'moment';\r\n\r\nconst { Option } = Select;\r\n\r\nexport interface IUserFormProps {\r\n  loggedUserId: number;\r\n  user: UserDTO | undefined;\r\n  personalArea?: boolean;\r\n  onCancel: () => void;\r\n  onSave: (user: UserDTO) => void;\r\n}\r\n\r\nclass User extends React.Component<IUserFormProps & FormComponentProps> {\r\n  private getInitialValueBirthDate = () => {\r\n    const { user } = this.props;\r\n    return user?.birth_date ? moment(user.birth_date) : undefined;\r\n  };\r\n\r\n  private handleSubmit = (e: any) => {\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        const userToSave: UserDTO = {\r\n          ...values,\r\n          birth_date: values.birth_date ? values.birth_date.format('YYYY-MM-DD') : undefined,\r\n          committeeUser: {\r\n            id: values.committeeUserId,\r\n            userId: values.id,\r\n            committeeId: values.committeeId,\r\n            role: values.role,\r\n            occupation: values.occupation,\r\n            disabled: values.disabled\r\n          }\r\n        };\r\n        this.props.onSave(userToSave);\r\n      }\r\n    });\r\n  };\r\n\r\n  public render() {\r\n    const { getFieldDecorator } = this.props.form;\r\n    const { user, onCancel, personalArea } = this.props;\r\n    return (\r\n      <Form layout=\"vertical\" onSubmit={this.handleSubmit}>\r\n        <Row gutter={16}>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Username\">\r\n              {getFieldDecorator('username', {\r\n                initialValue: this.props.user?.username,\r\n                rules: [{ required: true, message: 'Specificare il nome utente' }]\r\n              })(<Input disabled={user && user.id > 0} placeholder=\"Specificare il nome utente\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Password\">\r\n              {getFieldDecorator('password', {\r\n                initialValue: this.props.user?.password,\r\n                rules: [{ required: true, message: 'Specificare la password' }]\r\n              })(personalArea ? <Input.Password placeholder=\"Specificare la password\" /> : <Input type=\"password\" placeholder=\"Specificare la password\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row gutter={16}>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Nome\">\r\n              {getFieldDecorator('name', {\r\n                initialValue: this.props.user?.name,\r\n                rules: [{ required: true, message: 'Specificare il nome' }]\r\n              })(<Input placeholder=\"Specificare il nome\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Cognome\">\r\n              {getFieldDecorator('surname', {\r\n                initialValue: this.props.user?.surname,\r\n                rules: [{ required: true, message: 'Specificare il cognome' }]\r\n              })(<Input placeholder=\"Specificare il cognome\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row gutter={16}>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Data di nascita\">\r\n              {getFieldDecorator('birth_date', {\r\n                initialValue: this.getInitialValueBirthDate(),\r\n                rules: []\r\n              })(<DatePicker format=\"DD-MM-YYYY\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Sesso\">\r\n              {getFieldDecorator('gender', {\r\n                initialValue: this.props.user?.gender,\r\n                rules: [\r\n                  {\r\n                    required: true,\r\n                    message: 'Specificare il sesso'\r\n                  }\r\n                ]\r\n              })(\r\n                <Select placeholder=\"Sesso\">\r\n                  <Option value={0}>{UserGenderType[0]}</Option>\r\n                  <Option value={1}>{UserGenderType[1]}</Option>\r\n                </Select>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row gutter={16}>\r\n          <Col span={24}>\r\n            <Form.Item label=\"Email\">\r\n              {getFieldDecorator('email', {\r\n                initialValue: this.props.user?.email,\r\n                rules: []\r\n              })(<Input placeholder=\"Specificare l'email\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row gutter={16} style={{ visibility: personalArea ? 'collapse' : 'visible' }}>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Ruolo\">\r\n              {getFieldDecorator('role', {\r\n                initialValue: this.props.user?.committeeUser.role,\r\n                rules: [\r\n                  {\r\n                    required: true,\r\n                    message: 'Specificare il ruolo'\r\n                  }\r\n                ]\r\n              })(\r\n                <Select placeholder=\"Role\">\r\n                  <Option value={1}>{UserRoleType[1]}</Option>\r\n                  <Option value={2}>{UserRoleType[2]}</Option>\r\n                </Select>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Occupazione\">\r\n              {getFieldDecorator('occupation', {\r\n                initialValue: this.props.user?.committeeUser.occupation,\r\n                rules: [\r\n                  {\r\n                    required: true,\r\n                    message: `Specificare l'occupazione`\r\n                  }\r\n                ]\r\n              })(\r\n                <Select placeholder=\"Occupazione\">\r\n                  <Option value={0}>{UserOccupationType[0]}</Option>\r\n                  <Option value={1}>{UserOccupationType[1]}</Option>\r\n                  <Option value={2}>{UserOccupationType[2]}</Option>\r\n                </Select>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row style={{ visibility: personalArea ? 'collapse' : 'visible' }}>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Con patente\">\r\n              {getFieldDecorator('withDrivingLicense', {\r\n                initialValue: this.props.user?.withDrivingLicense,\r\n                valuePropName: 'checked'\r\n              })(<Switch />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Disabilita\">\r\n              {getFieldDecorator('disabled', {\r\n                initialValue: this.props.user?.committeeUser.disabled,\r\n                valuePropName: 'checked'\r\n              })(<Switch />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row gutter={16} style={{ visibility: 'collapse' }}>\r\n          <Col span={6}>\r\n            <Form.Item label=\"Id\">\r\n              {getFieldDecorator('id', {\r\n                initialValue: this.props.user?.id\r\n              })(<Input placeholder=\"Specificare id utente\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={6}>\r\n            <Form.Item label=\"Password modificata\">\r\n              {getFieldDecorator('flgPasswordChanged', {\r\n                initialValue: this.props.user?.flgPasswordChanged\r\n              })(<Input placeholder=\"Password modificata\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={6}>\r\n            <Form.Item label=\"CommitteeUserId\">\r\n              {getFieldDecorator('committeeUserId', {\r\n                initialValue: this.props.user?.committeeUser.id\r\n              })(<Input placeholder=\"CommitteeUserId\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={6}>\r\n            <Form.Item label=\"CommitteeId\">\r\n              {getFieldDecorator('committeeId', {\r\n                initialValue: this.props.user?.committeeUser.committeeId\r\n              })(<Input placeholder=\"CommitteeId\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <div\r\n          style={{\r\n            position: 'absolute',\r\n            right: 0,\r\n            bottom: 0,\r\n            width: '100%',\r\n            borderTop: '1px solid #e9e9e9',\r\n            padding: '10px 16px',\r\n            background: '#fff',\r\n            textAlign: 'right'\r\n          }}\r\n        >\r\n          <Button onClick={onCancel} style={{ marginRight: 8 }}>\r\n            Annulla\r\n          </Button>\r\n          <Button htmlType=\"submit\" type=\"primary\">\r\n            Salva\r\n          </Button>\r\n        </div>\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n\r\nconst UserContainer = Form.create({ name: 'user_form ' })(User);\r\nclass UserForm extends React.Component<IUserFormProps> {\r\n  public render() {\r\n    return <UserContainer {...this.props} />;\r\n  }\r\n}\r\n\r\nexport default UserForm;\r\n","import * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { IWIthConnector, IWithCommittee, IWithUser, IWithUsers } from '../reducers/reducers';\r\nimport { Spin, Button, Popconfirm, Icon, Tooltip, Drawer } from 'antd';\r\nimport { message, Table } from 'antd';\r\nimport 'react-tiny-fab/dist/styles.css';\r\nimport PlusFabButton from './base/PlusFabButton';\r\nimport UserDTO, { UserRoleType, UserOccupationType } from '../dto/UserDTO';\r\nimport UserForm from './forms/UserForm';\r\nimport { setUsersData, ISetUsersDataProps } from '../actions/action';\r\nimport TripUsersDTO from '../dto/TripUsersDTO';\r\n\r\ninterface IUsersState {\r\n  loading: boolean;\r\n  showForm: boolean;\r\n  selectedUser?: UserDTO;\r\n}\r\n\r\nclass Users extends React.Component<IWithUser & IWithUsers & IWIthConnector & IWithCommittee & ISetUsersDataProps, IUsersState> {\r\n  columns = [\r\n    {\r\n      title: 'Username',\r\n      dataIndex: 'username',\r\n      key: 'username',\r\n      render: (value: any, record: any) => <b>{value}</b>\r\n    },\r\n    {\r\n      title: 'Nome',\r\n      dataIndex: 'name',\r\n      key: 'name'\r\n    },\r\n    {\r\n      title: 'Cognome',\r\n      dataIndex: 'surname',\r\n      key: 'surname'\r\n    },\r\n    {\r\n      title: 'Data di nascita',\r\n      dataIndex: 'birth_date',\r\n      key: 'birth_date'\r\n    },\r\n    {\r\n      title: 'Ruolo',\r\n      dataIndex: 'committeeUser.role',\r\n      key: 'role',\r\n      render: (value: any, record: any) => <span>{UserRoleType[value]}</span>\r\n    },\r\n    {\r\n      title: 'Occupazione',\r\n      dataIndex: 'committeeUser.occupation',\r\n      key: 'occupation',\r\n      render: (value: any, record: any) => <span>{UserOccupationType[value]}</span>\r\n    },\r\n    {\r\n      title: 'Con patente',\r\n      dataIndex: 'withDrivingLicense',\r\n      key: 'withDrivingLicense',\r\n      render: (value: any, record: any) => <p>{value === 0 ? undefined : <Icon type=\"check\" />}</p>\r\n    },\r\n    {\r\n      title: 'Disabilitato',\r\n      dataIndex: 'committeeUser.disabled',\r\n      key: 'disabled',\r\n      render: (value: any, record: any) => <p>{value === 0 ? undefined : <Icon type=\"check\" />}</p>\r\n    },\r\n    {\r\n      title: '',\r\n      key: 'action',\r\n      render: (text: any, record: UserDTO) => (\r\n        <span>\r\n          <Tooltip title=\"Modifica\">\r\n            <Button size=\"small\" icon=\"edit\" onClick={() => this._onEditRow(record)} />\r\n          </Tooltip>\r\n          <Popconfirm\r\n            placement=\"topLeft\"\r\n            title={`Confermare l'eliminazione dell'utente?`}\r\n            onConfirm={() => this._onDeleteUser(record)}\r\n            okText=\"Si\"\r\n            cancelText=\"No\"\r\n          >\r\n            <Button size=\"small\" style={{ marginLeft: '1px' }} icon=\"delete\" type=\"danger\" />\r\n          </Popconfirm>\r\n        </span>\r\n      )\r\n    }\r\n  ];\r\n\r\n  emptyUser: UserDTO = {\r\n    id: 0,\r\n    username: '',\r\n    password: '',\r\n    flgPasswordChanged: 0,\r\n    name: '',\r\n    surname: '',\r\n    birth_date: undefined,\r\n    email: undefined,\r\n    gender: 0,\r\n    withDrivingLicense: 0,\r\n    superuser: 0,\r\n    committeeUser: {\r\n      id: 0,\r\n      committeeId: this.props.committee?.id || 0,\r\n      userId: 0,\r\n      role: 2,\r\n      occupation: 0,\r\n      disabled: 0\r\n    }\r\n  };\r\n\r\n  state: IUsersState = {\r\n    loading: false,\r\n    showForm: false\r\n  };\r\n\r\n  private loadData = () => {\r\n    const { committee } = this.props;\r\n    if (committee !== undefined) {\r\n      this.props.connector\r\n        .getUsers(committee.id)\r\n        .then((res) => {\r\n          this.setState({ loading: false }, () => {\r\n            this.props.setUsersData(res.data);\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          message.error(`Si è verificato un errore nella lettura degli utenti`);\r\n          this.setState({ loading: false });\r\n          console.error(err);\r\n        });\r\n    }\r\n  };\r\n\r\n  private _onClose = () => {\r\n    this.setState({ showForm: false, selectedUser: undefined });\r\n  };\r\n\r\n  private _onEditRow = (selectedUser: UserDTO) => {\r\n    this.setState({ selectedUser, showForm: true });\r\n  };\r\n\r\n  private _onDeleteUser = (user: UserDTO) => {\r\n    this.props.connector\r\n      .getUserTrips(user.id)\r\n      .then((res) => {\r\n        const tripUsers: TripUsersDTO[] = res.data || [];\r\n        if (tripUsers.length > 0) {\r\n          message.error(`Utente già assegnato a servizi. Impossibile eliminare`);\r\n          return;\r\n        }\r\n        this.props.connector\r\n          .deleteCommitteesUsers(user.id)\r\n          .then((res) => {\r\n            this.props.connector\r\n              .deleteUser(user.id)\r\n              .then((res) => {\r\n                this.loadData();\r\n              })\r\n              .catch((err) => {\r\n                console.error(`_onDeleteUser - deleteUser: ${err}`);\r\n                message.error(`Si è verificato un errore durante l'eliminazione`);\r\n              });\r\n          })\r\n          .catch((err) => {\r\n            console.error(`_onDeleteUser - deleteCommitteesUsers: ${err}`);\r\n            message.error(`Si è verificato un errore durante l'eliminazione`);\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        console.error(`_onDeleteUser - getUserTrips: ${err}`);\r\n        message.error(`Si è verificato un errore durante l'eliminazione`);\r\n      });\r\n  };\r\n\r\n  private _onSave = (user: UserDTO) => {\r\n    const { committeeUser } = user;\r\n    if (!committeeUser) {\r\n      console.warn(`Expected NOT NULL 'committee' - This should never happen!`);\r\n      message.error('Si è verificato un errore nel salvataggio');\r\n      return;\r\n    }\r\n    this.props.connector\r\n      .publishUserCommittee(user, committeeUser)\r\n      .then((res) => {\r\n        message.success('Salvataggio completato');\r\n        this.setState({ showForm: false, selectedUser: undefined }, () => {\r\n          this.loadData();\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        message.error('Si è verificato un errore nel salvataggio');\r\n      });\r\n  };\r\n\r\n  private _onCreate = () => {\r\n    this.setState({ selectedUser: this.emptyUser, showForm: true });\r\n  };\r\n\r\n  private getDataSource = (): UserDTO[] => {\r\n    const { user, users } = this.props;\r\n    if (user !== undefined) {\r\n      // Un utente NON superuser può gestire solo utenti Admin e User\r\n      if (user.superuser === 0) {\r\n        return users.filter((user: UserDTO) => user.superuser === 0);\r\n      }\r\n      return users;\r\n    } else {\r\n      return [];\r\n    }\r\n  };\r\n\r\n  public render() {\r\n    const { loading, selectedUser, showForm } = this.state;\r\n    return (\r\n      <div>\r\n        {loading ? (\r\n          <div style={{ textAlign: 'center' }}>\r\n            <Spin />\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <Table columns={this.columns} pagination={{ pageSize: 10 }} dataSource={this.getDataSource()} />\r\n            <Drawer\r\n              title={`${(selectedUser as any)?.id === 0 ? 'Crea' : 'Modifica'} utente`}\r\n              width={480}\r\n              onClose={this._onClose}\r\n              visible={showForm}\r\n              bodyStyle={{ paddingBottom: 80 }}\r\n            >\r\n              {showForm ? <UserForm loggedUserId={this.props.user?.id || 0} user={selectedUser} onCancel={this._onClose} onSave={this._onSave} /> : undefined}\r\n            </Drawer>\r\n            {showForm ? undefined : <PlusFabButton onClick={this._onCreate} />}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: any, ownProps: any) => {\r\n  return {\r\n    user: state.appData.user,\r\n    connector: state.appData.connector,\r\n    committee: state.appData.committee,\r\n    users: state.appData.users\r\n  };\r\n};\r\nconst UsersContainer = connect(mapStateToProps, { setUsersData })(Users);\r\nexport default UsersContainer;\r\n","import CommitteeDTO from './CommitteeDTO';\r\n\r\nexport default interface VehicleDTO {\r\n  id: number;\r\n  type: number;\r\n  plate: string;\r\n  sign: string;\r\n  description: string;\r\n  disabled: number;\r\n  committeeId: number;\r\n  committee: CommitteeDTO;\r\n}\r\n\r\nexport const VehicleType: { [code: number]: string } = {\r\n  0: 'Furgone',\r\n  1: 'Ambulanza',\r\n  2: 'Autovettura'\r\n};\r\n","import * as React from 'react';\r\nimport { Drawer, Form, Button, Col, Row, Input, Select, Switch } from 'antd';\r\nimport VehicleDTO, { VehicleType } from '../../dto/VehicleDTO';\r\nimport { FormComponentProps } from 'antd/lib/form/Form';\r\n\r\nconst { Option } = Select;\r\n\r\nexport interface IVehicleFormProps {\r\n  visible: boolean;\r\n  vehicle: VehicleDTO | undefined;\r\n  onClose: () => void;\r\n  onSave: (vehicle: VehicleDTO) => void;\r\n}\r\n\r\nclass Vehicle extends React.Component<IVehicleFormProps & FormComponentProps> {\r\n  componentWillReceiveProps(nextProps: IVehicleFormProps & FormComponentProps) {\r\n    const { vehicle } = nextProps;\r\n    if (\r\n      vehicle !== undefined &&\r\n      JSON.stringify(this.props.vehicle) !== JSON.stringify(nextProps.vehicle)\r\n    ) {\r\n      const { form } = nextProps;\r\n      form.setFieldsValue({\r\n        type: vehicle.type,\r\n        plate: vehicle.plate,\r\n        sign: vehicle.sign,\r\n        description: vehicle.description,\r\n        disabled: vehicle.disabled\r\n      });\r\n    }\r\n  }\r\n\r\n  private handleSubmit = (e: any) => {\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        const { vehicle } = this.props;\r\n        const vehicleToSave: VehicleDTO = {\r\n          ...values,\r\n          id: (vehicle as any).id,\r\n          committeeId: (vehicle as any).committeeId,\r\n          committee: (vehicle as any).committee\r\n        };\r\n        this.props.onSave(vehicleToSave);\r\n      }\r\n    });\r\n  };\r\n\r\n  public render() {\r\n    const { getFieldDecorator } = this.props.form;\r\n    return (\r\n      <Drawer\r\n        title={`${this.props.vehicle?.id === 0 ? 'Crea' : 'Modifica'} veicolo`}\r\n        width={480}\r\n        onClose={this.props.onClose}\r\n        visible={this.props.visible}\r\n        bodyStyle={{ paddingBottom: 80 }}\r\n      >\r\n        <Form layout=\"vertical\" onSubmit={this.handleSubmit}>\r\n          <Row gutter={16}>\r\n            <Col span={24}>\r\n              <Form.Item label=\"Tipo\">\r\n                {getFieldDecorator('type', {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: 'Specificare il tipo'\r\n                    }\r\n                  ],\r\n                  initialValue: '0'\r\n                })(\r\n                  <Select placeholder=\"Tipologia\">\r\n                    <Option value={0}>{VehicleType[0]}</Option>\r\n                    <Option value={1}>{VehicleType[1]}</Option>\r\n                    <Option value={2}>{VehicleType[2]}</Option>\r\n                  </Select>\r\n                )}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16}>\r\n            <Col span={24}>\r\n              <Form.Item label=\"Targa\">\r\n                {getFieldDecorator('plate', {\r\n                  rules: [{ required: true, message: 'Specificare la targa' }]\r\n                })(<Input placeholder=\"Specificare la targa\" />)}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16}>\r\n            <Col span={24}>\r\n              <Form.Item label=\"Sigla\">\r\n                {getFieldDecorator('sign', {\r\n                  rules: [{ required: false, message: 'Specificare la sigla' }]\r\n                })(<Input placeholder=\"Specificare una sigla\" />)}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16}>\r\n            <Col span={24}>\r\n              <Form.Item label=\"Descrizione\">\r\n                {getFieldDecorator('description', {\r\n                  rules: [\r\n                    {\r\n                      required: false\r\n                    }\r\n                  ]\r\n                })(\r\n                  <Input.TextArea\r\n                    rows={4}\r\n                    placeholder=\"Specificare una descrizione\"\r\n                  />\r\n                )}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col span={12}>\r\n              <Form.Item label=\"Disabilita\">\r\n                {getFieldDecorator('disabled', { valuePropName: 'checked' })(\r\n                  <Switch />\r\n                )}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <div\r\n            style={{\r\n              position: 'absolute',\r\n              right: 0,\r\n              bottom: 0,\r\n              width: '100%',\r\n              borderTop: '1px solid #e9e9e9',\r\n              padding: '10px 16px',\r\n              background: '#fff',\r\n              textAlign: 'right'\r\n            }}\r\n          >\r\n            <Button onClick={this.props.onClose} style={{ marginRight: 8 }}>\r\n              Annulla\r\n            </Button>\r\n            <Button htmlType=\"submit\" type=\"primary\">\r\n              Salva\r\n            </Button>\r\n          </div>\r\n        </Form>\r\n      </Drawer>\r\n    );\r\n  }\r\n}\r\n\r\nconst VehicleContainer = Form.create({ name: 'vehicle_form ' })(Vehicle);\r\nclass VehicleForm extends React.Component<IVehicleFormProps> {\r\n  public render() {\r\n    return <VehicleContainer {...this.props} />;\r\n  }\r\n}\r\n\r\nexport default VehicleForm;\r\n","import * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport VehicleDTO, { VehicleType } from '../dto/VehicleDTO';\r\nimport { IWIthConnector, IWithCommittee } from '../reducers/reducers';\r\nimport { Spin, Button, Popconfirm, Tooltip, Icon } from 'antd';\r\nimport { message, Table } from 'antd';\r\nimport VehicleForm from './forms/VehicleForm';\r\nimport 'react-tiny-fab/dist/styles.css';\r\nimport PlusFabButton from './base/PlusFabButton';\r\n\r\ninterface IVechiclesState {\r\n  loading: boolean;\r\n  showForm: boolean;\r\n  selectedVehicle: VehicleDTO | undefined;\r\n  vehicles: VehicleDTO[];\r\n}\r\n\r\nclass Vehicles extends React.Component<\r\n  IWIthConnector & IWithCommittee,\r\n  IVechiclesState\r\n> {\r\n  columns = [\r\n    {\r\n      title: 'Targa',\r\n      dataIndex: 'plate',\r\n      key: 'plate'\r\n    },\r\n    {\r\n      title: 'Sigla',\r\n      dataIndex: 'sign',\r\n      key: 'sign'\r\n    },\r\n    {\r\n      title: 'Tipologia',\r\n      dataIndex: 'type',\r\n      key: 'type',\r\n      render: (value: any, record: any) => <span>{VehicleType[value]}</span>\r\n    },\r\n    {\r\n      title: 'Descrizione',\r\n      dataIndex: 'description',\r\n      key: 'description'\r\n    },\r\n    {\r\n      title: 'Disabilitato',\r\n      dataIndex: 'disabled',\r\n      key: 'disabled',\r\n      render: (value: any, record: any) => (\r\n        <p>{value === 0 ? undefined : <Icon type=\"close\" />}</p>\r\n      )\r\n    },\r\n    {\r\n      title: '',\r\n      key: 'action',\r\n      render: (text: any, record: VehicleDTO) => (\r\n        <span>\r\n          <Tooltip title=\"Modifica\">\r\n            <Button\r\n              size=\"small\"\r\n              icon=\"edit\"\r\n              onClick={() => this._onEditVehicle(record)}\r\n            />\r\n          </Tooltip>\r\n          <Popconfirm\r\n            placement=\"topLeft\"\r\n            title={`Confermare l'eliminazione?`}\r\n            onConfirm={() => this._onDeleteVehicle(record)}\r\n            okText=\"Si\"\r\n            cancelText=\"No\"\r\n          >\r\n            <Button\r\n              size=\"small\"\r\n              style={{ marginLeft: '1px' }}\r\n              icon=\"delete\"\r\n              type=\"danger\"\r\n            />\r\n          </Popconfirm>\r\n        </span>\r\n      )\r\n    }\r\n  ];\r\n\r\n  emptyVehicle: VehicleDTO = {\r\n    id: 0,\r\n    type: 0,\r\n    plate: '',\r\n    sign: '',\r\n    description: '',\r\n    disabled: 0,\r\n    committeeId: this.props.committee?.id || 0,\r\n    committee: this.props.committee as any\r\n  };\r\n\r\n  state = {\r\n    loading: true,\r\n    showForm: false,\r\n    selectedVehicle: undefined,\r\n    vehicles: []\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.loadData();\r\n  }\r\n\r\n  private loadData = () => {\r\n    const { committee } = this.props;\r\n    if (committee !== undefined) {\r\n      this.props.connector\r\n        .getVehicles(committee.id)\r\n        .then(res => {\r\n          this.setState({\r\n            vehicles: res.data,\r\n            loading: false\r\n          });\r\n        })\r\n        .catch(err => {\r\n          this.setState({ vehicles: [], loading: false });\r\n          console.error(err);\r\n        });\r\n    }\r\n  };\r\n\r\n  private _onClose = () => {\r\n    this.setState({ showForm: false, selectedVehicle: undefined });\r\n  };\r\n\r\n  private _onEditVehicle = (selectedVehicle: VehicleDTO) => {\r\n    this.setState({ selectedVehicle, showForm: true });\r\n  };\r\n\r\n  private _onDeleteVehicle = (vehicle: VehicleDTO) => {\r\n    this.props.connector.deleteVehicle(vehicle).then(res => {\r\n      this.loadData();\r\n    });\r\n  };\r\n\r\n  private _onSave = (vehicle: VehicleDTO) => {\r\n    this.publishVehicle(vehicle);\r\n  };\r\n\r\n  private publishVehicle = (vehicle: VehicleDTO) => {\r\n    this.props.connector\r\n      .publishVehicle(vehicle)\r\n      .then(res => {\r\n        message.success('Salvataggio completato');\r\n        this.setState({ showForm: false, selectedVehicle: undefined }, () => {\r\n          this.loadData();\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n        message.error('Si è verificato un errore nel salvataggio');\r\n      });\r\n  };\r\n\r\n  private _onCreate = () => {\r\n    this.setState({ selectedVehicle: this.emptyVehicle, showForm: true });\r\n  };\r\n\r\n  public render() {\r\n    const { loading, vehicles } = this.state;\r\n    return (\r\n      <div>\r\n        {loading ? (\r\n          <div style={{ textAlign: 'center' }}>\r\n            <Spin />{' '}\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <Table\r\n              columns={this.columns}\r\n              pagination={{ pageSize: 10 }}\r\n              dataSource={vehicles}\r\n            />\r\n            <VehicleForm\r\n              visible={this.state.showForm}\r\n              vehicle={this.state.selectedVehicle}\r\n              onClose={this._onClose}\r\n              onSave={this._onSave}\r\n            />\r\n            {this.state.showForm ? (\r\n              undefined\r\n            ) : (\r\n              <PlusFabButton onClick={this._onCreate} />\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: any, ownProps: any) => {\r\n  return {\r\n    connector: state.appData.connector,\r\n    committee: state.appData.committee\r\n  };\r\n};\r\nconst VehiclesContainer = connect(mapStateToProps)(Vehicles);\r\nexport default VehiclesContainer;\r\n","import CommitteeDTO from './CommitteeDTO';\r\nimport VehicleDTO from './VehicleDTO';\r\nimport TripUsersDTO from './TripUsersDTO';\r\n\r\nexport default interface TripDTO {\r\n  id: number;\r\n  date: string;\r\n  hour: string; // Esiste il time?\r\n  flgDestination: number;\r\n  flgAr: number;\r\n  siteDeparture: string;\r\n  siteArrival: string;\r\n  serviceType: string;\r\n  patientData?: string;\r\n  type: number;\r\n  extraUsers: number;\r\n  flgNurse: number;\r\n  flgToNotify: number;\r\n  notes?: string;\r\n  committeeId: number;\r\n  vehicleId: number;\r\n  committee: CommitteeDTO;\r\n  vehicle: VehicleDTO;\r\n  trip_users?: TripUsersDTO[];\r\n}\r\n\r\nexport const ServiceTargetRoleType: { [code: number]: string } = {\r\n  0: 'Dipendenti',\r\n  1: 'Volontari',\r\n  2: 'Chiunque'\r\n};\r\n\r\nexport const ServiceTargetLocationType: { [code: number]: string } = {\r\n  0: 'In Sede',\r\n  1: 'Destinazione',\r\n  2: 'Prelevamento'\r\n};\r\n\r\nexport const FlgArType: { [code: number]: string } = {\r\n  0: 'Solo Andata',\r\n  1: 'Andata/Ritorno'\r\n};\r\n","import UserDTO from './UserDTO';\r\n\r\nexport default interface TripUsersDTO {\r\n  id: number;\r\n  tripId: number;\r\n  userId: number;\r\n  role: number;\r\n  user?: UserDTO;\r\n}\r\n\r\nexport const ServiceRoleType: { [code: number]: string } = {\r\n  0: 'Autista',\r\n  1: 'Soccorritore',\r\n  2: 'Medico/Sanitario'\r\n};\r\n","import * as React from 'react';\r\nimport { Drawer, Form, Col, Row, Input, InputNumber, DatePicker, TimePicker, Button, Radio, Select, Switch } from 'antd';\r\nimport { FormComponentProps } from 'antd/lib/form/Form';\r\nimport TripDTO, { ServiceTargetLocationType, FlgArType, ServiceTargetRoleType } from '../../dto/TripDTO';\r\nimport moment from 'moment';\r\nimport VehicleDTO, { VehicleType } from '../../dto/VehicleDTO';\r\n\r\nconst { Option } = Select;\r\n\r\nexport interface ITripFormProps {\r\n  visible: boolean;\r\n  vehicles: VehicleDTO[];\r\n  trip: TripDTO | undefined;\r\n  onClose: () => void;\r\n  onSave: (trip: TripDTO) => void;\r\n}\r\n\r\nclass Trip extends React.Component<ITripFormProps & FormComponentProps> {\r\n  private setFieldsValue = (trip: TripDTO) => {\r\n    const { form } = this.props;\r\n    const dateForHour = new Date(2000, 1, 1, trip.hour ? Number(trip.hour.substring(0, 2)) : 12, trip.hour ? Number(trip.hour.substring(3, 5)) : 0);\r\n    const formValues = {\r\n      ...trip,\r\n      tripDate: trip.date ? moment(trip.date) : undefined,\r\n      tripHour: moment(dateForHour)\r\n    };\r\n    form.setFieldsValue(formValues);\r\n  };\r\n\r\n  componentWillReceiveProps(nextProps: ITripFormProps & FormComponentProps) {\r\n    const { trip } = nextProps;\r\n    if (trip !== undefined && JSON.stringify(this.props.trip) !== JSON.stringify(nextProps.trip)) {\r\n      this.setFieldsValue(trip as TripDTO);\r\n    }\r\n  }\r\n\r\n  private handleSubmit = (e: any) => {\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        const tripToSave: TripDTO = {\r\n          ...values,\r\n          date: values.tripDate ? values.tripDate.format('YYYY-MM-DD') : undefined,\r\n          hour: values.tripHour.format('HH:mm')\r\n        };\r\n        this.props.onSave(tripToSave);\r\n      }\r\n    });\r\n  };\r\n\r\n  public render() {\r\n    const { getFieldDecorator } = this.props.form;\r\n    const { trip, onClose, visible, vehicles } = this.props;\r\n    return (\r\n      <Drawer title={`${trip?.id === 0 ? 'Crea' : 'Modifica'} servizio`} width={480} onClose={onClose} visible={visible} bodyStyle={{ paddingBottom: 80 }}>\r\n        <Form layout=\"vertical\" onSubmit={this.handleSubmit}>\r\n          <Row gutter={16}>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Data del servizio\">\r\n                {getFieldDecorator('tripDate', {\r\n                  rules: [{ required: true, message: 'Specificare data di partenza' }]\r\n                })(<DatePicker style={{ width: '100%' }} format=\"DD-MM-YYYY\" />)}\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Ora\">\r\n                {getFieldDecorator('tripHour', {\r\n                  rules: [\r\n                    {\r\n                      type: 'object',\r\n                      required: true,\r\n                      message: `Specificare l'ora del servizio`\r\n                    }\r\n                  ]\r\n                })(<TimePicker style={{ width: '100%' }} placeholder=\"Ora servizio\" format=\"HH:mm\" />)}\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Luogo\">\r\n                {getFieldDecorator('flgDestination', {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: 'Specificare il luogo'\r\n                    }\r\n                  ]\r\n                })(\r\n                  <Select placeholder=\"Luogo\">\r\n                    <Option value={0}>{ServiceTargetLocationType[0]}</Option>\r\n                    <Option value={1}>{ServiceTargetLocationType[1]}</Option>\r\n                    <Option value={2}>{ServiceTargetLocationType[2]}</Option>\r\n                  </Select>\r\n                )}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <Form.Item label=\"Partenza\">\r\n                {getFieldDecorator('siteDeparture', {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: 'Specificare il luogo di partenza'\r\n                    }\r\n                  ]\r\n                })(<Input.TextArea rows={4} placeholder=\"Luogo di partenza\" />)}\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={12}>\r\n              <Form.Item label=\"Arrivo\">\r\n                {getFieldDecorator('siteArrival', {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: 'Specificare il luogo di arrivo'\r\n                    }\r\n                  ]\r\n                })(<Input.TextArea rows={4} placeholder=\"Luogo di arrivo\" />)}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16}>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Veicolo\">\r\n                {getFieldDecorator('vehicleId', {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: 'Specificare il veicolo'\r\n                    }\r\n                  ]\r\n                })(\r\n                  <Select placeholder=\"veicolo\">\r\n                    {vehicles.map((vehicle: VehicleDTO) => {\r\n                      const vehicleId: number = vehicle.id;\r\n                      return (\r\n                        <Option key={vehicleId} value={vehicle.id}>\r\n                          {vehicle.sign} - {VehicleType[vehicle.type]}\r\n                        </Option>\r\n                      );\r\n                    })}\r\n                  </Select>\r\n                )}\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item>\r\n                {getFieldDecorator('flgAr')(\r\n                  <Radio.Group style={{ marginTop: '10px' }}>\r\n                    <Radio value={0}>{FlgArType[0]}</Radio>\r\n                    <Radio value={1}>{FlgArType[1]}</Radio>\r\n                  </Radio.Group>\r\n                )}\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Servizio per\">\r\n                {getFieldDecorator('type', {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: 'Specificare il tipo'\r\n                    }\r\n                  ]\r\n                })(\r\n                  <Select placeholder=\"Servizio per\">\r\n                    <Option value={0}>{ServiceTargetRoleType[0]}</Option>\r\n                    <Option value={1}>{ServiceTargetRoleType[1]}</Option>\r\n                    <Option value={2}>{ServiceTargetRoleType[2]}</Option>\r\n                  </Select>\r\n                )}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16}>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Tipologia servizio\">\r\n                {getFieldDecorator('serviceType', {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: 'Specificare il tipo di servizio'\r\n                    }\r\n                  ]\r\n                })(<Input.TextArea rows={2} placeholder=\"Tipologia servizio\" />)}\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Dati paziente\">{getFieldDecorator('patientData')(<Input.TextArea rows={2} placeholder=\"Dati paziente\" />)}</Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Con infermiere\">{getFieldDecorator('flgNurse', { valuePropName: 'checked' })(<Switch />)}</Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16}>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Note\">{getFieldDecorator('notes')(<Input.TextArea rows={3} placeholder=\"Eventuali note aggiuntive\" />)}</Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Numero accompagnatori\">{getFieldDecorator('extraUsers', { initialValue: 1 })(<InputNumber min={1} max={10} />)}</Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Da notificare\">{getFieldDecorator('flgToNotify', { valuePropName: 'checked' })(<Switch />)}</Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16} style={{ visibility: 'collapse' }}>\r\n            <Col span={6}>\r\n              <Form.Item label=\"Id\">{getFieldDecorator('id')(<Input placeholder=\"Specificare id servizio\" />)}</Form.Item>\r\n              <Col span={6}>\r\n                <Form.Item label=\"CommitteeId\">{getFieldDecorator('committeeId')(<Input placeholder=\"CommitteeId\" />)}</Form.Item>\r\n              </Col>\r\n            </Col>\r\n          </Row>\r\n          <div\r\n            style={{\r\n              position: 'absolute',\r\n              right: 0,\r\n              bottom: 0,\r\n              width: '100%',\r\n              borderTop: '1px solid #e9e9e9',\r\n              padding: '10px 16px',\r\n              background: '#fff',\r\n              textAlign: 'right'\r\n            }}\r\n          >\r\n            <Button onClick={this.props.onClose} style={{ marginRight: 8 }}>\r\n              Annulla\r\n            </Button>\r\n            <Button htmlType=\"submit\" type=\"primary\">\r\n              Salva\r\n            </Button>\r\n          </div>\r\n        </Form>\r\n      </Drawer>\r\n    );\r\n  }\r\n}\r\n\r\nconst TripContainer = Form.create({ name: 'trip_form ' })(Trip);\r\nclass TripForm extends React.Component<ITripFormProps> {\r\n  public render() {\r\n    return <TripContainer {...this.props} />;\r\n  }\r\n}\r\n\r\nexport default TripForm;\r\n","import * as React from 'react';\r\nimport { ServiceRoleType } from '../../dto/TripUsersDTO';\r\nimport { Button, Radio, Row, Select } from 'antd';\r\nimport { RadioChangeEvent } from 'antd/lib/radio';\r\nimport UserDTO from '../../dto/UserDTO';\r\n\r\nconst { Option } = Select;\r\n\r\ninterface RoleChooseProps {\r\n  users: UserDTO[];\r\n  isUserAdmin: boolean;\r\n  loggedUser: UserDTO;\r\n  onConfirmRole: (role: number, userId: number) => void;\r\n}\r\n\r\ninterface RoleChooseState {\r\n  roleSelected: number;\r\n  userSelected: UserDTO;\r\n}\r\n\r\nclass RoleChoose extends React.Component<RoleChooseProps, RoleChooseState> {\r\n  state = {\r\n    userSelected: this.props.isUserAdmin ? this.props.users[0] : this.props.loggedUser,\r\n    roleSelected: 1\r\n  };\r\n\r\n  private _onChangeRole = (e: RadioChangeEvent) => {\r\n    this.setState({ roleSelected: e.target.value });\r\n  };\r\n\r\n  private _onChangeUser = (value: number) => {\r\n    const { users } = this.props;\r\n    const userSelected: UserDTO | undefined = users.find((user: UserDTO) => user.id === value);\r\n    if (userSelected !== undefined) {\r\n      this.setState({ userSelected, roleSelected: 1 });\r\n    }\r\n  };\r\n\r\n  public render() {\r\n    const { users, isUserAdmin, loggedUser } = this.props;\r\n    const { userSelected, roleSelected } = this.state;\r\n    return (\r\n      <div>\r\n        <Row>\r\n          <Select style={{ width: '100%' }} defaultValue={this.state.userSelected.id} onChange={this._onChangeUser}>\r\n            {users\r\n              .filter((user: UserDTO) => isUserAdmin || user.id === loggedUser.id)\r\n              .map((user: UserDTO) => (\r\n                <Option value={user.id} key={user.id}>\r\n                  {user.name} {user.surname}\r\n                </Option>\r\n              ))}\r\n          </Select>\r\n        </Row>\r\n        <Row>\r\n          <Radio.Group style={{ marginTop: '5px', width: '100%' }} value={roleSelected} buttonStyle=\"solid\" onChange={this._onChangeRole}>\r\n            {userSelected.withDrivingLicense === 1 ? <Radio.Button value={0}>{ServiceRoleType[0]}</Radio.Button> : undefined}\r\n            <Radio.Button value={1}>{ServiceRoleType[1]}</Radio.Button>\r\n            {userSelected.committeeUser.occupation === 2 ? <Radio.Button value={2}>{ServiceRoleType[2]}</Radio.Button> : undefined}\r\n          </Radio.Group>\r\n        </Row>\r\n        <Row>\r\n          <Button style={{ marginTop: '5px', width: '100%' }} onClick={() => this.props.onConfirmRole(this.state.roleSelected, this.state.userSelected.id)}>\r\n            Conferma\r\n          </Button>\r\n        </Row>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RoleChoose;\r\n","import * as React from 'react';\r\nimport TripDTO from '../../dto/TripDTO';\r\nimport Form, { FormComponentProps } from 'antd/lib/form/Form';\r\nimport { Icon, Button, Drawer, Row, Col, DatePicker, TimePicker } from 'antd';\r\nimport moment from 'moment';\r\n\r\nexport interface IDuplicateTripItem {\r\n  date: moment.Moment;\r\n  hour: moment.Moment;\r\n}\r\n\r\nexport interface IDuplicateTripFormProps {\r\n  visible: boolean;\r\n  trip: TripDTO | undefined;\r\n  onClose: () => void;\r\n  onConfirm: (trip: TripDTO, newDates: IDuplicateTripItem[]) => void;\r\n}\r\n\r\nlet id = 0;\r\n\r\nclass DuplicateTrip extends React.Component<\r\n  IDuplicateTripFormProps & FormComponentProps\r\n> {\r\n  componentWillReceiveProps(\r\n    nextProps: IDuplicateTripFormProps & FormComponentProps\r\n  ) {\r\n    const { trip } = nextProps;\r\n    if (\r\n      trip !== undefined &&\r\n      JSON.stringify(this.props.trip) !== JSON.stringify(nextProps.trip)\r\n    ) {\r\n      this.props.form.setFieldsValue({\r\n        keys: [],\r\n        duplicateElements: []\r\n      });\r\n    }\r\n  }\r\n\r\n  private onDeleteDate = (k: any) => {\r\n    const { form } = this.props;\r\n    const keys = form.getFieldValue('keys');\r\n    const duplicateElements: IDuplicateTripItem[] =\r\n      form.getFieldValue('duplicateElements') || [];\r\n    if (keys.length === 1) {\r\n      return;\r\n    }\r\n\r\n    form.setFieldsValue({\r\n      keys: keys.filter((key: any) => key !== k),\r\n      duplicateElements: duplicateElements.filter(\r\n        (value: IDuplicateTripItem, index: number) => index !== k\r\n      )\r\n    });\r\n  };\r\n\r\n  private onAddDate = () => {\r\n    const { form } = this.props;\r\n    const keys = form.getFieldValue('keys');\r\n    const nextKeys = keys.concat(id++);\r\n\r\n    form.setFieldsValue({\r\n      keys: nextKeys\r\n    });\r\n  };\r\n\r\n  handleSubmit = (e: any) => {\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        const { duplicateElements } = values;\r\n        const { trip } = this.props;\r\n        this.props.onConfirm(\r\n          trip as any,\r\n          duplicateElements.filter((element: any) => !!element)\r\n        );\r\n      }\r\n    });\r\n  };\r\n\r\n  private getInitialDateValue = (key: number) => {\r\n    const { trip: tripToDuplicate } = this.props;\r\n    const tripDate = moment(\r\n      tripToDuplicate !== undefined ? tripToDuplicate.date : new Date()\r\n    );\r\n    const newTripDate = tripDate.add(key + 1, 'd');\r\n    return newTripDate;\r\n  };\r\n\r\n  private getInitialHourValue = () => {\r\n    const { trip: tripToDuplicate } = this.props;\r\n    const dateForHour = new Date(\r\n      2000,\r\n      1,\r\n      1,\r\n      tripToDuplicate?.hour ? Number(tripToDuplicate.hour.substring(0, 2)) : 12,\r\n      tripToDuplicate?.hour ? Number(tripToDuplicate.hour.substring(3, 5)) : 0\r\n    );\r\n    const tripHour = moment(dateForHour);\r\n    return tripHour;\r\n  };\r\n\r\n  public render() {\r\n    const { getFieldDecorator, getFieldValue } = this.props.form;\r\n    getFieldDecorator('keys', { initialValue: [] });\r\n    const keys = getFieldValue('keys');\r\n    const myFormItems = keys.map((key: any, index: number) => (\r\n      <Row gutter={16} key={index}>\r\n        <Col span={11}>\r\n          <Form.Item>\r\n            {getFieldDecorator(`duplicateElements[${key}].date`, {\r\n              initialValue: this.getInitialDateValue(index),\r\n              rules: [\r\n                {\r\n                  required: true,\r\n                  message: 'Selezionare data del viaggio'\r\n                }\r\n              ]\r\n            })(<DatePicker style={{ width: '100%' }} format=\"DD-MM-YYYY\" />)}\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={11}>\r\n          <Form.Item>\r\n            {getFieldDecorator(`duplicateElements[${key}].hour`, {\r\n              initialValue: this.getInitialHourValue(),\r\n              rules: [\r\n                {\r\n                  type: 'object',\r\n                  required: true,\r\n                  message: `Specificare l'ora del servizio`\r\n                }\r\n              ]\r\n            })(\r\n              <TimePicker\r\n                style={{ width: '100%' }}\r\n                placeholder=\"Ora servizio\"\r\n                format=\"HH:mm\"\r\n              />\r\n            )}\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={2}>\r\n          {key === 0 ? (\r\n            undefined\r\n          ) : (\r\n            <Icon\r\n              style={{ marginTop: '10px' }}\r\n              className=\"dynamic-delete-button\"\r\n              type=\"minus-circle-o\"\r\n              onClick={() => this.onDeleteDate(key)}\r\n            />\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    ));\r\n\r\n    return (\r\n      <Drawer\r\n        title={`Duplica servizio`}\r\n        width={480}\r\n        onClose={this.props.onClose}\r\n        visible={this.props.visible}\r\n        bodyStyle={{ paddingBottom: 80 }}\r\n      >\r\n        <Form onSubmit={this.handleSubmit}>\r\n          {myFormItems}\r\n          <Row gutter={16}>\r\n            <Col span={24}>\r\n              <Form.Item>\r\n                <Button\r\n                  type=\"dashed\"\r\n                  onClick={this.onAddDate}\r\n                  style={{ width: '100%' }}\r\n                >\r\n                  <Icon type=\"plus\" /> Aggiungi data\r\n                </Button>\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <div\r\n            style={{\r\n              position: 'absolute',\r\n              right: 0,\r\n              bottom: 0,\r\n              width: '100%',\r\n              borderTop: '1px solid #e9e9e9',\r\n              padding: '10px 16px',\r\n              background: '#fff',\r\n              textAlign: 'right'\r\n            }}\r\n          >\r\n            <Button onClick={this.props.onClose} style={{ marginRight: 8 }}>\r\n              Annulla\r\n            </Button>\r\n            <Button htmlType=\"submit\" type=\"primary\">\r\n              Conferma\r\n            </Button>\r\n          </div>\r\n        </Form>\r\n      </Drawer>\r\n    );\r\n  }\r\n}\r\n\r\nconst DuplicateTripContainer = Form.create({ name: 'duplicate_trip_form ' })(\r\n  DuplicateTrip\r\n);\r\nclass DuplicateTripForm extends React.Component<IDuplicateTripFormProps> {\r\n  public render() {\r\n    return <DuplicateTripContainer {...this.props} />;\r\n  }\r\n}\r\n\r\nexport default DuplicateTripForm;\r\n","import * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { IWithUser, IWIthConnector } from '../reducers/reducers';\r\nimport { Row, Col, message } from 'antd';\r\nimport UserForm from './forms/UserForm';\r\nimport UserDTO from '../dto/UserDTO';\r\nimport { RouterProps } from 'react-router';\r\nimport { ISetUserDataProps, setUserData } from '../actions/action';\r\n\r\ninterface IPersonalAreaProps\r\n  extends IWithUser,\r\n    IWIthConnector,\r\n    ISetUserDataProps,\r\n    RouterProps {}\r\n\r\nclass PersonalArea extends React.Component<IPersonalAreaProps> {\r\n  private _onCancel = () => {\r\n    this.props.history.goBack();\r\n  };\r\n  private _onSave = (user: UserDTO) => {\r\n    this.props.connector\r\n      .publishUser(user)\r\n      .then(res => {\r\n        this.props.setUserData(user);\r\n        message.success('Salvataggio completato');\r\n      })\r\n      .catch(err => {\r\n        console.error(`_onSave: error ${err}`);\r\n        message.error('Si è verificato un errore nel salvataggio');\r\n      });\r\n  };\r\n\r\n  public render() {\r\n    const { user } = this.props;\r\n    return (\r\n      <Row>\r\n        <Col span={6}></Col>\r\n        <Col span={12} style={{ marginTop: '10px' }}>\r\n          <UserForm\r\n            loggedUserId={(user as UserDTO).id}\r\n            user={user}\r\n            personalArea={true}\r\n            onCancel={this._onCancel}\r\n            onSave={this._onSave}\r\n          />\r\n        </Col>\r\n        <Col span={6}></Col>\r\n      </Row>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: any, ownProps: any) => {\r\n  return {\r\n    user: state.appData.user,\r\n    connector: state.appData.connector,\r\n    committee: state.appData.committee\r\n  };\r\n};\r\nconst PersonalAreaContainer = connect(mapStateToProps, {\r\n  setUserData\r\n})(PersonalArea);\r\nexport default PersonalAreaContainer;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Layout, Menu, Icon, Button, Row, Col, Tooltip } from 'antd';\r\nimport { Route } from 'react-router-dom';\r\nimport { Links } from '../utils/Links';\r\nimport UsersContainer from './Users';\r\nimport VehiclesContainer from './Vehicles';\r\nimport ServicesContainer from './Services';\r\nimport { IWithUser, IWithCommittee } from '../reducers/reducers';\r\nimport { RouterProps } from 'react-router';\r\nimport { PortalName } from '../utils/Constants';\r\nimport { IResetAuthDataProps, resetAuthData } from '../actions/action';\r\nimport PersonalAreaContainer from './PersonalArea';\r\n\r\nconst { Header, Content, Footer, Sider } = Layout;\r\n\r\ninterface IDashboardProps\r\n  extends IWithUser,\r\n    IWithCommittee,\r\n    IResetAuthDataProps,\r\n    RouterProps {}\r\n\r\ninterface IDashboardState {\r\n  collapsed: boolean;\r\n}\r\n\r\nclass Dashboard extends React.Component<IDashboardProps, IDashboardState> {\r\n  constructor(props: IDashboardProps) {\r\n    super(props);\r\n\r\n    const { user, committee } = this.props;\r\n    if (!user && !committee) {\r\n      this._onLogout();\r\n    }\r\n  }\r\n  state = {\r\n    collapsed: false\r\n  };\r\n\r\n  _onCollapse = (collapsed: any) => {\r\n    this.setState({ collapsed });\r\n  };\r\n\r\n  _onClickLogout = () => {\r\n    this.props.resetAuthData();\r\n    this._onLogout();\r\n  };\r\n\r\n  _onLogout = () => {\r\n    this.props.history.replace(Links.LOGOUT);\r\n  };\r\n\r\n  get isUserAdmin(): boolean {\r\n    const { user } = this.props;\r\n    if (user !== undefined && user.committeeUser !== undefined) {\r\n      return user?.committeeUser.role < 2;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public render() {\r\n    const { user, committee } = this.props;\r\n    return (\r\n      <Layout style={{ minHeight: '100vh' }}>\r\n        <Sider\r\n          collapsible\r\n          collapsed={this.state.collapsed}\r\n          onCollapse={this._onCollapse}\r\n        >\r\n          <div style={{ height: '60px', width: '100%' }} />\r\n          <Menu theme=\"dark\" defaultSelectedKeys={['1']} mode=\"inline\">\r\n            <Menu.Item\r\n              key=\"1\"\r\n              onClick={() => {\r\n                this.props.history.push(Links.SERVICES);\r\n              }}\r\n            >\r\n              <Icon type=\"calendar\" />\r\n              <span>Gestione Servizi</span>\r\n            </Menu.Item>\r\n            {this.isUserAdmin ? (\r\n              <Menu.Item\r\n                key=\"2\"\r\n                onClick={() => {\r\n                  this.props.history.push(Links.USERS);\r\n                }}\r\n              >\r\n                <Icon type=\"team\" />\r\n                <span>Gestione Utenti</span>\r\n              </Menu.Item>\r\n            ) : (\r\n              undefined\r\n            )}\r\n            {this.isUserAdmin ? (\r\n              <Menu.Item\r\n                key=\"3\"\r\n                onClick={() => {\r\n                  this.props.history.push(Links.VEHICLES);\r\n                }}\r\n              >\r\n                <Icon type=\"car\" />\r\n                <span>Gestione Veicoli</span>\r\n              </Menu.Item>\r\n            ) : (\r\n              undefined\r\n            )}\r\n          </Menu>\r\n        </Sider>\r\n        <Layout>\r\n          <Header\r\n            style={{ background: '#001529', maxHeight: '64px', padding: 0 }}\r\n          >\r\n            <Row>\r\n              <Col span={16} style={{ textAlign: 'left' }}>\r\n                <span\r\n                  style={{\r\n                    color: 'white',\r\n                    marginLeft: '5px',\r\n                    fontStyle: 'bold',\r\n                    fontSize: 'larger'\r\n                  }}\r\n                >\r\n                  {PortalName}\r\n                </span>\r\n                -\r\n                <span\r\n                  style={{\r\n                    color: 'white',\r\n                    marginLeft: '5px',\r\n                    fontStyle: 'italic'\r\n                  }}\r\n                >\r\n                  {committee?.description}\r\n                </span>\r\n              </Col>\r\n              <Col span={6} style={{ textAlign: 'right' }}>\r\n                <span style={{ color: 'white', marginRight: '5px' }}>\r\n                  {user?.name} {user?.surname}\r\n                </span>\r\n              </Col>\r\n              <Col span={1}>\r\n                <Tooltip title=\"Area personale\" placement=\"bottom\">\r\n                  <Button\r\n                    ghost\r\n                    icon=\"user\"\r\n                    onClick={() => {\r\n                      this.props.history.push(Links.PERSONAL_AREA);\r\n                    }}\r\n                    style={{ height: '64px', width: '100%' }}\r\n                  />\r\n                </Tooltip>\r\n              </Col>\r\n              <Col span={1}>\r\n                <Tooltip title=\"Logout\" placement=\"bottom\">\r\n                  <Button\r\n                    ghost\r\n                    icon=\"logout\"\r\n                    style={{ height: '64px', width: '100%' }}\r\n                    onClick={this._onClickLogout}\r\n                  />\r\n                </Tooltip>\r\n              </Col>\r\n            </Row>\r\n          </Header>\r\n          <Content style={{ margin: '0 16px' }}>\r\n            <Route path={Links.SERVICES} component={ServicesContainer} />\r\n            <Route path={Links.USERS} component={UsersContainer} />\r\n            <Route path={Links.VEHICLES} component={VehiclesContainer} />\r\n            <Route path={Links.PERSONAL_AREA} component={PersonalAreaContainer} />\r\n          </Content>\r\n          <Footer style={{ textAlign: 'center' }} />\r\n        </Layout>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: any, ownProps: any) => {\r\n  return {\r\n    user: state.appData.user,\r\n    committee: state.appData.committee\r\n  };\r\n};\r\nconst DashboardContainer = connect(mapStateToProps, { resetAuthData })(\r\n  Dashboard\r\n);\r\nexport default DashboardContainer;\r\n","import React from 'react';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport { Links } from './utils/Links';\r\nimport LoginContainer from './components/Login';\r\nimport DashboardContainer from './components/Dashboard';\r\n\r\nclass App extends React.Component {\r\n  public render() {\r\n    return (\r\n      <Router>\r\n        <Switch>\r\n          <Route exact={true} path={Links.LOGIN} component={LoginContainer} />\r\n          <Route component={DashboardContainer} />\r\n        </Switch>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport 'antd/dist/antd.css';\nimport { createStore } from 'redux';\nimport AppReducers from './reducers/reducers';\nimport { Provider } from 'react-redux';\nimport App from './App';\n\nexport function configureStore() {\n  const store = createStore(AppReducers);\n  return store;\n}\n\nReactDOM.render(\n  <Provider store={configureStore()}>\n    <App />\n  </Provider>,\n  document.getElementById('root') as HTMLElement\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}