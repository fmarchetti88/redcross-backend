{"version":3,"sources":["serviceWorker.ts","actions/action.tsx","components/Services.tsx","utils/Connector.tsx","reducers/reducers.tsx","utils/Links.tsx","components/Login.tsx","utils/Constants.tsx","components/base/PlusFabButton.tsx","dto/UserDTO.tsx","components/forms/UserForm.tsx","components/Users.tsx","dto/VehicleDTO.tsx","components/forms/VehicleForm.tsx","components/Vehicles.tsx","dto/TripDTO.tsx","dto/TripUsersDTO.tsx","components/forms/TripForm.tsx","components/base/RoleChoose.tsx","components/forms/DuplicateTripForm.tsx","components/PersonalArea.tsx","components/Dashboard.tsx","App.tsx","index.tsx"],"names":["Boolean","window","location","hostname","match","ReduxActionTypes","setUsersData","users","type","SET_USERS_DATA","data","setUserData","user","committeeId","SET_USER_DATA","ViewModeType","Connector","accessToken","axiosInstance","headers","this","axios","create","baseURL","undefined","call","operation","vehicle","id","body","JSON","stringify","tripId","tripUserId","userId","trip","tripUser","committeeUserId","committeeUserInfo","publishUser","userResponse","status","console","log","Error","publishedUser","committeeUser","role","occupation","disabled","bodyCommUser","operationCommUser","username","password","tempInstance","url","method","hash","btoa","Authorization","stateDefault","committee","connector","showLoading","AppReducers","combineReducers","appData","state","action","SET_ACCESS_TOKEN","normalizedUser","committee_users","find","committee_user","newState","SET_COMMITTEE_DATA","SET_SHOW_LOADING","RESET_AUTH_DATA","normalizedUsers","map","userToNormalize","Links","Option","Select","LoginForm","committees","loading","handleSelectChange","value","props","form","setFieldsValue","buildCommitteesSelect","length","getFieldDecorator","Item","rules","required","message","onChange","key","description","login","getUser","then","res","founded","element","setCommitteeData","getUsers","uRes","success","history","push","catch","uErr","error","err","handleSubmit","e","preventDefault","validateFields","values","setState","signin","setAccessToken","errorMessage","response","getCommittees","visible","closable","confirmLoading","footer","style","textAlign","gutter","span","alt","src","width","onSubmit","className","prefix","color","placeholder","htmlType","React","WrappeLoginForm","Form","name","LoginContainer","connect","ownProps","PlusFabButton","mainButtonStyles","backgroundColor","alwaysShowTitle","event","icon","position","bottom","right","onClick","UserRoleType","0","1","2","UserOccupationType","3","UserGenderType","User","getInitialValueBirthDate","birth_date","moment","userToSave","format","onSave","onCancel","personalArea","layout","label","initialValue","Password","surname","gender","email","visibility","withDrivingLicense","valuePropName","flgPasswordChanged","borderTop","padding","background","marginRight","UserContainer","UserForm","Users","columns","title","dataIndex","render","record","text","size","_onEditRow","placement","onConfirm","_onDeleteUser","okText","cancelText","marginLeft","emptyUser","superuser","showForm","loadData","_onClose","selectedUser","getUserTrips","deleteCommitteesUsers","deleteUser","_onSave","warn","publishUserCommittee","_onCreate","getDataSource","filter","pagination","pageSize","dataSource","onClose","bodyStyle","paddingBottom","loggedUserId","UsersContainer","VehicleType","Vehicle","vehicleToSave","nextProps","plate","sign","TextArea","rows","VehicleContainer","VehicleForm","Vehicles","_onEditVehicle","_onDeleteVehicle","emptyVehicle","selectedVehicle","vehicles","getVehicles","deleteVehicle","publishVehicle","VehiclesContainer","ServiceTargetRoleType","ServiceTargetLocationType","FlgArType","ServiceRoleType","Trip","dateForHour","Date","hour","Number","substring","formValues","tripDate","date","tripHour","tripToSave","vehicleId","Group","marginTop","min","max","TripContainer","TripForm","RoleChoose","userSelected","isUserAdmin","loggedUser","roleSelected","_onChangeRole","target","_onChangeUser","defaultValue","buttonStyle","Button","onConfirmRole","DuplicateTrip","onDeleteDate","k","keys","getFieldValue","duplicateElements","index","onAddDate","nextKeys","concat","getInitialDateValue","tripToDuplicate","add","getInitialHourValue","myFormItems","DuplicateTripContainer","DuplicateTripForm","WeekDays","Months","today","Services","selectedDate","firstDayOfView","viewMode","week","trips","showDuplicateTripForm","selectedTrip","rolesVisible","getEmptyTrip","flgDestination","flgAr","siteDeparture","siteArrival","serviceType","patientData","extraUsers","flgNurse","flgToNotify","notes","trip_users","getTrips","vRes","vErr","_onChangeView","_onClickDayOfWeek","renderDayOfWeek","isSelected","getDate","getMonth","getFullYear","isOld","getTime","isToday","renderCardHeaderDate","cursor","borderRadius","height","border","renderCardBodyWeekDay","renderDays","numRows","rowIndex","days","renderDaysOfWeek","row","justify","margin","_onMoveViewLeft","_onMoveViewRight","startDate","elements","result","_onDeleteTrip","deleteTripUsersByTrip","deleteTrip","tRes","tErr","_onEditTrip","_onDuplicateTrip","setHours","sort","trip1","trip2","hour1Replaced","split","join","hour2Replaced","handleRoleVisibleChange","uniqueIndex","roleVisible","newArray","_onDeleteTripUser","deleteTripUsers","renderTooltipUserAvatar","trip_user","renderTimeline","todayTrips","maximumUsers","reduce","p","v","sharedSpan","Math","floor","totalUsers","popoverVisible","zIndex","count","shape","fontSize","content","renderRoleChoose","trigger","onVisibleChange","substr","_onConfirmRole","tripToPublish","newRolesVisible","publishTripUser","_onCloseTripForm","_onCloseDuplicateTripForm","_onConfirmDuplicateTrip","newDates","a","withError","newDate","newTrip","publishTrip","newFirstDayOfView","dayOfMonth","month","weekDay","getDay","Component","ServicesContainer","PersonalArea","_onCancel","goBack","userToPublish","PersonalAreaContainer","Header","Layout","Content","Footer","Sider","Dashboard","collapsed","_onCollapse","_onClickLogout","resetAuthData","_onLogout","replace","minHeight","collapsible","onCollapse","theme","defaultSelectedKeys","mode","maxHeight","fontStyle","ghost","path","component","DashboardContainer","App","exact","configureStore","createStore","ReactDOM","store","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.6b99d21b.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import CommitteeDTO from '../dto/CommitteeDTO';\r\nimport UserDTO from '../dto/UserDTO';\r\n\r\nexport enum ReduxActionTypes {\r\n  SET_SHOW_LOADING = 'SET_SHOW_LOADING',\r\n  SET_USER_DATA = 'SET_USER_DATA',\r\n  SET_ACCESS_TOKEN = 'SET_ACCESS_TOKEN',\r\n  SET_COMMITTEE_DATA = 'SET_COMMITTEE_DATA',\r\n  RESET_AUTH_DATA = 'RESET_AUTH_DATA',\r\n  SET_USERS_DATA = 'SET_USERS_DATA'\r\n}\r\n\r\nexport interface IReduxBaseAction {\r\n  type: ReduxActionTypes;\r\n}\r\n\r\nexport interface IReduxSetUserData extends IReduxBaseAction {\r\n  type: ReduxActionTypes.SET_USER_DATA;\r\n  data: {\r\n    user: UserDTO;\r\n    committeeId: number;\r\n  };\r\n}\r\n\r\nexport interface IReduxSetAccessToken extends IReduxBaseAction {\r\n  type: ReduxActionTypes.SET_ACCESS_TOKEN;\r\n  data: {\r\n    accessToken: string;\r\n  };\r\n}\r\n\r\nexport interface IReduxSetCommitteeData extends IReduxBaseAction {\r\n  type: ReduxActionTypes.SET_COMMITTEE_DATA;\r\n  data: {\r\n    committee: CommitteeDTO;\r\n  };\r\n}\r\n\r\nexport interface IReduxSetUsersData extends IReduxBaseAction {\r\n  type: ReduxActionTypes.SET_USERS_DATA;\r\n  data: {\r\n    users: UserDTO[];\r\n  };\r\n}\r\n\r\nexport interface IReduxSetShowLoading extends IReduxBaseAction {\r\n  type: ReduxActionTypes.SET_SHOW_LOADING;\r\n  data: boolean;\r\n}\r\n\r\nexport interface IReduxResetAuthData extends IReduxBaseAction {\r\n  type: ReduxActionTypes.RESET_AUTH_DATA;\r\n}\r\n\r\nexport type TReducerActions =\r\n  | IReduxSetUserData\r\n  | IReduxSetAccessToken\r\n  | IReduxSetCommitteeData\r\n  | IReduxSetShowLoading\r\n  | IReduxResetAuthData\r\n  | IReduxSetUsersData;\r\n\r\nexport interface ISetUsersDataProps {\r\n  setUsersData(users: UserDTO[]): IReduxSetUsersData;\r\n}\r\n\r\nexport interface ISetUserDataProps {\r\n  setUserData(user: UserDTO, committeeId: number): IReduxSetUserData;\r\n}\r\n\r\nexport interface ISetAccessTokenProps {\r\n  setAccessToken(accessToken: string): IReduxSetAccessToken;\r\n}\r\n\r\nexport interface ISetCommitteeDataProps {\r\n  setCommitteeData(committee: CommitteeDTO): IReduxSetCommitteeData;\r\n}\r\n\r\nexport interface IResetAuthDataProps {\r\n  resetAuthData(): IReduxResetAuthData;\r\n}\r\n\r\nexport function setUsersData(users: UserDTO[]): IReduxSetUsersData {\r\n  return {\r\n    type: ReduxActionTypes.SET_USERS_DATA,\r\n    data: {\r\n      users\r\n    }\r\n  };\r\n}\r\n\r\nexport function setUserData(user: UserDTO, committeeId: number): IReduxSetUserData {\r\n  return {\r\n    type: ReduxActionTypes.SET_USER_DATA,\r\n    data: {\r\n      user,\r\n      committeeId\r\n    }\r\n  };\r\n}\r\n\r\nexport function setAccessToken(accessToken: string): IReduxSetAccessToken {\r\n  return {\r\n    type: ReduxActionTypes.SET_ACCESS_TOKEN,\r\n    data: {\r\n      accessToken\r\n    }\r\n  };\r\n}\r\n\r\nexport function setCommitteeData(committee: CommitteeDTO): IReduxSetCommitteeData {\r\n  return {\r\n    type: ReduxActionTypes.SET_COMMITTEE_DATA,\r\n    data: {\r\n      committee\r\n    }\r\n  };\r\n}\r\n\r\nexport function resetAuthData(): IReduxResetAuthData {\r\n  return {\r\n    type: ReduxActionTypes.RESET_AUTH_DATA\r\n  };\r\n}\r\n","import React from 'react';\r\nimport { Row, Button, Col, Card, Radio, message, Timeline, Tag, Popconfirm, Avatar, Empty, Tooltip, Badge, Popover } from 'antd';\r\nimport { add, format } from 'date-fns';\r\nimport TripDTO, { ServiceTargetRoleType, ServiceTargetLocationType, FlgArType } from '../dto/TripDTO';\r\nimport { connect } from 'react-redux';\r\nimport { IWithUser, IWIthConnector, IWithCommittee, IWithUsers } from '../reducers/reducers';\r\nimport VehicleDTO, { VehicleType } from '../dto/VehicleDTO';\r\nimport TripUsersDTO, { ServiceRoleType } from '../dto/TripUsersDTO';\r\nimport UserDTO from '../dto/UserDTO';\r\nimport PlusFabButton from './base/PlusFabButton';\r\nimport TripForm from './forms/TripForm';\r\nimport RoleChoose from './base/RoleChoose';\r\nimport DuplicateTripForm, { IDuplicateTripItem } from './forms/DuplicateTripForm';\r\n\r\ninterface IServicesState {\r\n  loading: boolean;\r\n  selectedDate: Date;\r\n  firstDayOfView: Date;\r\n  viewMode: ViewModeType;\r\n  trips: TripDTO[];\r\n  vehicles: VehicleDTO[];\r\n  showForm: boolean;\r\n  showDuplicateTripForm: boolean;\r\n  selectedTrip: TripDTO | undefined;\r\n  rolesVisible: Array<boolean>;\r\n}\r\n\r\nenum ViewModeType {\r\n  week,\r\n  month\r\n}\r\n\r\nconst WeekDays: Array<string> = ['Domenica', 'Lunedì', 'Martedì', 'Mercoledì', 'Giovedì', 'Venerdì', 'Sabato'];\r\n\r\nconst Months: Array<string> = [\r\n  'Gennaio',\r\n  'Febbraio',\r\n  'Marzo',\r\n  'Aprile',\r\n  'Maggio',\r\n  'Giugno',\r\n  'Luglio',\r\n  'Agosto',\r\n  'Settembre',\r\n  'Ottobre',\r\n  'Novembre',\r\n  'Dicembre'\r\n];\r\n\r\nconst today = new Date();\r\n\r\nclass Services extends React.Component<IWithUser & IWIthConnector & IWithCommittee & IWithUsers, IServicesState> {\r\n  state = {\r\n    loading: false,\r\n    selectedDate: today,\r\n    firstDayOfView: today,\r\n    viewMode: ViewModeType.week,\r\n    trips: [],\r\n    vehicles: [],\r\n    showForm: false,\r\n    showDuplicateTripForm: false,\r\n    selectedTrip: undefined,\r\n    rolesVisible: []\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.loadData();\r\n  }\r\n\r\n  private getEmptyTrip = (): TripDTO => {\r\n    const { vehicles } = this.state;\r\n    const emptyTrip: TripDTO = {\r\n      id: 0,\r\n      date: format(this.state.selectedDate, 'yyyy-MM-dd'),\r\n      hour: '12:00:00',\r\n      flgDestination: 0,\r\n      flgAr: 0,\r\n      siteDeparture: '',\r\n      siteArrival: '',\r\n      serviceType: '',\r\n      patientData: undefined,\r\n      type: 2,\r\n      extraUsers: 1,\r\n      flgNurse: 0,\r\n      flgToNotify: 0,\r\n      notes: undefined,\r\n      committeeId: this.props.committee?.id || 0,\r\n      vehicleId: vehicles.length !== 0 ? (vehicles[0] as any).id : 0,\r\n      committee: undefined as any,\r\n      vehicle: undefined as any,\r\n      trip_users: []\r\n    };\r\n    return emptyTrip;\r\n  };\r\n\r\n  private loadData = () => {\r\n    const { committee } = this.props;\r\n    if (committee !== undefined) {\r\n      const committeeId: number = committee.id;\r\n      this.props.connector\r\n        .getTrips(committeeId)\r\n        .then((res) => {\r\n          this.setState({\r\n            trips: res.data\r\n          });\r\n          this.props.connector\r\n            .getVehicles(committeeId)\r\n            .then((vRes) => {\r\n              this.setState({\r\n                vehicles: vRes.data,\r\n                loading: false\r\n              });\r\n            })\r\n            .catch((vErr) => {\r\n              this.setState({ vehicles: [], loading: false });\r\n              console.error(vErr);\r\n            });\r\n        })\r\n        .catch((err) => {\r\n          this.setState({ trips: [], loading: false });\r\n          console.error(err);\r\n        });\r\n    }\r\n  };\r\n\r\n  private _onChangeView = (e: any) => {\r\n    const viewMode: any = e.target.value;\r\n    this.setState({ viewMode });\r\n  };\r\n\r\n  private _onClickDayOfWeek = (date: Date) => {\r\n    console.log(date);\r\n    this.setState({ selectedDate: date });\r\n  };\r\n\r\n  private renderCardHeaderDate(date: Date) {\r\n    const dayOfMonth: number = date.getDate();\r\n    const month: string = Months[date.getMonth()];\r\n    return (\r\n      <Row>\r\n        <Col style={{ textAlign: 'left' }} span={24}>\r\n          {dayOfMonth} {month.substring(0, 3)}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  }\r\n\r\n  private renderCardBodyWeekDay(date: Date) {\r\n    const weekDay: string = WeekDays[date.getDay()];\r\n    const todayTrips: TripDTO[] = this.getTrips(date);\r\n    return (\r\n      <Row>\r\n        <Col style={{ textAlign: 'left' }} span={24}>\r\n          <b>{weekDay}</b>\r\n          {todayTrips.length !== 0 ? <Badge count={todayTrips.length} style={{ backgroundColor: '#87D068', marginLeft: '3px' }} /> : undefined}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  }\r\n\r\n  private renderDayOfWeek = (date: Date) => {\r\n    const { selectedDate } = this.state;\r\n    const isSelected =\r\n      date.getDate() === selectedDate.getDate() && date.getMonth() === selectedDate.getMonth() && date.getFullYear() === selectedDate.getFullYear();\r\n    const isOld = date.getTime() < today.getTime();\r\n    const isToday = date.getTime() === today.getTime();\r\n    return (\r\n      <Col key={date.getTime()} span={3}>\r\n        <Card\r\n          onClick={() => this._onClickDayOfWeek(date)}\r\n          size=\"small\"\r\n          title={this.renderCardHeaderDate(date)}\r\n          className=\"current-day\"\r\n          style={{\r\n            cursor: 'pointer',\r\n            borderRadius: '10px',\r\n            height: '90px',\r\n            border: `2px solid ${isSelected ? '#1890ff' : '#e8e8e8'}`,\r\n            backgroundColor: `${isToday ? '#e6f7ff' : isOld ? '#f2f4f5' : 'white'}`\r\n          }}\r\n        >\r\n          {this.renderCardBodyWeekDay(date)}\r\n        </Card>\r\n      </Col>\r\n    );\r\n  };\r\n\r\n  private renderDays = () => {\r\n    const { viewMode, firstDayOfView } = this.state;\r\n    const numRows: number = viewMode === ViewModeType.week ? 1 : 4;\r\n    const rows = [];\r\n\r\n    for (let rowIndex = 0; rowIndex < numRows; rowIndex++) {\r\n      const days = this.renderDaysOfWeek(firstDayOfView, rowIndex);\r\n      const row = (\r\n        <Row justify=\"center\" key={rowIndex} type=\"flex\">\r\n          <Col span={1} style={{ textAlign: 'center' }}>\r\n            {rowIndex === 0 ? <Button icon=\"left\" style={{ margin: 5 }} onClick={this._onMoveViewLeft} /> : undefined}\r\n          </Col>\r\n          {days}\r\n          <Col span={1} style={{ textAlign: 'center' }}>\r\n            {rowIndex === 0 ? <Button icon=\"right\" style={{ margin: 5 }} onClick={this._onMoveViewRight} /> : undefined}\r\n          </Col>\r\n        </Row>\r\n      );\r\n      rows.push(row);\r\n    }\r\n\r\n    return rows;\r\n  };\r\n\r\n  private renderDaysOfWeek = (startDate: Date, rowIndex: number) => {\r\n    const elements: any = [];\r\n    for (let index = 0; index < 7; index++) {\r\n      var result = add(startDate, {\r\n        days: index + rowIndex * 7\r\n      });\r\n      elements.push(this.renderDayOfWeek(result));\r\n    }\r\n    return elements;\r\n  };\r\n\r\n  private _onDeleteTrip = (tripId: number) => {\r\n    this.props.connector\r\n      .deleteTripUsersByTrip(tripId)\r\n      .then((res) => {\r\n        this.props.connector\r\n          .deleteTrip(tripId)\r\n          .then((tRes) => {\r\n            this.loadData();\r\n          })\r\n          .catch((tErr) => {\r\n            console.log(`_onDeleteTrip error: ${tErr}`);\r\n            message.error(`Si è verificato un errore durante l'eliminazione`);\r\n            this.loadData();\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        console.log(`_onDeleteTrip error: ${err}`);\r\n        message.error(`Si è verificato un errore durante l'eliminazione`);\r\n      });\r\n  };\r\n\r\n  private _onEditTrip = (trip: TripDTO) => {\r\n    this.setState({ selectedTrip: trip, showForm: true });\r\n  };\r\n\r\n  private _onDuplicateTrip = (trip: TripDTO) => {\r\n    this.setState({ selectedTrip: trip, showDuplicateTripForm: true });\r\n  };\r\n\r\n  private getTrips = (date: Date): TripDTO[] => {\r\n    const { trips } = this.state;\r\n    const { user } = this.props;\r\n    const tripsOfDate: TripDTO[] = trips\r\n      .filter((trip: TripDTO) => {\r\n        return new Date(trip.date).setHours(0, 0, 0, 0) === date.setHours(0, 0, 0, 0);\r\n      })\r\n      .filter((trip: TripDTO) => {\r\n        if (user !== undefined && user.committeeUser !== undefined) {\r\n          const occupation = user.committeeUser.occupation;\r\n          if (occupation === 0) {\r\n            // Se è dipendente, vede tutti i servizi\r\n            return true;\r\n          }\r\n          // Volontario o altro, vede i servizi non destinati ai dipendenti\r\n          return trip.type > 0;\r\n        }\r\n        return false;\r\n      })\r\n      .sort((trip1: TripDTO, trip2: TripDTO) => {\r\n        const hour1Replaced = trip1.hour.split(':').join('');\r\n        const hour2Replaced = trip2.hour.split(':').join('');\r\n        return Number(hour1Replaced) - Number(hour2Replaced);\r\n      });\r\n    return tripsOfDate;\r\n  };\r\n\r\n  private handleRoleVisibleChange = (uniqueIndex: number, roleVisible: boolean) => {\r\n    const newArray: Array<boolean> = [...this.state.rolesVisible];\r\n    newArray[uniqueIndex] = roleVisible;\r\n    this.setState({ rolesVisible: newArray });\r\n  };\r\n\r\n  private _onDeleteTripUser = (tripUserId: number) => {\r\n    this.props.connector\r\n      .deleteTripUsers(tripUserId)\r\n      .then((res) => {\r\n        this.loadData();\r\n      })\r\n      .catch((err) => {\r\n        console.error(`_onDeleteTripUser: ${err}`);\r\n        message.error(`Si è verificato un errore nell'eliminazione`);\r\n      });\r\n  };\r\n\r\n  get isUserAdmin(): boolean {\r\n    const { user } = this.props;\r\n    if (user !== undefined && user.committeeUser !== undefined) {\r\n      return user?.committeeUser.role < 2;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private renderTooltipUserAvatar = (trip_user: TripUsersDTO) => {\r\n    const { user } = this.props;\r\n    const role: string = ServiceRoleType[trip_user.role];\r\n    return (\r\n      <p>\r\n        {role}\r\n        {this.isUserAdmin || (user?.id || 0) === trip_user.userId ? (\r\n          <Tooltip title=\"Elimina\">\r\n            <Button onClick={() => this._onDeleteTripUser(trip_user.id)} style={{ marginLeft: '5px' }} icon=\"delete\" type=\"danger\" />\r\n          </Tooltip>\r\n        ) : undefined}\r\n      </p>\r\n    );\r\n  };\r\n\r\n  private renderTimeline = () => {\r\n    const { selectedDate, rolesVisible } = this.state;\r\n    const todayTrips: TripDTO[] = this.getTrips(selectedDate);\r\n    if (todayTrips.length === 0) {\r\n      return <Empty />;\r\n    }\r\n    const tripWithMoreUsers: TripDTO = todayTrips.reduce((p: TripDTO, v: TripDTO) => {\r\n      return p.extraUsers > v.extraUsers ? p : v;\r\n    });\r\n    const maximumUsers: number = tripWithMoreUsers.extraUsers + 1;\r\n    const sharedSpan: number = Math.floor(24 / maximumUsers);\r\n    return (\r\n      <Timeline>\r\n        {todayTrips.map((trip: TripDTO, index: number) => {\r\n          const trip_users: TripUsersDTO[] = trip.trip_users || [];\r\n          const totalUsers = trip.extraUsers + 1;\r\n          let users: any[] = [];\r\n          for (let index = 0; index < totalUsers; index++) {\r\n            const trip_user: TripUsersDTO = trip_users[index];\r\n            const uniqueIndex: number = Number(`${trip.id}${index}`);\r\n            const popoverVisible: boolean = rolesVisible[uniqueIndex];\r\n            if (trip_user) {\r\n              const user: UserDTO | undefined = trip_user.user;\r\n              users.push(\r\n                <Col span={sharedSpan} key={index} style={{ textAlign: 'center' }}>\r\n                  <Tooltip title={this.renderTooltipUserAvatar(trip_user)}>\r\n                    <Badge style={{ zIndex: 1 }} count={<b>{ServiceRoleType[trip_user.role].substring(0, 1)}</b>}>\r\n                      <Avatar style={{ backgroundColor: '#87d068' }} shape=\"square\" icon=\"user\" />\r\n                    </Badge>\r\n                    <p>\r\n                      <span style={{ fontSize: '10px' }}>\r\n                        {user?.name} {user?.surname}\r\n                      </span>\r\n                    </p>\r\n                  </Tooltip>\r\n                </Col>\r\n              );\r\n              continue;\r\n            }\r\n            users.push(\r\n              <Col span={sharedSpan} key={index} style={{ textAlign: 'center' }}>\r\n                <Popover\r\n                  content={this.renderRoleChoose(trip)}\r\n                  trigger=\"click\"\r\n                  visible={popoverVisible}\r\n                  onVisibleChange={(visible: boolean) => this.handleRoleVisibleChange(uniqueIndex, visible)}\r\n                >\r\n                  <Button type=\"dashed\" icon=\"user\" />\r\n                </Popover>\r\n              </Col>\r\n            );\r\n          }\r\n          return (\r\n            <Timeline.Item key={index}>\r\n              <Row>\r\n                <Col span={8}>\r\n                  <Row>\r\n                    <b>Ora:</b> {trip.hour.substr(0, 5)}\r\n                    <Tag style={{ marginLeft: '5px' }} color=\"green\">\r\n                      {ServiceTargetLocationType[trip.flgDestination]}\r\n                    </Tag>\r\n                  </Row>\r\n                  <Row>\r\n                    <b>Partenza: </b>\r\n                    {trip.siteDeparture}\r\n                  </Row>\r\n                  <Row>\r\n                    <b>Arrivo: </b> {trip.siteArrival}\r\n                  </Row>\r\n                  <Row>\r\n                    <b>Veicolo: </b> {VehicleType[trip.vehicle.type]} - {trip.vehicle.sign} - {trip.vehicle.description}\r\n                  </Row>\r\n                </Col>\r\n                <Col span={4}>\r\n                  <Row>\r\n                    <Tag>{FlgArType[trip.flgAr]}</Tag>\r\n                  </Row>\r\n                  <Row>\r\n                    <Tag color=\"cyan\">{ServiceTargetRoleType[trip.type]}</Tag>\r\n                  </Row>\r\n                  <Row>{trip.flgNurse === 1 ? <Tag color=\"blue\">Con infermiere</Tag> : undefined}</Row>\r\n                </Col>\r\n                <Col span={5}>\r\n                  <Row>\r\n                    <b>Paziente: </b>\r\n                    {trip.patientData || '-'}\r\n                  </Row>\r\n                  <Row>\r\n                    <b>Servizio: </b>\r\n                    {trip.serviceType || '-'}\r\n                  </Row>\r\n                  <Row>{trip.notes}</Row>\r\n                </Col>\r\n                <Col span={this.isUserAdmin ? 5 : 7}>\r\n                  <Row>{users}</Row>\r\n                </Col>\r\n                {this.isUserAdmin ? (\r\n                  <Col\r\n                    span={2}\r\n                    style={{\r\n                      textAlign: 'center',\r\n                      padding: '10px'\r\n                    }}\r\n                  >\r\n                    <Tooltip title=\"Modifica\">\r\n                      <Button size=\"small\" icon=\"edit\" onClick={() => this._onEditTrip(trip)} />\r\n                    </Tooltip>\r\n                    <Tooltip title=\"Duplica\">\r\n                      <Button icon=\"copy\" size=\"small\" style={{ marginLeft: '1px' }} onClick={() => this._onDuplicateTrip(trip)} />\r\n                    </Tooltip>\r\n                    <Popconfirm\r\n                      placement=\"topLeft\"\r\n                      title={\"Confermare l'eliminazione del servizio?\"}\r\n                      onConfirm={() => this._onDeleteTrip(trip.id)}\r\n                      okText=\"Si\"\r\n                      cancelText=\"No\"\r\n                    >\r\n                      <Button size=\"small\" style={{ marginLeft: '1px' }} icon=\"delete\" type=\"danger\" />\r\n                    </Popconfirm>\r\n                  </Col>\r\n                ) : undefined}\r\n              </Row>\r\n            </Timeline.Item>\r\n          );\r\n        })}\r\n      </Timeline>\r\n    );\r\n  };\r\n\r\n  private _onConfirmRole = (role: number, trip: TripDTO, userId: number) => {\r\n    const tripToPublish: TripUsersDTO = {\r\n      id: 0,\r\n      tripId: trip.id,\r\n      userId,\r\n      role\r\n    };\r\n    const { rolesVisible } = this.state;\r\n    const newRolesVisible = rolesVisible.map((element: boolean) => false);\r\n    this.props.connector\r\n      .publishTripUser(tripToPublish)\r\n      .then((res) => {\r\n        message.success('Salvataggio completato');\r\n        this.setState({ rolesVisible: newRolesVisible }, () => {\r\n          this.loadData();\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        message.error('Si è verificato un errore nel salvataggio');\r\n      });\r\n  };\r\n\r\n  private renderRoleChoose = (trip: TripDTO) => {\r\n    const { users } = this.props;\r\n    return (\r\n      <RoleChoose\r\n        users={users.filter((user: UserDTO) => !!!user.committeeUser.disabled)}\r\n        isUserAdmin={this.isUserAdmin}\r\n        loggedUser={this.props.user as UserDTO}\r\n        onConfirmRole={(role: number, userId: number) => this._onConfirmRole(role, trip, userId)}\r\n      />\r\n    );\r\n  };\r\n\r\n  private _onCreate = () => {\r\n    this.setState({ selectedTrip: this.getEmptyTrip(), showForm: true });\r\n  };\r\n\r\n  private _onCloseTripForm = () => {\r\n    this.setState({ showForm: false, selectedTrip: undefined });\r\n  };\r\n\r\n  private _onCloseDuplicateTripForm = () => {\r\n    this.setState({ showDuplicateTripForm: false, selectedTrip: undefined });\r\n  };\r\n\r\n  private _onConfirmDuplicateTrip = async (trip: TripDTO, newDates: IDuplicateTripItem[]) => {\r\n    let withError: boolean = false;\r\n    for (let index = 0; index < newDates.length; index++) {\r\n      const newDate: IDuplicateTripItem = newDates[index];\r\n      const date: string = newDate.date.format('YYYY-MM-DD');\r\n      const hour: string = newDate.hour.format('HH:mm');\r\n      const newTrip: TripDTO = {\r\n        ...trip,\r\n        id: 0,\r\n        date,\r\n        hour\r\n      };\r\n\r\n      await this.props.connector\r\n        .publishTrip(newTrip)\r\n        .then((res) => {\r\n          console.log('_onConfirmDuplicateTrip done');\r\n        })\r\n        // eslint-disable-next-line\r\n        .catch((err) => {\r\n          withError = true;\r\n          console.error(`_onConfirmDuplicateTrip error for trip with date ${date} and hour ${hour}. Error: ${err}`);\r\n        });\r\n    }\r\n    this.setState({ showDuplicateTripForm: false, selectedTrip: undefined }, () => {\r\n      if (withError) {\r\n        message.error(`Si sono verificati degli errori durante l'operazione`);\r\n      } else {\r\n        message.success('Operazione completata con successo');\r\n      }\r\n      this.loadData();\r\n    });\r\n  };\r\n\r\n  private _onSave = (trip: TripDTO) => {\r\n    this.props.connector\r\n      .publishTrip(trip)\r\n      .then((res) => {\r\n        message.success('Salvataggio completato');\r\n        this.setState({ showForm: false, selectedTrip: undefined }, () => {\r\n          this.loadData();\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        message.error('Si è verificato un errore nel salvataggio');\r\n      });\r\n  };\r\n\r\n  private _onMoveViewRight = () => {\r\n    const { viewMode, firstDayOfView } = this.state;\r\n    var newFirstDayOfView = add(firstDayOfView, {\r\n      days: viewMode === ViewModeType.week ? 7 : 28\r\n    });\r\n    this.setState({\r\n      firstDayOfView: newFirstDayOfView,\r\n      selectedDate: newFirstDayOfView\r\n    });\r\n  };\r\n\r\n  private _onMoveViewLeft = () => {\r\n    const { viewMode, firstDayOfView } = this.state;\r\n    var newFirstDayOfView = add(firstDayOfView, {\r\n      days: viewMode === ViewModeType.week ? -7 : -28\r\n    });\r\n    this.setState({\r\n      firstDayOfView: newFirstDayOfView,\r\n      selectedDate: newFirstDayOfView\r\n    });\r\n  };\r\n\r\n  public render() {\r\n    const { selectedTrip, showForm, showDuplicateTripForm, vehicles } = this.state;\r\n    const { user } = this.props;\r\n    return (\r\n      <div>\r\n        <div style={{ textAlign: 'end', margin: 10 }}>\r\n          Visualizzazione:\r\n          <Radio.Group defaultValue={this.state.viewMode} size=\"default\" onChange={this._onChangeView} style={{ marginLeft: 5 }}>\r\n            <Radio.Button value={ViewModeType.week}>Settimana</Radio.Button>\r\n            <Radio.Button value={ViewModeType.month}>Mese</Radio.Button>\r\n          </Radio.Group>\r\n        </div>\r\n        <div>\r\n          <div>{this.renderDays()}</div>\r\n          <Card style={{ width: '100%', height: '100%', borderRadius: '10px' }}>{this.renderTimeline()}</Card>\r\n        </div>\r\n        <TripForm\r\n          visible={showForm}\r\n          trip={selectedTrip}\r\n          vehicles={vehicles.filter((vehicle: VehicleDTO) => !!!vehicle.disabled)}\r\n          onClose={this._onCloseTripForm}\r\n          onSave={this._onSave}\r\n        />\r\n        <DuplicateTripForm\r\n          visible={showDuplicateTripForm}\r\n          trip={selectedTrip}\r\n          onClose={this._onCloseDuplicateTripForm}\r\n          onConfirm={this._onConfirmDuplicateTrip}\r\n        />\r\n        {showForm || showDuplicateTripForm || (user && user.committeeUser.role > 1) ? undefined : <PlusFabButton onClick={this._onCreate} />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: any, ownProps: any) => {\r\n  return {\r\n    user: state.appData.user,\r\n    connector: state.appData.connector,\r\n    committee: state.appData.committee,\r\n    users: state.appData.users\r\n  };\r\n};\r\nconst ServicesContainer = connect(mapStateToProps)(Services);\r\nexport default ServicesContainer;\r\n","import axios, { AxiosInstance } from 'axios';\r\nimport VehicleDTO from '../dto/VehicleDTO';\r\nimport UserDTO from '../dto/UserDTO';\r\nimport CommitteeUserDTO from '../dto/CommitteeUserDTO';\r\nimport TripDTO from '../dto/TripDTO';\r\nimport TripUsersDTO from '../dto/TripUsersDTO';\r\n\r\nexport class Connector {\r\n  private axiosInstance: AxiosInstance;\r\n\r\n  constructor(accessToken: string) {\r\n    const headers = {\r\n      'x-access-token': accessToken,\r\n      'Content-Type': 'application/json'\r\n    };\r\n\r\n    let baseURL: string | undefined = undefined;\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\r\n      baseURL = 'http://localhost:3001';\r\n    }\r\n    this.axiosInstance = axios.create({\r\n      baseURL,\r\n      headers\r\n    });\r\n  }\r\n\r\n  public async getCommittees(): Promise<any> {\r\n    const operation = 'api/committees';\r\n    return await this.call(operation);\r\n  }\r\n\r\n  public async getVehicles(committeeId: number): Promise<any> {\r\n    const operation = `api/vehicles/findByCommittee/${committeeId}`;\r\n    return await this.call(operation);\r\n  }\r\n\r\n  public async publishVehicle(vehicle: VehicleDTO): Promise<any> {\r\n    const { id } = vehicle;\r\n    const operation = `api/vehicles/${id > 0 ? id : ''}`;\r\n    const body = JSON.stringify(vehicle);\r\n    return await this.call(operation, body, id > 0 ? 'PUT' : 'POST');\r\n  }\r\n\r\n  public async deleteVehicle(vehicle: VehicleDTO): Promise<any> {\r\n    const { id } = vehicle;\r\n    const operation = `api/vehicles/${id}`;\r\n    return await this.call(operation, undefined, 'DELETE');\r\n  }\r\n\r\n  public async deleteTripUsersByTrip(tripId: number): Promise<any> {\r\n    const operation = `api/trips_users/deleteByTrip/${tripId}`;\r\n    return await this.call(operation, undefined, 'DELETE');\r\n  }\r\n\r\n  public async deleteTripUsers(tripUserId: number): Promise<any> {\r\n    const operation = `api/trips_users/${tripUserId}`;\r\n    return await this.call(operation, undefined, 'DELETE');\r\n  }\r\n\r\n  public async deleteCommitteesUsers(userId: number): Promise<any> {\r\n    const operation = `api/committees_users/deleteByUserId/${userId}`;\r\n    return await this.call(operation, undefined, 'DELETE');\r\n  }\r\n\r\n  public async getUserTrips(userId: number): Promise<any> {\r\n    const operation = `api/trips_users/findByUserId/${userId}`;\r\n    return await this.call(operation);\r\n  }\r\n\r\n  public async deleteTrip(tripId: number): Promise<any> {\r\n    const operation = `api/trips/${tripId}`;\r\n    return await this.call(operation, undefined, 'DELETE');\r\n  }\r\n\r\n  public async getTrips(committeeId: number): Promise<any> {\r\n    const operation = `api/trips/findByCommittee/${committeeId}`;\r\n    return await this.call(operation);\r\n  }\r\n\r\n  public async publishTrip(trip: TripDTO): Promise<any> {\r\n    const { id } = trip;\r\n    const operation = `api/trips/${id > 0 ? id : ''}`;\r\n    const body = JSON.stringify(trip);\r\n    return await this.call(operation, body, id > 0 ? 'PUT' : 'POST');\r\n  }\r\n\r\n  public async publishTripUser(tripUser: TripUsersDTO): Promise<any> {\r\n    const { id } = tripUser;\r\n    const operation = `api/trips_users/${id > 0 ? id : ''}`;\r\n    const body = JSON.stringify(tripUser);\r\n    return await this.call(operation, body, id > 0 ? 'PUT' : 'POST');\r\n  }\r\n\r\n  public async getUser(userId: number): Promise<any> {\r\n    const operation = `api/users/${userId}`;\r\n    return await this.call(operation);\r\n  }\r\n\r\n  public async getUsers(committeeId: number): Promise<any> {\r\n    const operation = `api/users/findByCommittee/${committeeId}`;\r\n    return await this.call(operation);\r\n  }\r\n\r\n  public async deleteUser(userId: number): Promise<any> {\r\n    const operation = `api/users/${userId}`;\r\n    return await this.call(operation, undefined, 'DELETE');\r\n  }\r\n\r\n  public async deleteCommitteeUser(committeeUserId: number): Promise<any> {\r\n    const operation = `api/committees_users/${committeeUserId}`;\r\n    return await this.call(operation, undefined, 'DELETE');\r\n  }\r\n\r\n  public async publishUser(user: UserDTO): Promise<any> {\r\n    const { id } = user;\r\n    const operation = `api/users/${id > 0 ? id : ''}`;\r\n    const body = JSON.stringify(user);\r\n    return this.call(operation, body, id > 0 ? 'PUT' : 'POST');\r\n  }\r\n\r\n  public async publishUserCommittee(user: UserDTO, committeeUserInfo: CommitteeUserDTO): Promise<any> {\r\n    const userResponse = await this.publishUser(user);\r\n    if (userResponse.status !== 200) {\r\n      console.log(userResponse);\r\n      throw new Error(`Si è verificato un errore nell'inserimento`);\r\n    }\r\n\r\n    const { id } = user;\r\n    const publishedUser: UserDTO = userResponse.data;\r\n    const committeeUser: CommitteeUserDTO = {\r\n      id: committeeUserInfo.id,\r\n      userId: id > 0 ? id : publishedUser.id,\r\n      committeeId: committeeUserInfo.committeeId,\r\n      role: committeeUserInfo.role,\r\n      occupation: committeeUserInfo.occupation,\r\n      disabled: committeeUserInfo.disabled\r\n    };\r\n    const bodyCommUser = JSON.stringify(committeeUser);\r\n    const operationCommUser = `api/committees_users/${committeeUserInfo.id > 0 ? committeeUserInfo.id : ''}`;\r\n    return await this.call(operationCommUser, bodyCommUser, committeeUserInfo.id > 0 ? 'PUT' : 'POST');\r\n  }\r\n\r\n  public async signin(username: string, password: string, committeeId: number): Promise<any> {\r\n    let baseURL: string | undefined = undefined;\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\r\n      baseURL = 'http://localhost:3001';\r\n    }\r\n    const tempInstance = axios.create({\r\n      baseURL\r\n    });\r\n    return tempInstance({\r\n      url: `api/auth/signin`,\r\n      method: 'POST',\r\n      data: {\r\n        username,\r\n        password,\r\n        committeeId\r\n      }\r\n    });\r\n  }\r\n\r\n  public async findUserByUsername(username: string, password: string): Promise<any> {\r\n    const operation = `api/users/findbyusername/${username}`;\r\n    const hash: string = btoa(`${username}:${password}`);\r\n    const headers = {\r\n      Authorization: `Basic ${hash}`\r\n    };\r\n    let baseURL: string | undefined = undefined;\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\r\n      baseURL = 'http://localhost:3001';\r\n    }\r\n    const tempInstance = axios.create({\r\n      baseURL,\r\n      headers\r\n    });\r\n    return tempInstance({\r\n      url: operation,\r\n      method: 'GET'\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @param url\r\n   * @param body stringa (in json) oppure UrlSearchParams per gli environment\r\n   * @param method\r\n   */\r\n  private async call(url: string, body?: string, method: 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE' = 'GET'): Promise<any> {\r\n    return this.axiosInstance({\r\n      url,\r\n      method,\r\n      data: body\r\n    });\r\n  }\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport { TReducerActions, ReduxActionTypes } from '../actions/action';\r\nimport { Connector } from '../utils/Connector';\r\nimport UserDTO from '../dto/UserDTO';\r\nimport CommitteeDTO from '../dto/CommitteeDTO';\r\n\r\nexport interface IAppDataState extends IWithUser, IWithCommittee, IWIthConnector {\r\n  user: UserDTO | undefined;\r\n  accessToken: string;\r\n  committee: CommitteeDTO | undefined;\r\n  users: UserDTO[];\r\n  showLoading: boolean;\r\n  connector: Connector;\r\n}\r\n\r\nconst stateDefault: IAppDataState = {\r\n  user: undefined,\r\n  accessToken: '',\r\n  committee: undefined,\r\n  users: [],\r\n  connector: new Connector(''),\r\n  showLoading: false\r\n};\r\n\r\nexport interface IWithUser {\r\n  user: UserDTO | undefined;\r\n}\r\n\r\nexport interface IWithUsers {\r\n  users: UserDTO[];\r\n}\r\n\r\nexport interface IWithCommittee {\r\n  committee: CommitteeDTO | undefined;\r\n}\r\n\r\nexport interface IWIthConnector {\r\n  connector: Connector;\r\n}\r\n\r\nconst appData = (state: IAppDataState = stateDefault, action: TReducerActions): IAppDataState => {\r\n  switch (action.type) {\r\n    case ReduxActionTypes.SET_ACCESS_TOKEN:\r\n      const { accessToken } = action.data;\r\n      const connector = new Connector(accessToken);\r\n      return {\r\n        ...state,\r\n        accessToken,\r\n        connector\r\n      };\r\n    case ReduxActionTypes.SET_USER_DATA:\r\n      const { user, committeeId } = action.data;\r\n      let normalizedUser = (user && { ...user }) || undefined;\r\n      if (user) {\r\n        if ((user as any).committee_users) {\r\n          normalizedUser = {\r\n            ...user,\r\n            committeeUser: (user as any).committee_users.find((committee_user: any) => committee_user.committeeId === committeeId)\r\n          };\r\n        }\r\n      }\r\n      const newState = {\r\n        ...state,\r\n        user: normalizedUser\r\n      };\r\n      return newState;\r\n    case ReduxActionTypes.SET_COMMITTEE_DATA:\r\n      const { committee } = action.data;\r\n      return {\r\n        ...state,\r\n        committee\r\n      };\r\n    case ReduxActionTypes.SET_SHOW_LOADING:\r\n      return { ...state, showLoading: action.data };\r\n    case ReduxActionTypes.RESET_AUTH_DATA:\r\n      return {\r\n        ...state,\r\n        user: undefined,\r\n        committee: undefined,\r\n        connector: new Connector(''),\r\n        accessToken: '',\r\n        users: []\r\n      };\r\n    case ReduxActionTypes.SET_USERS_DATA:\r\n      const { users } = action.data;\r\n      const normalizedUsers: any = (users || []).map((userToNormalize: UserDTO) => {\r\n        return {\r\n          ...userToNormalize,\r\n          committeeUser: (userToNormalize as any).committee_users[0]\r\n        };\r\n      });\r\n      return {\r\n        ...state,\r\n        users: normalizedUsers\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst AppReducers = combineReducers({\r\n  appData\r\n});\r\n\r\nexport default AppReducers;\r\n","export const Links = {\r\n  LOGIN: '/',\r\n  LOGOUT: '/',\r\n  SERVICES: '/services',\r\n  USERS: '/users',\r\n  VEHICLES: '/vehicles',\r\n  PERSONAL_AREA: '/personal_area'\r\n};\r\n","import * as React from 'react';\r\nimport { Button, Col, Form, message, Modal, Row, Input, Select, Icon } from 'antd';\r\nimport { connect } from 'react-redux';\r\nimport { IWithUser, IWIthConnector } from '../reducers/reducers';\r\nimport {\r\n  setUserData,\r\n  setAccessToken,\r\n  setCommitteeData,\r\n  setUsersData,\r\n  ISetUserDataProps,\r\n  ISetCommitteeDataProps,\r\n  ISetUsersDataProps,\r\n  ISetAccessTokenProps\r\n} from '../actions/action';\r\nimport { Connector } from '../utils/Connector';\r\nimport CommitteeDTO from '../dto/CommitteeDTO';\r\nimport { FormComponentProps } from 'antd/lib/form/Form';\r\nimport { Links } from '../utils/Links';\r\nimport { RouterProps } from 'react-router';\r\nimport { PortalName } from '../utils/Constants';\r\n\r\nconst { Option } = Select;\r\n\r\ninterface ILoginFormState {\r\n  committees: CommitteeDTO[];\r\n  loading: boolean;\r\n}\r\n\r\nclass LoginForm extends React.Component<\r\n  IWithUser & IWIthConnector & ISetUserDataProps & ISetAccessTokenProps & ISetCommitteeDataProps & ISetUsersDataProps & FormComponentProps & RouterProps,\r\n  ILoginFormState\r\n> {\r\n  state = {\r\n    committees: [],\r\n    loading: false\r\n  };\r\n\r\n  connector: Connector | undefined;\r\n\r\n  componentDidMount() {\r\n    this.props.connector\r\n      .getCommittees()\r\n      .then((res) => {\r\n        this.setState(\r\n          {\r\n            ...this.state,\r\n            committees: res.data\r\n          },\r\n          () => {\r\n            if (res.data && res.data[0]) {\r\n              this.handleSelectChange(res.data[0].id);\r\n              if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\r\n                this.props.form.setFieldsValue({\r\n                  username: 'f.marchetti',\r\n                  password: 'default'\r\n                });\r\n              }\r\n            }\r\n          }\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  handleSelectChange = (value: number) => {\r\n    this.props.form.setFieldsValue({\r\n      committeeId: value\r\n    });\r\n  };\r\n\r\n  private buildCommitteesSelect = () => {\r\n    const { committees } = this.state;\r\n    if (committees.length === 0) {\r\n      return <Icon type=\"loading\" />;\r\n    }\r\n\r\n    const { getFieldDecorator } = this.props.form;\r\n    return (\r\n      <Form.Item>\r\n        {getFieldDecorator('committeeId', {\r\n          rules: [{ required: true, message: 'Selezionare il comitato' }]\r\n        })(\r\n          <Select onChange={this.handleSelectChange}>\r\n            {committees.map((committee: CommitteeDTO) => (\r\n              <Option key={committee.id} value={committee.id}>\r\n                {committee.description}\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n        )}\r\n      </Form.Item>\r\n    );\r\n  };\r\n\r\n  private login = (userId: number, committeeId: number) => {\r\n    const { connector } = this.props;\r\n    connector\r\n      .getUser(userId)\r\n      .then((res) => {\r\n        const user = res.data;\r\n        const committee_users: Array<any> = user.committee_users;\r\n        if (committee_users) {\r\n          const founded = committee_users.find((element) => element.committeeId === committeeId);\r\n          if (!founded || founded.disabled === 1) {\r\n            message.error('Utente non abilitato al comitato selezionato');\r\n          } else {\r\n            this.props.setUserData(user, committeeId);\r\n            this.props.setCommitteeData(founded.committee);\r\n            this.props.connector\r\n              .getUsers(committeeId)\r\n              .then((uRes) => {\r\n                message.success('Autenticato');\r\n                this.props.setUsersData(uRes.data);\r\n                this.props.history.push(Links.SERVICES);\r\n              })\r\n              .catch((uErr) => {\r\n                message.error(`Si è verificato un errore nel recupero degli utenti`);\r\n              });\r\n          }\r\n        } else {\r\n          message.error('Utente non abilitato al comitato selezionato');\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        message.error(`Si è verificato un errore. Contattare l'amministratore di sistema.`);\r\n      });\r\n  };\r\n\r\n  private handleSubmit = (e: any) => {\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        this.setState({ loading: true }, () => {\r\n          const committeeId = values.committeeId;\r\n          const { username, password } = values;\r\n          this.props.connector\r\n            .signin(username, password, committeeId)\r\n            .then((res) => {\r\n              const { accessToken, id, committeeId } = res.data;\r\n              this.props.setAccessToken(accessToken);\r\n              this.setState({ loading: false }, () => this.login(id, committeeId));\r\n            })\r\n            .catch((err) => {\r\n              let errorMessage = 'Username e password non validi';\r\n              const { response } = err;\r\n              if (response) {\r\n                const { data } = response;\r\n                if (data) {\r\n                  errorMessage = data.message;\r\n                }\r\n              }\r\n              this.setState({ loading: false }, () => message.error(errorMessage));\r\n              console.error(err);\r\n            });\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  public render() {\r\n    const { getFieldDecorator } = this.props.form;\r\n    const { committees } = this.state;\r\n    return (\r\n      <Modal visible={true} closable={false} confirmLoading={false} footer={null}>\r\n        <div style={{ textAlign: 'right' }}>\r\n          <b>{PortalName}</b>\r\n        </div>\r\n        <Row gutter={8}>\r\n          <Col span={24}>\r\n            <img alt={''} src={process.env.PUBLIC_URL + '/red_cross_logo.png'} width=\"100%\" />\r\n          </Col>\r\n        </Row>\r\n        <Form onSubmit={this.handleSubmit} className=\"login-form\">\r\n          <Form.Item>\r\n            {getFieldDecorator('username', {\r\n              rules: [{ required: true, message: 'Username obbligatoria' }]\r\n            })(<Input prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"Digitare il proprio username\" />)}\r\n          </Form.Item>\r\n          <Form.Item>\r\n            {getFieldDecorator('password', {\r\n              rules: [{ required: true, message: 'Password obbligatoria' }]\r\n            })(<Input prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} type=\"password\" placeholder=\"Digitare la propria password\" />)}\r\n          </Form.Item>\r\n          {this.buildCommitteesSelect()}\r\n          <Form.Item>\r\n            <Button\r\n              loading={this.state.loading}\r\n              disabled={committees === null || committees === undefined || committees.length === 0}\r\n              type=\"primary\"\r\n              htmlType=\"submit\"\r\n              style={{ width: '100%' }}\r\n              className=\"login-form-button\"\r\n            >\r\n              Log in\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nconst WrappeLoginForm = Form.create({ name: 'normal_login' })(LoginForm);\r\nconst mapStateToProps = (state: any, ownProps: any) => {\r\n  return {\r\n    user: state.appData.user,\r\n    connector: state.appData.connector\r\n  };\r\n};\r\nconst LoginContainer = connect(mapStateToProps, {\r\n  setUserData,\r\n  setAccessToken,\r\n  setCommitteeData,\r\n  setUsersData\r\n})(WrappeLoginForm);\r\nexport default LoginContainer;\r\n","export const PortalName = \"Servizio Facile v.1.0\";","import * as React from 'react';\r\nimport { Fab } from 'react-tiny-fab';\r\n\r\nexport interface PlusFabButtonProps {\r\n  onClick: () => void;\r\n}\r\n\r\nclass PlusFabButton extends React.Component<PlusFabButtonProps, any> {\r\n  public render() {\r\n    return (\r\n      <Fab\r\n        mainButtonStyles={{ backgroundColor: '#1890ff' }}\r\n        alwaysShowTitle={false}\r\n        event={'click'}\r\n        icon={<span>+</span>}\r\n        position={{ bottom: 25, right: 25 }}\r\n        onClick={this.props.onClick}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default PlusFabButton;\r\n","import CommitteeUserDTO from './CommitteeUserDTO';\r\n\r\nexport default interface UserDTO {\r\n  id: number;\r\n  username: string;\r\n  password: string;\r\n  flgPasswordChanged: number;\r\n  name: string;\r\n  surname: string;\r\n  birth_date?: Date;\r\n  email?: string;\r\n  gender: number;\r\n  superuser: number;\r\n  withDrivingLicense: number;\r\n  committeeUser: CommitteeUserDTO;\r\n}\r\n\r\nexport const UserRoleType: { [code: number]: string } = {\r\n  0: 'Superuser',\r\n  1: 'Admin',\r\n  2: 'Utente'\r\n};\r\n\r\nexport const UserOccupationType: { [code: number]: string } = {\r\n  0: 'Dipendente',\r\n  1: 'Volontario',\r\n  2: 'Medico/Sanitario',\r\n  3: 'Altro'\r\n};\r\n\r\nexport const UserGenderType: { [code: number]: string } = {\r\n  0: 'Maschio',\r\n  1: 'Femmina',\r\n};\r\n","import * as React from 'react';\r\nimport { Form, Button, Col, Row, Input, Select, DatePicker, Switch } from 'antd';\r\nimport { FormComponentProps } from 'antd/lib/form/Form';\r\nimport UserDTO, { UserGenderType, UserRoleType, UserOccupationType } from '../../dto/UserDTO';\r\nimport moment from 'moment';\r\n\r\nconst { Option } = Select;\r\n\r\nexport interface IUserFormProps {\r\n  loggedUserId: number;\r\n  user: UserDTO | undefined;\r\n  personalArea?: boolean;\r\n  onCancel: () => void;\r\n  onSave: (user: UserDTO) => void;\r\n}\r\n\r\nclass User extends React.Component<IUserFormProps & FormComponentProps> {\r\n  private getInitialValueBirthDate = () => {\r\n    const { user } = this.props;\r\n    return user?.birth_date ? moment(user.birth_date) : undefined;\r\n  };\r\n\r\n  private handleSubmit = (e: any) => {\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        const userToSave: UserDTO = {\r\n          ...values,\r\n          birth_date: values.birth_date ? values.birth_date.format('YYYY-MM-DD') : undefined,\r\n          committeeUser: {\r\n            id: values.committeeUserId,\r\n            userId: values.id,\r\n            committeeId: values.committeeId,\r\n            role: values.role,\r\n            occupation: values.occupation,\r\n            disabled: values.disabled\r\n          }\r\n        };\r\n        this.props.onSave(userToSave);\r\n      }\r\n    });\r\n  };\r\n\r\n  public render() {\r\n    const { getFieldDecorator } = this.props.form;\r\n    const { user, onCancel, personalArea } = this.props;\r\n    return (\r\n      <Form layout=\"vertical\" onSubmit={this.handleSubmit}>\r\n        <Row gutter={16}>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Username\">\r\n              {getFieldDecorator('username', {\r\n                initialValue: this.props.user?.username,\r\n                rules: [{ required: true, message: 'Specificare il nome utente' }]\r\n              })(<Input disabled={user && user.id > 0} placeholder=\"Specificare il nome utente\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Password\">\r\n              {getFieldDecorator('password', {\r\n                initialValue: this.props.user?.password,\r\n                rules: [{ required: true, message: 'Specificare la password' }]\r\n              })(\r\n                personalArea ? (\r\n                  <Input.Password disabled={true} placeholder=\"Specificare la password\" />\r\n                ) : (\r\n                  <Input disabled={user && user.id > 0} type=\"password\" placeholder=\"Specificare la password\" />\r\n                )\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row gutter={16}>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Nome\">\r\n              {getFieldDecorator('name', {\r\n                initialValue: this.props.user?.name,\r\n                rules: [{ required: true, message: 'Specificare il nome' }]\r\n              })(<Input placeholder=\"Specificare il nome\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Cognome\">\r\n              {getFieldDecorator('surname', {\r\n                initialValue: this.props.user?.surname,\r\n                rules: [{ required: true, message: 'Specificare il cognome' }]\r\n              })(<Input placeholder=\"Specificare il cognome\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row gutter={16}>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Data di nascita\">\r\n              {getFieldDecorator('birth_date', {\r\n                initialValue: this.getInitialValueBirthDate(),\r\n                rules: []\r\n              })(<DatePicker format=\"DD-MM-YYYY\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Sesso\">\r\n              {getFieldDecorator('gender', {\r\n                initialValue: this.props.user?.gender,\r\n                rules: [\r\n                  {\r\n                    required: true,\r\n                    message: 'Specificare il sesso'\r\n                  }\r\n                ]\r\n              })(\r\n                <Select placeholder=\"Sesso\">\r\n                  <Option value={0}>{UserGenderType[0]}</Option>\r\n                  <Option value={1}>{UserGenderType[1]}</Option>\r\n                </Select>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row gutter={16}>\r\n          <Col span={24}>\r\n            <Form.Item label=\"Email\">\r\n              {getFieldDecorator('email', {\r\n                initialValue: this.props.user?.email,\r\n                rules: []\r\n              })(<Input placeholder=\"Specificare l'email\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row gutter={16} style={{ visibility: personalArea ? 'collapse' : 'visible' }}>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Ruolo\">\r\n              {getFieldDecorator('role', {\r\n                initialValue: this.props.user?.committeeUser.role,\r\n                rules: [\r\n                  {\r\n                    required: true,\r\n                    message: 'Specificare il ruolo'\r\n                  }\r\n                ]\r\n              })(\r\n                <Select placeholder=\"Role\">\r\n                  <Option value={1}>{UserRoleType[1]}</Option>\r\n                  <Option value={2}>{UserRoleType[2]}</Option>\r\n                </Select>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Occupazione\">\r\n              {getFieldDecorator('occupation', {\r\n                initialValue: this.props.user?.committeeUser.occupation,\r\n                rules: [\r\n                  {\r\n                    required: true,\r\n                    message: `Specificare l'occupazione`\r\n                  }\r\n                ]\r\n              })(\r\n                <Select placeholder=\"Occupazione\">\r\n                  <Option value={0}>{UserOccupationType[0]}</Option>\r\n                  <Option value={1}>{UserOccupationType[1]}</Option>\r\n                  <Option value={2}>{UserOccupationType[2]}</Option>\r\n                </Select>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row style={{ visibility: personalArea ? 'collapse' : 'visible' }}>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Con patente\">\r\n              {getFieldDecorator('withDrivingLicense', {\r\n                initialValue: this.props.user?.withDrivingLicense,\r\n                valuePropName: 'checked'\r\n              })(<Switch />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Disabilita\">\r\n              {getFieldDecorator('disabled', {\r\n                initialValue: this.props.user?.committeeUser.disabled,\r\n                valuePropName: 'checked'\r\n              })(<Switch />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row gutter={16} style={{ visibility: 'collapse' }}>\r\n          <Col span={6}>\r\n            <Form.Item label=\"Id\">\r\n              {getFieldDecorator('id', {\r\n                initialValue: this.props.user?.id\r\n              })(<Input placeholder=\"Specificare id utente\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={6}>\r\n            <Form.Item label=\"Password modificata\">\r\n              {getFieldDecorator('flgPasswordChanged', {\r\n                initialValue: this.props.user?.flgPasswordChanged\r\n              })(<Input placeholder=\"Password modificata\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={6}>\r\n            <Form.Item label=\"CommitteeUserId\">\r\n              {getFieldDecorator('committeeUserId', {\r\n                initialValue: this.props.user?.committeeUser.id\r\n              })(<Input placeholder=\"CommitteeUserId\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={6}>\r\n            <Form.Item label=\"CommitteeId\">\r\n              {getFieldDecorator('committeeId', {\r\n                initialValue: this.props.user?.committeeUser.committeeId\r\n              })(<Input placeholder=\"CommitteeId\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <div\r\n          style={{\r\n            position: 'absolute',\r\n            right: 0,\r\n            bottom: 0,\r\n            width: '100%',\r\n            borderTop: '1px solid #e9e9e9',\r\n            padding: '10px 16px',\r\n            background: '#fff',\r\n            textAlign: 'right'\r\n          }}\r\n        >\r\n          <Button onClick={onCancel} style={{ marginRight: 8 }}>\r\n            Annulla\r\n          </Button>\r\n          <Button htmlType=\"submit\" type=\"primary\">\r\n            Salva\r\n          </Button>\r\n        </div>\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n\r\nconst UserContainer = Form.create({ name: 'user_form ' })(User);\r\nclass UserForm extends React.Component<IUserFormProps> {\r\n  public render() {\r\n    return <UserContainer {...this.props} />;\r\n  }\r\n}\r\n\r\nexport default UserForm;\r\n","import * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { IWIthConnector, IWithCommittee, IWithUser, IWithUsers } from '../reducers/reducers';\r\nimport { Spin, Button, Popconfirm, Icon, Tooltip, Drawer } from 'antd';\r\nimport { message, Table } from 'antd';\r\nimport 'react-tiny-fab/dist/styles.css';\r\nimport PlusFabButton from './base/PlusFabButton';\r\nimport UserDTO, { UserRoleType, UserOccupationType } from '../dto/UserDTO';\r\nimport UserForm from './forms/UserForm';\r\nimport { setUsersData, ISetUsersDataProps } from '../actions/action';\r\nimport TripUsersDTO from '../dto/TripUsersDTO';\r\n\r\ninterface IUsersState {\r\n  loading: boolean;\r\n  showForm: boolean;\r\n  selectedUser?: UserDTO;\r\n}\r\n\r\nclass Users extends React.Component<IWithUser & IWithUsers & IWIthConnector & IWithCommittee & ISetUsersDataProps, IUsersState> {\r\n  columns = [\r\n    {\r\n      title: 'Username',\r\n      dataIndex: 'username',\r\n      key: 'username',\r\n      render: (value: any, record: any) => <b>{value}</b>\r\n    },\r\n    {\r\n      title: 'Nome',\r\n      dataIndex: 'name',\r\n      key: 'name'\r\n    },\r\n    {\r\n      title: 'Cognome',\r\n      dataIndex: 'surname',\r\n      key: 'surname'\r\n    },\r\n    {\r\n      title: 'Data di nascita',\r\n      dataIndex: 'birth_date',\r\n      key: 'birth_date'\r\n    },\r\n    {\r\n      title: 'Ruolo',\r\n      dataIndex: 'committeeUser.role',\r\n      key: 'role',\r\n      render: (value: any, record: any) => <span>{UserRoleType[value]}</span>\r\n    },\r\n    {\r\n      title: 'Occupazione',\r\n      dataIndex: 'committeeUser.occupation',\r\n      key: 'occupation',\r\n      render: (value: any, record: any) => <span>{UserOccupationType[value]}</span>\r\n    },\r\n    {\r\n      title: 'Con patente',\r\n      dataIndex: 'withDrivingLicense',\r\n      key: 'withDrivingLicense',\r\n      render: (value: any, record: any) => <p>{value === 0 ? undefined : <Icon type=\"check\" />}</p>\r\n    },\r\n    {\r\n      title: 'Disabilitato',\r\n      dataIndex: 'committeeUser.disabled',\r\n      key: 'disabled',\r\n      render: (value: any, record: any) => <p>{value === 0 ? undefined : <Icon type=\"check\" />}</p>\r\n    },\r\n    {\r\n      title: '',\r\n      key: 'action',\r\n      render: (text: any, record: UserDTO) => (\r\n        <span>\r\n          <Tooltip title=\"Modifica\">\r\n            <Button size=\"small\" icon=\"edit\" onClick={() => this._onEditRow(record)} />\r\n          </Tooltip>\r\n          <Popconfirm\r\n            placement=\"topLeft\"\r\n            title={`Confermare l'eliminazione dell'utente?`}\r\n            onConfirm={() => this._onDeleteUser(record)}\r\n            okText=\"Si\"\r\n            cancelText=\"No\"\r\n          >\r\n            <Button size=\"small\" style={{ marginLeft: '1px' }} icon=\"delete\" type=\"danger\" />\r\n          </Popconfirm>\r\n        </span>\r\n      )\r\n    }\r\n  ];\r\n\r\n  emptyUser: UserDTO = {\r\n    id: 0,\r\n    username: '',\r\n    password: '',\r\n    flgPasswordChanged: 0,\r\n    name: '',\r\n    surname: '',\r\n    birth_date: undefined,\r\n    email: undefined,\r\n    gender: 0,\r\n    withDrivingLicense: 0,\r\n    superuser: 0,\r\n    committeeUser: {\r\n      id: 0,\r\n      committeeId: this.props.committee?.id || 0,\r\n      userId: 0,\r\n      role: 2,\r\n      occupation: 0,\r\n      disabled: 0\r\n    }\r\n  };\r\n\r\n  state: IUsersState = {\r\n    loading: false,\r\n    showForm: false\r\n  };\r\n\r\n  private loadData = () => {\r\n    const { committee } = this.props;\r\n    if (committee !== undefined) {\r\n      this.props.connector\r\n        .getUsers(committee.id)\r\n        .then((res) => {\r\n          this.setState({ loading: false }, () => {\r\n            this.props.setUsersData(res.data);\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          message.error(`Si è verificato un errore nella lettura degli utenti`);\r\n          this.setState({ loading: false });\r\n          console.error(err);\r\n        });\r\n    }\r\n  };\r\n\r\n  private _onClose = () => {\r\n    this.setState({ showForm: false, selectedUser: undefined });\r\n  };\r\n\r\n  private _onEditRow = (selectedUser: UserDTO) => {\r\n    this.setState({ selectedUser, showForm: true });\r\n  };\r\n\r\n  private _onDeleteUser = (user: UserDTO) => {\r\n    this.props.connector\r\n      .getUserTrips(user.id)\r\n      .then((res) => {\r\n        const tripUsers: TripUsersDTO[] = res.data || [];\r\n        if (tripUsers.length > 0) {\r\n          message.error(`Utente già assegnato a servizi. Impossibile eliminare`);\r\n          return;\r\n        }\r\n        this.props.connector\r\n          .deleteCommitteesUsers(user.id)\r\n          .then((res) => {\r\n            this.props.connector\r\n              .deleteUser(user.id)\r\n              .then((res) => {\r\n                this.loadData();\r\n              })\r\n              .catch((err) => {\r\n                console.error(`_onDeleteUser - deleteUser: ${err}`);\r\n                message.error(`Si è verificato un errore durante l'eliminazione`);\r\n              });\r\n          })\r\n          .catch((err) => {\r\n            console.error(`_onDeleteUser - deleteCommitteesUsers: ${err}`);\r\n            message.error(`Si è verificato un errore durante l'eliminazione`);\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        console.error(`_onDeleteUser - getUserTrips: ${err}`);\r\n        message.error(`Si è verificato un errore durante l'eliminazione`);\r\n      });\r\n  };\r\n\r\n  private _onSave = (user: UserDTO) => {\r\n    const { committeeUser } = user;\r\n    if (!committeeUser) {\r\n      console.warn(`Expected NOT NULL 'committee' - This should never happen!`);\r\n      message.error('Si è verificato un errore nel salvataggio');\r\n      return;\r\n    }\r\n    this.props.connector\r\n      .publishUserCommittee(user, committeeUser)\r\n      .then((res) => {\r\n        message.success('Salvataggio completato');\r\n        this.setState({ showForm: false, selectedUser: undefined }, () => {\r\n          this.loadData();\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        message.error('Si è verificato un errore nel salvataggio');\r\n      });\r\n  };\r\n\r\n  private _onCreate = () => {\r\n    this.setState({ selectedUser: this.emptyUser, showForm: true });\r\n  };\r\n\r\n  private getDataSource = (): UserDTO[] => {\r\n    const { user, users } = this.props;\r\n    if (user !== undefined) {\r\n      // Un utente NON superuser può gestire solo utenti Admin e User\r\n      if (user.superuser === 0) {\r\n        return users.filter((user: UserDTO) => user.superuser === 0);\r\n      }\r\n      return users;\r\n    } else {\r\n      return [];\r\n    }\r\n  };\r\n\r\n  public render() {\r\n    const { loading, selectedUser, showForm } = this.state;\r\n    return (\r\n      <div>\r\n        {loading ? (\r\n          <div style={{ textAlign: 'center' }}>\r\n            <Spin />\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <Table columns={this.columns} pagination={{ pageSize: 10 }} dataSource={this.getDataSource()} />\r\n            <Drawer\r\n              title={`${(selectedUser as any)?.id === 0 ? 'Crea' : 'Modifica'} utente`}\r\n              width={480}\r\n              onClose={this._onClose}\r\n              visible={showForm}\r\n              bodyStyle={{ paddingBottom: 80 }}\r\n            >\r\n              {showForm ? <UserForm loggedUserId={this.props.user?.id || 0} user={selectedUser} onCancel={this._onClose} onSave={this._onSave} /> : undefined}\r\n            </Drawer>\r\n            {showForm ? undefined : <PlusFabButton onClick={this._onCreate} />}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: any, ownProps: any) => {\r\n  return {\r\n    user: state.appData.user,\r\n    connector: state.appData.connector,\r\n    committee: state.appData.committee,\r\n    users: state.appData.users\r\n  };\r\n};\r\nconst UsersContainer = connect(mapStateToProps, { setUsersData })(Users);\r\nexport default UsersContainer;\r\n","import CommitteeDTO from './CommitteeDTO';\r\n\r\nexport default interface VehicleDTO {\r\n  id: number;\r\n  type: number;\r\n  plate: string;\r\n  sign: string;\r\n  description: string;\r\n  disabled: number;\r\n  committeeId: number;\r\n  committee: CommitteeDTO;\r\n}\r\n\r\nexport const VehicleType: { [code: number]: string } = {\r\n  0: 'Furgone',\r\n  1: 'Ambulanza',\r\n  2: 'Autovettura'\r\n};\r\n","import * as React from 'react';\r\nimport { Drawer, Form, Button, Col, Row, Input, Select, Switch } from 'antd';\r\nimport VehicleDTO, { VehicleType } from '../../dto/VehicleDTO';\r\nimport { FormComponentProps } from 'antd/lib/form/Form';\r\n\r\nconst { Option } = Select;\r\n\r\nexport interface IVehicleFormProps {\r\n  visible: boolean;\r\n  vehicle: VehicleDTO | undefined;\r\n  onClose: () => void;\r\n  onSave: (vehicle: VehicleDTO) => void;\r\n}\r\n\r\nclass Vehicle extends React.Component<IVehicleFormProps & FormComponentProps> {\r\n  componentWillReceiveProps(nextProps: IVehicleFormProps & FormComponentProps) {\r\n    const { vehicle } = nextProps;\r\n    if (\r\n      vehicle !== undefined &&\r\n      JSON.stringify(this.props.vehicle) !== JSON.stringify(nextProps.vehicle)\r\n    ) {\r\n      const { form } = nextProps;\r\n      form.setFieldsValue({\r\n        type: vehicle.type,\r\n        plate: vehicle.plate,\r\n        sign: vehicle.sign,\r\n        description: vehicle.description,\r\n        disabled: vehicle.disabled\r\n      });\r\n    }\r\n  }\r\n\r\n  private handleSubmit = (e: any) => {\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        const { vehicle } = this.props;\r\n        const vehicleToSave: VehicleDTO = {\r\n          ...values,\r\n          id: (vehicle as any).id,\r\n          committeeId: (vehicle as any).committeeId,\r\n          committee: (vehicle as any).committee\r\n        };\r\n        this.props.onSave(vehicleToSave);\r\n      }\r\n    });\r\n  };\r\n\r\n  public render() {\r\n    const { getFieldDecorator } = this.props.form;\r\n    return (\r\n      <Drawer\r\n        title={`${this.props.vehicle?.id === 0 ? 'Crea' : 'Modifica'} veicolo`}\r\n        width={480}\r\n        onClose={this.props.onClose}\r\n        visible={this.props.visible}\r\n        bodyStyle={{ paddingBottom: 80 }}\r\n      >\r\n        <Form layout=\"vertical\" onSubmit={this.handleSubmit}>\r\n          <Row gutter={16}>\r\n            <Col span={24}>\r\n              <Form.Item label=\"Tipo\">\r\n                {getFieldDecorator('type', {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: 'Specificare il tipo'\r\n                    }\r\n                  ],\r\n                  initialValue: '0'\r\n                })(\r\n                  <Select placeholder=\"Tipologia\">\r\n                    <Option value={0}>{VehicleType[0]}</Option>\r\n                    <Option value={1}>{VehicleType[1]}</Option>\r\n                    <Option value={2}>{VehicleType[2]}</Option>\r\n                  </Select>\r\n                )}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16}>\r\n            <Col span={24}>\r\n              <Form.Item label=\"Targa\">\r\n                {getFieldDecorator('plate', {\r\n                  rules: [{ required: true, message: 'Specificare la targa' }]\r\n                })(<Input placeholder=\"Specificare la targa\" />)}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16}>\r\n            <Col span={24}>\r\n              <Form.Item label=\"Sigla\">\r\n                {getFieldDecorator('sign', {\r\n                  rules: [{ required: false, message: 'Specificare la sigla' }]\r\n                })(<Input placeholder=\"Specificare una sigla\" />)}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16}>\r\n            <Col span={24}>\r\n              <Form.Item label=\"Descrizione\">\r\n                {getFieldDecorator('description', {\r\n                  rules: [\r\n                    {\r\n                      required: false\r\n                    }\r\n                  ]\r\n                })(\r\n                  <Input.TextArea\r\n                    rows={4}\r\n                    placeholder=\"Specificare una descrizione\"\r\n                  />\r\n                )}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col span={12}>\r\n              <Form.Item label=\"Disabilita\">\r\n                {getFieldDecorator('disabled', { valuePropName: 'checked' })(\r\n                  <Switch />\r\n                )}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <div\r\n            style={{\r\n              position: 'absolute',\r\n              right: 0,\r\n              bottom: 0,\r\n              width: '100%',\r\n              borderTop: '1px solid #e9e9e9',\r\n              padding: '10px 16px',\r\n              background: '#fff',\r\n              textAlign: 'right'\r\n            }}\r\n          >\r\n            <Button onClick={this.props.onClose} style={{ marginRight: 8 }}>\r\n              Annulla\r\n            </Button>\r\n            <Button htmlType=\"submit\" type=\"primary\">\r\n              Salva\r\n            </Button>\r\n          </div>\r\n        </Form>\r\n      </Drawer>\r\n    );\r\n  }\r\n}\r\n\r\nconst VehicleContainer = Form.create({ name: 'vehicle_form ' })(Vehicle);\r\nclass VehicleForm extends React.Component<IVehicleFormProps> {\r\n  public render() {\r\n    return <VehicleContainer {...this.props} />;\r\n  }\r\n}\r\n\r\nexport default VehicleForm;\r\n","import * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport VehicleDTO, { VehicleType } from '../dto/VehicleDTO';\r\nimport { IWIthConnector, IWithCommittee } from '../reducers/reducers';\r\nimport { Spin, Button, Popconfirm, Tooltip, Icon } from 'antd';\r\nimport { message, Table } from 'antd';\r\nimport VehicleForm from './forms/VehicleForm';\r\nimport 'react-tiny-fab/dist/styles.css';\r\nimport PlusFabButton from './base/PlusFabButton';\r\n\r\ninterface IVechiclesState {\r\n  loading: boolean;\r\n  showForm: boolean;\r\n  selectedVehicle: VehicleDTO | undefined;\r\n  vehicles: VehicleDTO[];\r\n}\r\n\r\nclass Vehicles extends React.Component<\r\n  IWIthConnector & IWithCommittee,\r\n  IVechiclesState\r\n> {\r\n  columns = [\r\n    {\r\n      title: 'Targa',\r\n      dataIndex: 'plate',\r\n      key: 'plate'\r\n    },\r\n    {\r\n      title: 'Sigla',\r\n      dataIndex: 'sign',\r\n      key: 'sign'\r\n    },\r\n    {\r\n      title: 'Tipologia',\r\n      dataIndex: 'type',\r\n      key: 'type',\r\n      render: (value: any, record: any) => <span>{VehicleType[value]}</span>\r\n    },\r\n    {\r\n      title: 'Descrizione',\r\n      dataIndex: 'description',\r\n      key: 'description'\r\n    },\r\n    {\r\n      title: 'Disabilitato',\r\n      dataIndex: 'disabled',\r\n      key: 'disabled',\r\n      render: (value: any, record: any) => (\r\n        <p>{value === 0 ? undefined : <Icon type=\"close\" />}</p>\r\n      )\r\n    },\r\n    {\r\n      title: '',\r\n      key: 'action',\r\n      render: (text: any, record: VehicleDTO) => (\r\n        <span>\r\n          <Tooltip title=\"Modifica\">\r\n            <Button\r\n              size=\"small\"\r\n              icon=\"edit\"\r\n              onClick={() => this._onEditVehicle(record)}\r\n            />\r\n          </Tooltip>\r\n          <Popconfirm\r\n            placement=\"topLeft\"\r\n            title={`Confermare l'eliminazione?`}\r\n            onConfirm={() => this._onDeleteVehicle(record)}\r\n            okText=\"Si\"\r\n            cancelText=\"No\"\r\n          >\r\n            <Button\r\n              size=\"small\"\r\n              style={{ marginLeft: '1px' }}\r\n              icon=\"delete\"\r\n              type=\"danger\"\r\n            />\r\n          </Popconfirm>\r\n        </span>\r\n      )\r\n    }\r\n  ];\r\n\r\n  emptyVehicle: VehicleDTO = {\r\n    id: 0,\r\n    type: 0,\r\n    plate: '',\r\n    sign: '',\r\n    description: '',\r\n    disabled: 0,\r\n    committeeId: this.props.committee?.id || 0,\r\n    committee: this.props.committee as any\r\n  };\r\n\r\n  state = {\r\n    loading: true,\r\n    showForm: false,\r\n    selectedVehicle: undefined,\r\n    vehicles: []\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.loadData();\r\n  }\r\n\r\n  private loadData = () => {\r\n    const { committee } = this.props;\r\n    if (committee !== undefined) {\r\n      this.props.connector\r\n        .getVehicles(committee.id)\r\n        .then(res => {\r\n          this.setState({\r\n            vehicles: res.data,\r\n            loading: false\r\n          });\r\n        })\r\n        .catch(err => {\r\n          this.setState({ vehicles: [], loading: false });\r\n          console.error(err);\r\n        });\r\n    }\r\n  };\r\n\r\n  private _onClose = () => {\r\n    this.setState({ showForm: false, selectedVehicle: undefined });\r\n  };\r\n\r\n  private _onEditVehicle = (selectedVehicle: VehicleDTO) => {\r\n    this.setState({ selectedVehicle, showForm: true });\r\n  };\r\n\r\n  private _onDeleteVehicle = (vehicle: VehicleDTO) => {\r\n    this.props.connector.deleteVehicle(vehicle).then(res => {\r\n      this.loadData();\r\n    });\r\n  };\r\n\r\n  private _onSave = (vehicle: VehicleDTO) => {\r\n    this.publishVehicle(vehicle);\r\n  };\r\n\r\n  private publishVehicle = (vehicle: VehicleDTO) => {\r\n    this.props.connector\r\n      .publishVehicle(vehicle)\r\n      .then(res => {\r\n        message.success('Salvataggio completato');\r\n        this.setState({ showForm: false, selectedVehicle: undefined }, () => {\r\n          this.loadData();\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n        message.error('Si è verificato un errore nel salvataggio');\r\n      });\r\n  };\r\n\r\n  private _onCreate = () => {\r\n    this.setState({ selectedVehicle: this.emptyVehicle, showForm: true });\r\n  };\r\n\r\n  public render() {\r\n    const { loading, vehicles } = this.state;\r\n    return (\r\n      <div>\r\n        {loading ? (\r\n          <div style={{ textAlign: 'center' }}>\r\n            <Spin />{' '}\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <Table\r\n              columns={this.columns}\r\n              pagination={{ pageSize: 10 }}\r\n              dataSource={vehicles}\r\n            />\r\n            <VehicleForm\r\n              visible={this.state.showForm}\r\n              vehicle={this.state.selectedVehicle}\r\n              onClose={this._onClose}\r\n              onSave={this._onSave}\r\n            />\r\n            {this.state.showForm ? (\r\n              undefined\r\n            ) : (\r\n              <PlusFabButton onClick={this._onCreate} />\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: any, ownProps: any) => {\r\n  return {\r\n    connector: state.appData.connector,\r\n    committee: state.appData.committee\r\n  };\r\n};\r\nconst VehiclesContainer = connect(mapStateToProps)(Vehicles);\r\nexport default VehiclesContainer;\r\n","import CommitteeDTO from './CommitteeDTO';\r\nimport VehicleDTO from './VehicleDTO';\r\nimport TripUsersDTO from './TripUsersDTO';\r\n\r\nexport default interface TripDTO {\r\n  id: number;\r\n  date: string;\r\n  hour: string; // Esiste il time?\r\n  flgDestination: number;\r\n  flgAr: number;\r\n  siteDeparture: string;\r\n  siteArrival: string;\r\n  serviceType: string;\r\n  patientData?: string;\r\n  type: number;\r\n  extraUsers: number;\r\n  flgNurse: number;\r\n  flgToNotify: number;\r\n  notes?: string;\r\n  committeeId: number;\r\n  vehicleId: number;\r\n  committee: CommitteeDTO;\r\n  vehicle: VehicleDTO;\r\n  trip_users?: TripUsersDTO[];\r\n}\r\n\r\nexport const ServiceTargetRoleType: { [code: number]: string } = {\r\n  0: 'Dipendenti',\r\n  1: 'Volontari',\r\n  2: 'Chiunque'\r\n};\r\n\r\nexport const ServiceTargetLocationType: { [code: number]: string } = {\r\n  0: 'In Sede',\r\n  1: 'Destinazione',\r\n  2: 'Prelevamento'\r\n};\r\n\r\nexport const FlgArType: { [code: number]: string } = {\r\n  0: 'Solo Andata',\r\n  1: 'Andata/Ritorno'\r\n};\r\n","import UserDTO from './UserDTO';\r\n\r\nexport default interface TripUsersDTO {\r\n  id: number;\r\n  tripId: number;\r\n  userId: number;\r\n  role: number;\r\n  user?: UserDTO;\r\n}\r\n\r\nexport const ServiceRoleType: { [code: number]: string } = {\r\n  0: 'Autista',\r\n  1: 'Soccorritore',\r\n  2: 'Medico/Sanitario'\r\n};\r\n","import * as React from 'react';\r\nimport { Drawer, Form, Col, Row, Input, InputNumber, DatePicker, TimePicker, Button, Radio, Select, Switch } from 'antd';\r\nimport { FormComponentProps } from 'antd/lib/form/Form';\r\nimport TripDTO, { ServiceTargetLocationType, FlgArType, ServiceTargetRoleType } from '../../dto/TripDTO';\r\nimport moment from 'moment';\r\nimport VehicleDTO, { VehicleType } from '../../dto/VehicleDTO';\r\n\r\nconst { Option } = Select;\r\n\r\nexport interface ITripFormProps {\r\n  visible: boolean;\r\n  vehicles: VehicleDTO[];\r\n  trip: TripDTO | undefined;\r\n  onClose: () => void;\r\n  onSave: (trip: TripDTO) => void;\r\n}\r\n\r\nclass Trip extends React.Component<ITripFormProps & FormComponentProps> {\r\n  private setFieldsValue = (trip: TripDTO) => {\r\n    const { form } = this.props;\r\n    const dateForHour = new Date(2000, 1, 1, trip.hour ? Number(trip.hour.substring(0, 2)) : 12, trip.hour ? Number(trip.hour.substring(3, 5)) : 0);\r\n    const formValues = {\r\n      ...trip,\r\n      tripDate: trip.date ? moment(trip.date) : undefined,\r\n      tripHour: moment(dateForHour)\r\n    };\r\n    form.setFieldsValue(formValues);\r\n  };\r\n\r\n  componentWillReceiveProps(nextProps: ITripFormProps & FormComponentProps) {\r\n    const { trip } = nextProps;\r\n    if (trip !== undefined && JSON.stringify(this.props.trip) !== JSON.stringify(nextProps.trip)) {\r\n      this.setFieldsValue(trip as TripDTO);\r\n    }\r\n  }\r\n\r\n  private handleSubmit = (e: any) => {\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        const tripToSave: TripDTO = {\r\n          ...values,\r\n          date: values.tripDate ? values.tripDate.format('YYYY-MM-DD') : undefined,\r\n          hour: values.tripHour.format('HH:mm')\r\n        };\r\n        this.props.onSave(tripToSave);\r\n      }\r\n    });\r\n  };\r\n\r\n  public render() {\r\n    const { getFieldDecorator } = this.props.form;\r\n    const { trip, onClose, visible, vehicles } = this.props;\r\n    return (\r\n      <Drawer title={`${trip?.id === 0 ? 'Crea' : 'Modifica'} servizio`} width={480} onClose={onClose} visible={visible} bodyStyle={{ paddingBottom: 80 }}>\r\n        <Form layout=\"vertical\" onSubmit={this.handleSubmit}>\r\n          <Row gutter={16}>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Data del servizio\">\r\n                {getFieldDecorator('tripDate', {\r\n                  rules: [{ required: true, message: 'Specificare data di partenza' }]\r\n                })(<DatePicker style={{ width: '100%' }} format=\"DD-MM-YYYY\" />)}\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Ora\">\r\n                {getFieldDecorator('tripHour', {\r\n                  rules: [\r\n                    {\r\n                      type: 'object',\r\n                      required: true,\r\n                      message: `Specificare l'ora del servizio`\r\n                    }\r\n                  ]\r\n                })(<TimePicker style={{ width: '100%' }} placeholder=\"Ora servizio\" format=\"HH:mm\" />)}\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Luogo\">\r\n                {getFieldDecorator('flgDestination', {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: 'Specificare il luogo'\r\n                    }\r\n                  ]\r\n                })(\r\n                  <Select placeholder=\"Luogo\">\r\n                    <Option value={0}>{ServiceTargetLocationType[0]}</Option>\r\n                    <Option value={1}>{ServiceTargetLocationType[1]}</Option>\r\n                    <Option value={2}>{ServiceTargetLocationType[2]}</Option>\r\n                  </Select>\r\n                )}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <Form.Item label=\"Partenza\">\r\n                {getFieldDecorator('siteDeparture', {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: 'Specificare il luogo di partenza'\r\n                    }\r\n                  ]\r\n                })(<Input.TextArea rows={4} placeholder=\"Luogo di partenza\" />)}\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={12}>\r\n              <Form.Item label=\"Arrivo\">\r\n                {getFieldDecorator('siteArrival', {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: 'Specificare il luogo di arrivo'\r\n                    }\r\n                  ]\r\n                })(<Input.TextArea rows={4} placeholder=\"Luogo di arrivo\" />)}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16}>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Veicolo\">\r\n                {getFieldDecorator('vehicleId', {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: 'Specificare il veicolo'\r\n                    }\r\n                  ]\r\n                })(\r\n                  <Select placeholder=\"veicolo\">\r\n                    {vehicles.map((vehicle: VehicleDTO) => {\r\n                      const vehicleId: number = vehicle.id;\r\n                      return (\r\n                        <Option key={vehicleId} value={vehicle.id}>\r\n                          {vehicle.sign} - {VehicleType[vehicle.type]}\r\n                        </Option>\r\n                      );\r\n                    })}\r\n                  </Select>\r\n                )}\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item>\r\n                {getFieldDecorator('flgAr')(\r\n                  <Radio.Group style={{ marginTop: '10px' }}>\r\n                    <Radio value={0}>{FlgArType[0]}</Radio>\r\n                    <Radio value={1}>{FlgArType[1]}</Radio>\r\n                  </Radio.Group>\r\n                )}\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Servizio per\">\r\n                {getFieldDecorator('type', {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: 'Specificare il tipo'\r\n                    }\r\n                  ]\r\n                })(\r\n                  <Select placeholder=\"Servizio per\">\r\n                    <Option value={0}>{ServiceTargetRoleType[0]}</Option>\r\n                    <Option value={1}>{ServiceTargetRoleType[1]}</Option>\r\n                    <Option value={2}>{ServiceTargetRoleType[2]}</Option>\r\n                  </Select>\r\n                )}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16}>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Tipologia servizio\">\r\n                {getFieldDecorator('serviceType', {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: 'Specificare il tipo di servizio'\r\n                    }\r\n                  ]\r\n                })(<Input.TextArea rows={2} placeholder=\"Tipologia servizio\" />)}\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Dati paziente\">{getFieldDecorator('patientData')(<Input.TextArea rows={2} placeholder=\"Dati paziente\" />)}</Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Con infermiere\">{getFieldDecorator('flgNurse', { valuePropName: 'checked' })(<Switch />)}</Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16}>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Note\">{getFieldDecorator('notes')(<Input.TextArea rows={3} placeholder=\"Eventuali note aggiuntive\" />)}</Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Numero accompagnatori\">{getFieldDecorator('extraUsers', { initialValue: 1 })(<InputNumber min={1} max={10} />)}</Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Da notificare\">{getFieldDecorator('flgToNotify', { valuePropName: 'checked' })(<Switch />)}</Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16} style={{ visibility: 'collapse' }}>\r\n            <Col span={6}>\r\n              <Form.Item label=\"Id\">{getFieldDecorator('id')(<Input placeholder=\"Specificare id servizio\" />)}</Form.Item>\r\n              <Col span={6}>\r\n                <Form.Item label=\"CommitteeId\">{getFieldDecorator('committeeId')(<Input placeholder=\"CommitteeId\" />)}</Form.Item>\r\n              </Col>\r\n            </Col>\r\n          </Row>\r\n          <div\r\n            style={{\r\n              position: 'absolute',\r\n              right: 0,\r\n              bottom: 0,\r\n              width: '100%',\r\n              borderTop: '1px solid #e9e9e9',\r\n              padding: '10px 16px',\r\n              background: '#fff',\r\n              textAlign: 'right'\r\n            }}\r\n          >\r\n            <Button onClick={this.props.onClose} style={{ marginRight: 8 }}>\r\n              Annulla\r\n            </Button>\r\n            <Button htmlType=\"submit\" type=\"primary\">\r\n              Salva\r\n            </Button>\r\n          </div>\r\n        </Form>\r\n      </Drawer>\r\n    );\r\n  }\r\n}\r\n\r\nconst TripContainer = Form.create({ name: 'trip_form ' })(Trip);\r\nclass TripForm extends React.Component<ITripFormProps> {\r\n  public render() {\r\n    return <TripContainer {...this.props} />;\r\n  }\r\n}\r\n\r\nexport default TripForm;\r\n","import * as React from 'react';\r\nimport { ServiceRoleType } from '../../dto/TripUsersDTO';\r\nimport { Button, Radio, Row, Select } from 'antd';\r\nimport { RadioChangeEvent } from 'antd/lib/radio';\r\nimport UserDTO from '../../dto/UserDTO';\r\n\r\nconst { Option } = Select;\r\n\r\ninterface RoleChooseProps {\r\n  users: UserDTO[];\r\n  isUserAdmin: boolean;\r\n  loggedUser: UserDTO;\r\n  onConfirmRole: (role: number, userId: number) => void;\r\n}\r\n\r\ninterface RoleChooseState {\r\n  roleSelected: number;\r\n  userSelected: UserDTO;\r\n}\r\n\r\nclass RoleChoose extends React.Component<RoleChooseProps, RoleChooseState> {\r\n  state = {\r\n    userSelected: this.props.isUserAdmin ? this.props.users[0] : this.props.loggedUser,\r\n    roleSelected: 1\r\n  };\r\n\r\n  private _onChangeRole = (e: RadioChangeEvent) => {\r\n    this.setState({ roleSelected: e.target.value });\r\n  };\r\n\r\n  private _onChangeUser = (value: number) => {\r\n    const { users } = this.props;\r\n    const userSelected: UserDTO | undefined = users.find((user: UserDTO) => user.id === value);\r\n    if (userSelected !== undefined) {\r\n      this.setState({ userSelected, roleSelected: 1 });\r\n    }\r\n  };\r\n\r\n  public render() {\r\n    const { users, isUserAdmin, loggedUser } = this.props;\r\n    const { userSelected, roleSelected } = this.state;\r\n    return (\r\n      <div>\r\n        <Row>\r\n          <Select style={{ width: '100%' }} defaultValue={this.state.userSelected.id} onChange={this._onChangeUser}>\r\n            {users\r\n              .filter((user: UserDTO) => isUserAdmin || user.id === loggedUser.id)\r\n              .map((user: UserDTO) => (\r\n                <Option value={user.id} key={user.id}>\r\n                  {user.name} {user.surname}\r\n                </Option>\r\n              ))}\r\n          </Select>\r\n        </Row>\r\n        <Row>\r\n          <Radio.Group style={{ marginTop: '5px', width: '100%' }} value={roleSelected} buttonStyle=\"solid\" onChange={this._onChangeRole}>\r\n            {userSelected.withDrivingLicense === 1 ? <Radio.Button value={0}>{ServiceRoleType[0]}</Radio.Button> : undefined}\r\n            <Radio.Button value={1}>{ServiceRoleType[1]}</Radio.Button>\r\n            {userSelected.committeeUser.occupation === 2 ? <Radio.Button value={2}>{ServiceRoleType[2]}</Radio.Button> : undefined}\r\n          </Radio.Group>\r\n        </Row>\r\n        <Row>\r\n          <Button style={{ marginTop: '5px', width: '100%' }} onClick={() => this.props.onConfirmRole(this.state.roleSelected, this.state.userSelected.id)}>\r\n            Conferma\r\n          </Button>\r\n        </Row>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RoleChoose;\r\n","import * as React from 'react';\r\nimport TripDTO from '../../dto/TripDTO';\r\nimport Form, { FormComponentProps } from 'antd/lib/form/Form';\r\nimport { Icon, Button, Drawer, Row, Col, DatePicker, TimePicker } from 'antd';\r\nimport moment from 'moment';\r\n\r\nexport interface IDuplicateTripItem {\r\n  date: moment.Moment;\r\n  hour: moment.Moment;\r\n}\r\n\r\nexport interface IDuplicateTripFormProps {\r\n  visible: boolean;\r\n  trip: TripDTO | undefined;\r\n  onClose: () => void;\r\n  onConfirm: (trip: TripDTO, newDates: IDuplicateTripItem[]) => void;\r\n}\r\n\r\nlet id = 0;\r\n\r\nclass DuplicateTrip extends React.Component<\r\n  IDuplicateTripFormProps & FormComponentProps\r\n> {\r\n  componentWillReceiveProps(\r\n    nextProps: IDuplicateTripFormProps & FormComponentProps\r\n  ) {\r\n    const { trip } = nextProps;\r\n    if (\r\n      trip !== undefined &&\r\n      JSON.stringify(this.props.trip) !== JSON.stringify(nextProps.trip)\r\n    ) {\r\n      this.props.form.setFieldsValue({\r\n        keys: [],\r\n        duplicateElements: []\r\n      });\r\n    }\r\n  }\r\n\r\n  private onDeleteDate = (k: any) => {\r\n    const { form } = this.props;\r\n    const keys = form.getFieldValue('keys');\r\n    const duplicateElements: IDuplicateTripItem[] =\r\n      form.getFieldValue('duplicateElements') || [];\r\n    if (keys.length === 1) {\r\n      return;\r\n    }\r\n\r\n    form.setFieldsValue({\r\n      keys: keys.filter((key: any) => key !== k),\r\n      duplicateElements: duplicateElements.filter(\r\n        (value: IDuplicateTripItem, index: number) => index !== k\r\n      )\r\n    });\r\n  };\r\n\r\n  private onAddDate = () => {\r\n    const { form } = this.props;\r\n    const keys = form.getFieldValue('keys');\r\n    const nextKeys = keys.concat(id++);\r\n\r\n    form.setFieldsValue({\r\n      keys: nextKeys\r\n    });\r\n  };\r\n\r\n  handleSubmit = (e: any) => {\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        const { duplicateElements } = values;\r\n        const { trip } = this.props;\r\n        this.props.onConfirm(\r\n          trip as any,\r\n          duplicateElements.filter((element: any) => !!element)\r\n        );\r\n      }\r\n    });\r\n  };\r\n\r\n  private getInitialDateValue = (key: number) => {\r\n    const { trip: tripToDuplicate } = this.props;\r\n    const tripDate = moment(\r\n      tripToDuplicate !== undefined ? tripToDuplicate.date : new Date()\r\n    );\r\n    const newTripDate = tripDate.add(key + 1, 'd');\r\n    return newTripDate;\r\n  };\r\n\r\n  private getInitialHourValue = () => {\r\n    const { trip: tripToDuplicate } = this.props;\r\n    const dateForHour = new Date(\r\n      2000,\r\n      1,\r\n      1,\r\n      tripToDuplicate?.hour ? Number(tripToDuplicate.hour.substring(0, 2)) : 12,\r\n      tripToDuplicate?.hour ? Number(tripToDuplicate.hour.substring(3, 5)) : 0\r\n    );\r\n    const tripHour = moment(dateForHour);\r\n    return tripHour;\r\n  };\r\n\r\n  public render() {\r\n    const { getFieldDecorator, getFieldValue } = this.props.form;\r\n    getFieldDecorator('keys', { initialValue: [] });\r\n    const keys = getFieldValue('keys');\r\n    const myFormItems = keys.map((key: any, index: number) => (\r\n      <Row gutter={16} key={index}>\r\n        <Col span={11}>\r\n          <Form.Item>\r\n            {getFieldDecorator(`duplicateElements[${key}].date`, {\r\n              initialValue: this.getInitialDateValue(index),\r\n              rules: [\r\n                {\r\n                  required: true,\r\n                  message: 'Selezionare data del viaggio'\r\n                }\r\n              ]\r\n            })(<DatePicker style={{ width: '100%' }} format=\"DD-MM-YYYY\" />)}\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={11}>\r\n          <Form.Item>\r\n            {getFieldDecorator(`duplicateElements[${key}].hour`, {\r\n              initialValue: this.getInitialHourValue(),\r\n              rules: [\r\n                {\r\n                  type: 'object',\r\n                  required: true,\r\n                  message: `Specificare l'ora del servizio`\r\n                }\r\n              ]\r\n            })(\r\n              <TimePicker\r\n                style={{ width: '100%' }}\r\n                placeholder=\"Ora servizio\"\r\n                format=\"HH:mm\"\r\n              />\r\n            )}\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={2}>\r\n          {key === 0 ? (\r\n            undefined\r\n          ) : (\r\n            <Icon\r\n              style={{ marginTop: '10px' }}\r\n              className=\"dynamic-delete-button\"\r\n              type=\"minus-circle-o\"\r\n              onClick={() => this.onDeleteDate(key)}\r\n            />\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    ));\r\n\r\n    return (\r\n      <Drawer\r\n        title={`Duplica servizio`}\r\n        width={480}\r\n        onClose={this.props.onClose}\r\n        visible={this.props.visible}\r\n        bodyStyle={{ paddingBottom: 80 }}\r\n      >\r\n        <Form onSubmit={this.handleSubmit}>\r\n          {myFormItems}\r\n          <Row gutter={16}>\r\n            <Col span={24}>\r\n              <Form.Item>\r\n                <Button\r\n                  type=\"dashed\"\r\n                  onClick={this.onAddDate}\r\n                  style={{ width: '100%' }}\r\n                >\r\n                  <Icon type=\"plus\" /> Aggiungi data\r\n                </Button>\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <div\r\n            style={{\r\n              position: 'absolute',\r\n              right: 0,\r\n              bottom: 0,\r\n              width: '100%',\r\n              borderTop: '1px solid #e9e9e9',\r\n              padding: '10px 16px',\r\n              background: '#fff',\r\n              textAlign: 'right'\r\n            }}\r\n          >\r\n            <Button onClick={this.props.onClose} style={{ marginRight: 8 }}>\r\n              Annulla\r\n            </Button>\r\n            <Button htmlType=\"submit\" type=\"primary\">\r\n              Conferma\r\n            </Button>\r\n          </div>\r\n        </Form>\r\n      </Drawer>\r\n    );\r\n  }\r\n}\r\n\r\nconst DuplicateTripContainer = Form.create({ name: 'duplicate_trip_form ' })(\r\n  DuplicateTrip\r\n);\r\nclass DuplicateTripForm extends React.Component<IDuplicateTripFormProps> {\r\n  public render() {\r\n    return <DuplicateTripContainer {...this.props} />;\r\n  }\r\n}\r\n\r\nexport default DuplicateTripForm;\r\n","import * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { IWithUser, IWIthConnector } from '../reducers/reducers';\r\nimport { Row, Col, message } from 'antd';\r\nimport UserForm from './forms/UserForm';\r\nimport UserDTO from '../dto/UserDTO';\r\nimport { RouterProps } from 'react-router';\r\nimport { ISetUserDataProps, setUserData } from '../actions/action';\r\n\r\ninterface IPersonalAreaProps extends IWithUser, IWIthConnector, ISetUserDataProps, RouterProps {}\r\n\r\nclass PersonalArea extends React.Component<IPersonalAreaProps> {\r\n  private _onCancel = () => {\r\n    this.props.history.goBack();\r\n  };\r\n  private _onSave = (userToPublish: UserDTO) => {\r\n    const { user } = this.props;\r\n    this.props.connector\r\n      .publishUser(userToPublish)\r\n      .then((res) => {\r\n        this.props.setUserData(userToPublish, user?.committeeUser.id || 0);\r\n        message.success('Salvataggio completato');\r\n      })\r\n      .catch((err) => {\r\n        console.error(`_onSave: error ${err}`);\r\n        message.error('Si è verificato un errore nel salvataggio');\r\n      });\r\n  };\r\n\r\n  public render() {\r\n    const { user } = this.props;\r\n    return (\r\n      <Row>\r\n        <Col span={6}></Col>\r\n        <Col span={12} style={{ marginTop: '10px' }}>\r\n          <UserForm loggedUserId={(user as UserDTO).id} user={user} personalArea={true} onCancel={this._onCancel} onSave={this._onSave} />\r\n        </Col>\r\n        <Col span={6}></Col>\r\n      </Row>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: any, ownProps: any) => {\r\n  return {\r\n    user: state.appData.user,\r\n    connector: state.appData.connector,\r\n    committee: state.appData.committee\r\n  };\r\n};\r\nconst PersonalAreaContainer = connect(mapStateToProps, {\r\n  setUserData\r\n})(PersonalArea);\r\nexport default PersonalAreaContainer;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Layout, Menu, Icon, Button, Row, Col, Tooltip } from 'antd';\r\nimport { Route } from 'react-router-dom';\r\nimport { Links } from '../utils/Links';\r\nimport UsersContainer from './Users';\r\nimport VehiclesContainer from './Vehicles';\r\nimport ServicesContainer from './Services';\r\nimport { IWithUser, IWithCommittee } from '../reducers/reducers';\r\nimport { RouterProps } from 'react-router';\r\nimport { PortalName } from '../utils/Constants';\r\nimport { IResetAuthDataProps, resetAuthData } from '../actions/action';\r\nimport PersonalAreaContainer from './PersonalArea';\r\n\r\nconst { Header, Content, Footer, Sider } = Layout;\r\n\r\ninterface IDashboardProps extends IWithUser, IWithCommittee, IResetAuthDataProps, RouterProps {}\r\n\r\ninterface IDashboardState {\r\n  collapsed: boolean;\r\n}\r\n\r\nclass Dashboard extends React.Component<IDashboardProps, IDashboardState> {\r\n  constructor(props: IDashboardProps) {\r\n    super(props);\r\n\r\n    const { user, committee } = this.props;\r\n    if (!user && !committee) {\r\n      this._onLogout();\r\n    }\r\n  }\r\n  state = {\r\n    collapsed: true\r\n  };\r\n\r\n  _onCollapse = (collapsed: any) => {\r\n    this.setState({ collapsed });\r\n  };\r\n\r\n  _onClickLogout = () => {\r\n    this.props.resetAuthData();\r\n    this._onLogout();\r\n  };\r\n\r\n  _onLogout = () => {\r\n    this.props.history.replace(Links.LOGOUT);\r\n  };\r\n\r\n  get isUserAdmin(): boolean {\r\n    const { user } = this.props;\r\n    if (user !== undefined && user.committeeUser !== undefined) {\r\n      return user?.committeeUser.role < 2;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public render() {\r\n    const { user, committee } = this.props;\r\n    return (\r\n      <Layout style={{ minHeight: '100vh' }}>\r\n        <Sider collapsible collapsed={this.state.collapsed} onCollapse={this._onCollapse}>\r\n          <div style={{ height: '60px', width: '100%' }} />\r\n          <Menu theme=\"dark\" defaultSelectedKeys={['1']} mode=\"inline\">\r\n            <Menu.Item\r\n              key=\"1\"\r\n              onClick={() => {\r\n                this.props.history.push(Links.SERVICES);\r\n              }}\r\n            >\r\n              <Icon type=\"calendar\" />\r\n              <span>Gestione Servizi</span>\r\n            </Menu.Item>\r\n            {this.isUserAdmin ? (\r\n              <Menu.Item\r\n                key=\"2\"\r\n                onClick={() => {\r\n                  this.props.history.push(Links.USERS);\r\n                }}\r\n              >\r\n                <Icon type=\"team\" />\r\n                <span>Gestione Utenti</span>\r\n              </Menu.Item>\r\n            ) : undefined}\r\n            {this.isUserAdmin ? (\r\n              <Menu.Item\r\n                key=\"3\"\r\n                onClick={() => {\r\n                  this.props.history.push(Links.VEHICLES);\r\n                }}\r\n              >\r\n                <Icon type=\"car\" />\r\n                <span>Gestione Veicoli</span>\r\n              </Menu.Item>\r\n            ) : undefined}\r\n          </Menu>\r\n        </Sider>\r\n        <Layout>\r\n          <Header style={{ background: '#001529', maxHeight: '64px', padding: 0 }}>\r\n            <Row>\r\n              <Col span={16} style={{ textAlign: 'left' }}>\r\n                <span\r\n                  style={{\r\n                    color: 'white',\r\n                    marginLeft: '5px',\r\n                    fontStyle: 'bold',\r\n                    fontSize: 'larger'\r\n                  }}\r\n                >\r\n                  {PortalName}\r\n                </span>\r\n                -\r\n                <span\r\n                  style={{\r\n                    color: 'white',\r\n                    marginLeft: '5px',\r\n                    fontStyle: 'italic'\r\n                  }}\r\n                >\r\n                  {committee?.description}\r\n                </span>\r\n              </Col>\r\n              <Col span={6} style={{ textAlign: 'right' }}>\r\n                <span style={{ color: 'white', marginRight: '5px' }}>\r\n                  {user?.name} {user?.surname}\r\n                </span>\r\n              </Col>\r\n              <Col span={1}>\r\n                <Tooltip title=\"Area personale\" placement=\"bottom\">\r\n                  <Button\r\n                    ghost\r\n                    icon=\"user\"\r\n                    onClick={() => {\r\n                      this.props.history.push(Links.PERSONAL_AREA);\r\n                    }}\r\n                    style={{ height: '64px', width: '100%' }}\r\n                  />\r\n                </Tooltip>\r\n              </Col>\r\n              <Col span={1}>\r\n                <Tooltip title=\"Logout\" placement=\"bottom\">\r\n                  <Button ghost icon=\"logout\" style={{ height: '64px', width: '100%' }} onClick={this._onClickLogout} />\r\n                </Tooltip>\r\n              </Col>\r\n            </Row>\r\n          </Header>\r\n          <Content style={{ margin: '0 16px' }}>\r\n            <Route path={Links.SERVICES} component={ServicesContainer} />\r\n            <Route path={Links.USERS} component={UsersContainer} />\r\n            <Route path={Links.VEHICLES} component={VehiclesContainer} />\r\n            <Route path={Links.PERSONAL_AREA} component={PersonalAreaContainer} />\r\n          </Content>\r\n          <Footer style={{ textAlign: 'center' }} />\r\n        </Layout>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: any, ownProps: any) => {\r\n  return {\r\n    user: state.appData.user,\r\n    committee: state.appData.committee\r\n  };\r\n};\r\nconst DashboardContainer = connect(mapStateToProps, { resetAuthData })(Dashboard);\r\nexport default DashboardContainer;\r\n","import React from 'react';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport { Links } from './utils/Links';\r\nimport LoginContainer from './components/Login';\r\nimport DashboardContainer from './components/Dashboard';\r\n\r\nclass App extends React.Component {\r\n  public render() {\r\n    return (\r\n      <Router>\r\n        <Switch>\r\n          <Route exact={true} path={Links.LOGIN} component={LoginContainer} />\r\n          <Route component={DashboardContainer} />\r\n        </Switch>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport 'antd/dist/antd.css';\nimport { createStore } from 'redux';\nimport AppReducers from './reducers/reducers';\nimport { Provider } from 'react-redux';\nimport App from './App';\n\nexport function configureStore() {\n  const store = createStore(AppReducers);\n  return store;\n}\n\nReactDOM.render(\n  <Provider store={configureStore()}>\n    <App />\n  </Provider>,\n  document.getElementById('root') as HTMLElement\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}