{"version":3,"sources":["serviceWorker.ts","actions/action.tsx","components/Services.tsx","utils/Utils.tsx","utils/Constants.tsx","utils/Connector.tsx","reducers/reducers.tsx","utils/Links.tsx","components/Login.tsx","components/base/PlusFabButton.tsx","dto/UserDTO.tsx","components/forms/UserForm.tsx","components/Users.tsx","dto/VehicleDTO.tsx","components/forms/VehicleForm.tsx","components/Vehicles.tsx","dto/TripDTO.tsx","dto/TripUsersDTO.tsx","components/forms/TripForm.tsx","components/base/RoleChoose.tsx","components/forms/DuplicateTripForm.tsx","components/PersonalArea.tsx","components/Dashboard.tsx","App.tsx","index.tsx"],"names":["Boolean","window","location","hostname","match","ReduxActionTypes","setUsersData","users","type","SET_USERS_DATA","data","setUserData","user","committeeId","SET_USER_DATA","ViewModeType","setUserInfo","userInfo","localStorage","setItem","JSON","stringify","getUserInfo","loggedUserInfo","getItem","parse","resetUserInfo","removeItem","Connector","axiosInstance","authHeader","accessToken","this","axios","create","baseURL","undefined","headers","call","operation","vehicle","id","body","tripId","tripUserId","userId","trip","tripUser","committeeUserId","committeeUserInfo","publishUser","userResponse","status","console","log","Error","publishedUser","committeeUser","role","occupation","disabled","bodyCommUser","operationCommUser","username","password","tempInstance","url","method","hash","btoa","Authorization","stateDefault","committee","connector","showLoading","AppReducers","combineReducers","appData","state","action","SET_ACCESS_TOKEN","normalizedUser","committee_users","find","committee_user","newState","SET_COMMITTEE_DATA","SET_SHOW_LOADING","RESET_AUTH_DATA","normalizedUsers","map","userToNormalize","Links","Option","Select","LoginForm","committees","loading","handleSelectChange","value","props","form","setFieldsValue","buildCommitteesSelect","length","getFieldDecorator","Item","rules","required","message","onChange","key","description","login","getUser","then","res","founded","element","setCommitteeData","getUsers","uRes","success","history","push","catch","uErr","error","err","handleSubmit","e","preventDefault","validateFields","values","setState","signin","errorMessage","response","getCommittees","visible","closable","confirmLoading","footer","style","textAlign","gutter","span","alt","src","width","onSubmit","className","prefix","color","placeholder","htmlType","React","WrappeLoginForm","Form","name","LoginContainer","connect","ownProps","setAccessToken","PlusFabButton","mainButtonStyles","backgroundColor","alwaysShowTitle","event","icon","position","bottom","right","onClick","UserRoleType","0","1","2","UserOccupationType","3","UserGenderType","User","getInitialValueBirthDate","birth_date","moment","userToSave","format","onSave","onCancel","personalArea","layout","label","initialValue","Password","surname","gender","email","visibility","withDrivingLicense","valuePropName","flgPasswordChanged","borderTop","padding","background","marginRight","UserContainer","UserForm","Users","columns","title","dataIndex","render","record","text","size","_onEditRow","placement","onConfirm","_onDeleteUser","okText","cancelText","marginLeft","emptyUser","superuser","showForm","loadData","_onClose","selectedUser","getUserTrips","deleteCommitteesUsers","deleteUser","_onSave","warn","publishUserCommittee","_onCreate","getDataSource","filter","pagination","pageSize","dataSource","onClose","bodyStyle","paddingBottom","loggedUserId","UsersContainer","VehicleType","Vehicle","vehicleToSave","nextProps","plate","sign","TextArea","rows","VehicleContainer","VehicleForm","Vehicles","_onEditVehicle","_onDeleteVehicle","emptyVehicle","selectedVehicle","vehicles","getVehicles","deleteVehicle","publishVehicle","VehiclesContainer","ServiceTargetRoleType","ServiceTargetLocationType","FlgArType","ServiceRoleType","Trip","dateForHour","Date","hour","Number","substring","formValues","tripDate","date","tripHour","tripToSave","vehicleId","Group","marginTop","min","max","TripContainer","TripForm","RoleChoose","userSelected","isUserAdmin","loggedUser","roleSelected","_onChangeRole","target","_onChangeUser","defaultValue","buttonStyle","Button","onConfirmRole","DuplicateTrip","onDeleteDate","k","keys","getFieldValue","duplicateElements","index","onAddDate","nextKeys","concat","getInitialDateValue","tripToDuplicate","add","getInitialHourValue","myFormItems","DuplicateTripContainer","DuplicateTripForm","WeekDays","Months","today","Services","selectedDate","firstDayOfView","viewMode","week","trips","showDuplicateTripForm","selectedTrip","rolesVisible","getEmptyTrip","flgDestination","flgAr","siteDeparture","siteArrival","serviceType","patientData","extraUsers","flgNurse","flgToNotify","notes","trip_users","getTrips","vRes","vErr","_onChangeView","_onClickDayOfWeek","renderDayOfWeek","isSelected","getDate","getMonth","getFullYear","isOld","getTime","isToday","renderCardHeaderDate","cursor","borderRadius","height","border","renderCardBodyWeekDay","renderDays","numRows","rowIndex","days","renderDaysOfWeek","row","justify","margin","_onMoveViewLeft","_onMoveViewRight","startDate","elements","result","_onDeleteTrip","deleteTripUsersByTrip","deleteTrip","tRes","tErr","_onEditTrip","_onDuplicateTrip","setHours","sort","trip1","trip2","hour1Replaced","split","join","hour2Replaced","handleRoleVisibleChange","uniqueIndex","roleVisible","newArray","_onDeleteTripUser","deleteTripUsers","renderTooltipUserAvatar","trip_user","renderTimeline","todayTrips","maximumUsers","reduce","p","v","sharedSpan","Math","floor","totalUsers","popoverVisible","zIndex","count","shape","fontSize","content","renderRoleChoose","trigger","onVisibleChange","substr","_onConfirmRole","tripToPublish","newRolesVisible","publishTripUser","_onCloseTripForm","_onCloseDuplicateTripForm","_onConfirmDuplicateTrip","newDates","a","withError","newDate","newTrip","publishTrip","newFirstDayOfView","dayOfMonth","month","weekDay","getDay","Component","ServicesContainer","PersonalArea","_onCancel","goBack","userToPublish","PersonalAreaContainer","Header","Layout","Content","Footer","Sider","Dashboard","collapsed","_onCollapse","_onClickLogout","resetAuthData","_onLogout","replace","minHeight","collapsible","onCollapse","theme","defaultSelectedKeys","mode","maxHeight","fontStyle","ghost","path","component","DashboardContainer","App","exact","configureStore","createStore","ReactDOM","store","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.1f1c9e87.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import CommitteeDTO from '../dto/CommitteeDTO';\r\nimport UserDTO from '../dto/UserDTO';\r\n\r\nexport enum ReduxActionTypes {\r\n  SET_SHOW_LOADING = 'SET_SHOW_LOADING',\r\n  SET_USER_DATA = 'SET_USER_DATA',\r\n  SET_ACCESS_TOKEN = 'SET_ACCESS_TOKEN',\r\n  SET_COMMITTEE_DATA = 'SET_COMMITTEE_DATA',\r\n  RESET_AUTH_DATA = 'RESET_AUTH_DATA',\r\n  SET_USERS_DATA = 'SET_USERS_DATA'\r\n}\r\n\r\nexport interface IReduxBaseAction {\r\n  type: ReduxActionTypes;\r\n}\r\n\r\nexport interface IReduxSetUserData extends IReduxBaseAction {\r\n  type: ReduxActionTypes.SET_USER_DATA;\r\n  data: {\r\n    user: UserDTO;\r\n    committeeId: number;\r\n  };\r\n}\r\n\r\nexport interface IReduxSetAccessToken extends IReduxBaseAction {\r\n  type: ReduxActionTypes.SET_ACCESS_TOKEN;\r\n  data: {\r\n    accessToken: string;\r\n  };\r\n}\r\n\r\nexport interface IReduxSetCommitteeData extends IReduxBaseAction {\r\n  type: ReduxActionTypes.SET_COMMITTEE_DATA;\r\n  data: {\r\n    committee: CommitteeDTO;\r\n  };\r\n}\r\n\r\nexport interface IReduxSetUsersData extends IReduxBaseAction {\r\n  type: ReduxActionTypes.SET_USERS_DATA;\r\n  data: {\r\n    users: UserDTO[];\r\n  };\r\n}\r\n\r\nexport interface IReduxSetShowLoading extends IReduxBaseAction {\r\n  type: ReduxActionTypes.SET_SHOW_LOADING;\r\n  data: boolean;\r\n}\r\n\r\nexport interface IReduxResetAuthData extends IReduxBaseAction {\r\n  type: ReduxActionTypes.RESET_AUTH_DATA;\r\n}\r\n\r\nexport type TReducerActions =\r\n  | IReduxSetUserData\r\n  | IReduxSetAccessToken\r\n  | IReduxSetCommitteeData\r\n  | IReduxSetShowLoading\r\n  | IReduxResetAuthData\r\n  | IReduxSetUsersData;\r\n\r\nexport interface ISetUsersDataProps {\r\n  setUsersData(users: UserDTO[]): IReduxSetUsersData;\r\n}\r\n\r\nexport interface ISetUserDataProps {\r\n  setUserData(user: UserDTO, committeeId: number): IReduxSetUserData;\r\n}\r\n\r\nexport interface ISetAccessTokenProps {\r\n  setAccessToken(accessToken: string): IReduxSetAccessToken;\r\n}\r\n\r\nexport interface ISetCommitteeDataProps {\r\n  setCommitteeData(committee: CommitteeDTO): IReduxSetCommitteeData;\r\n}\r\n\r\nexport interface IResetAuthDataProps {\r\n  resetAuthData(): IReduxResetAuthData;\r\n}\r\n\r\nexport function setUsersData(users: UserDTO[]): IReduxSetUsersData {\r\n  return {\r\n    type: ReduxActionTypes.SET_USERS_DATA,\r\n    data: {\r\n      users\r\n    }\r\n  };\r\n}\r\n\r\nexport function setUserData(user: UserDTO, committeeId: number): IReduxSetUserData {\r\n  return {\r\n    type: ReduxActionTypes.SET_USER_DATA,\r\n    data: {\r\n      user,\r\n      committeeId\r\n    }\r\n  };\r\n}\r\n\r\nexport function setAccessToken(accessToken: string): IReduxSetAccessToken {\r\n  return {\r\n    type: ReduxActionTypes.SET_ACCESS_TOKEN,\r\n    data: {\r\n      accessToken\r\n    }\r\n  };\r\n}\r\n\r\nexport function setCommitteeData(committee: CommitteeDTO): IReduxSetCommitteeData {\r\n  return {\r\n    type: ReduxActionTypes.SET_COMMITTEE_DATA,\r\n    data: {\r\n      committee\r\n    }\r\n  };\r\n}\r\n\r\nexport function resetAuthData(): IReduxResetAuthData {\r\n  return {\r\n    type: ReduxActionTypes.RESET_AUTH_DATA\r\n  };\r\n}\r\n","import React from 'react';\r\nimport { Row, Button, Col, Card, Radio, message, Timeline, Tag, Popconfirm, Avatar, Empty, Tooltip, Badge, Popover } from 'antd';\r\nimport { add, format } from 'date-fns';\r\nimport TripDTO, { ServiceTargetRoleType, ServiceTargetLocationType, FlgArType } from '../dto/TripDTO';\r\nimport { connect } from 'react-redux';\r\nimport { IWithUser, IWIthConnector, IWithCommittee, IWithUsers } from '../reducers/reducers';\r\nimport VehicleDTO, { VehicleType } from '../dto/VehicleDTO';\r\nimport TripUsersDTO, { ServiceRoleType } from '../dto/TripUsersDTO';\r\nimport UserDTO from '../dto/UserDTO';\r\nimport PlusFabButton from './base/PlusFabButton';\r\nimport TripForm from './forms/TripForm';\r\nimport RoleChoose from './base/RoleChoose';\r\nimport DuplicateTripForm, { IDuplicateTripItem } from './forms/DuplicateTripForm';\r\n\r\ninterface IServicesState {\r\n  loading: boolean;\r\n  selectedDate: Date;\r\n  firstDayOfView: Date;\r\n  viewMode: ViewModeType;\r\n  trips: TripDTO[];\r\n  vehicles: VehicleDTO[];\r\n  showForm: boolean;\r\n  showDuplicateTripForm: boolean;\r\n  selectedTrip: TripDTO | undefined;\r\n  rolesVisible: Array<boolean>;\r\n}\r\n\r\nenum ViewModeType {\r\n  week,\r\n  month\r\n}\r\n\r\nconst WeekDays: Array<string> = ['Domenica', 'Luned', 'Marted', 'Mercoled', 'Gioved', 'Venerd', 'Sabato'];\r\n\r\nconst Months: Array<string> = [\r\n  'Gennaio',\r\n  'Febbraio',\r\n  'Marzo',\r\n  'Aprile',\r\n  'Maggio',\r\n  'Giugno',\r\n  'Luglio',\r\n  'Agosto',\r\n  'Settembre',\r\n  'Ottobre',\r\n  'Novembre',\r\n  'Dicembre'\r\n];\r\n\r\nconst today = new Date();\r\n\r\nclass Services extends React.Component<IWithUser & IWIthConnector & IWithCommittee & IWithUsers, IServicesState> {\r\n  state = {\r\n    loading: false,\r\n    selectedDate: today,\r\n    firstDayOfView: today,\r\n    viewMode: ViewModeType.week,\r\n    trips: [],\r\n    vehicles: [],\r\n    showForm: false,\r\n    showDuplicateTripForm: false,\r\n    selectedTrip: undefined,\r\n    rolesVisible: []\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.loadData();\r\n  }\r\n\r\n  private getEmptyTrip = (): TripDTO => {\r\n    const { vehicles } = this.state;\r\n    const emptyTrip: TripDTO = {\r\n      id: 0,\r\n      date: format(this.state.selectedDate, 'yyyy-MM-dd'),\r\n      hour: '12:00:00',\r\n      flgDestination: 0,\r\n      flgAr: 0,\r\n      siteDeparture: '',\r\n      siteArrival: '',\r\n      serviceType: '',\r\n      patientData: undefined,\r\n      type: 2,\r\n      extraUsers: 1,\r\n      flgNurse: 0,\r\n      flgToNotify: 0,\r\n      notes: undefined,\r\n      committeeId: this.props.committee?.id || 0,\r\n      vehicleId: vehicles.length !== 0 ? (vehicles[0] as any).id : 0,\r\n      committee: undefined as any,\r\n      vehicle: undefined as any,\r\n      trip_users: []\r\n    };\r\n    return emptyTrip;\r\n  };\r\n\r\n  private loadData = () => {\r\n    const { committee } = this.props;\r\n    if (committee !== undefined) {\r\n      const committeeId: number = committee.id;\r\n      this.props.connector\r\n        .getTrips(committeeId)\r\n        .then((res) => {\r\n          this.setState({\r\n            trips: res.data\r\n          });\r\n          this.props.connector\r\n            .getVehicles(committeeId)\r\n            .then((vRes) => {\r\n              this.setState({\r\n                vehicles: vRes.data,\r\n                loading: false\r\n              });\r\n            })\r\n            .catch((vErr) => {\r\n              this.setState({ vehicles: [], loading: false });\r\n              console.error(vErr);\r\n            });\r\n        })\r\n        .catch((err) => {\r\n          this.setState({ trips: [], loading: false });\r\n          console.error(err);\r\n        });\r\n    }\r\n  };\r\n\r\n  private _onChangeView = (e: any) => {\r\n    const viewMode: any = e.target.value;\r\n    this.setState({ viewMode });\r\n  };\r\n\r\n  private _onClickDayOfWeek = (date: Date) => {\r\n    console.log(date);\r\n    this.setState({ selectedDate: date });\r\n  };\r\n\r\n  private renderCardHeaderDate(date: Date) {\r\n    const dayOfMonth: number = date.getDate();\r\n    const month: string = Months[date.getMonth()];\r\n    return (\r\n      <Row>\r\n        <Col style={{ textAlign: 'left' }} span={24}>\r\n          {dayOfMonth} {month.substring(0, 3)}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  }\r\n\r\n  private renderCardBodyWeekDay(date: Date) {\r\n    const weekDay: string = WeekDays[date.getDay()];\r\n    const todayTrips: TripDTO[] = this.getTrips(date);\r\n    return (\r\n      <Row>\r\n        <Col style={{ textAlign: 'left' }} span={24}>\r\n          <b>{weekDay}</b>\r\n          {todayTrips.length !== 0 ? <Badge count={todayTrips.length} style={{ backgroundColor: '#87D068', marginLeft: '3px' }} /> : undefined}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  }\r\n\r\n  private renderDayOfWeek = (date: Date) => {\r\n    const { selectedDate } = this.state;\r\n    const isSelected =\r\n      date.getDate() === selectedDate.getDate() && date.getMonth() === selectedDate.getMonth() && date.getFullYear() === selectedDate.getFullYear();\r\n    const isOld = date.getTime() < today.getTime();\r\n    const isToday = date.getTime() === today.getTime();\r\n    return (\r\n      <Col key={date.getTime()} span={3}>\r\n        <Card\r\n          onClick={() => this._onClickDayOfWeek(date)}\r\n          size=\"small\"\r\n          title={this.renderCardHeaderDate(date)}\r\n          className=\"current-day\"\r\n          style={{\r\n            cursor: 'pointer',\r\n            borderRadius: '10px',\r\n            height: '90px',\r\n            border: `2px solid ${isSelected ? '#1890ff' : '#e8e8e8'}`,\r\n            backgroundColor: `${isToday ? '#e6f7ff' : isOld ? '#f2f4f5' : 'white'}`\r\n          }}\r\n        >\r\n          {this.renderCardBodyWeekDay(date)}\r\n        </Card>\r\n      </Col>\r\n    );\r\n  };\r\n\r\n  private renderDays = () => {\r\n    const { viewMode, firstDayOfView } = this.state;\r\n    const numRows: number = viewMode === ViewModeType.week ? 1 : 4;\r\n    const rows = [];\r\n\r\n    for (let rowIndex = 0; rowIndex < numRows; rowIndex++) {\r\n      const days = this.renderDaysOfWeek(firstDayOfView, rowIndex);\r\n      const row = (\r\n        <Row justify=\"center\" key={rowIndex} type=\"flex\">\r\n          <Col span={1} style={{ textAlign: 'center' }}>\r\n            {rowIndex === 0 ? <Button icon=\"left\" style={{ margin: 5 }} onClick={this._onMoveViewLeft} /> : undefined}\r\n          </Col>\r\n          {days}\r\n          <Col span={1} style={{ textAlign: 'center' }}>\r\n            {rowIndex === 0 ? <Button icon=\"right\" style={{ margin: 5 }} onClick={this._onMoveViewRight} /> : undefined}\r\n          </Col>\r\n        </Row>\r\n      );\r\n      rows.push(row);\r\n    }\r\n\r\n    return rows;\r\n  };\r\n\r\n  private renderDaysOfWeek = (startDate: Date, rowIndex: number) => {\r\n    const elements: any = [];\r\n    for (let index = 0; index < 7; index++) {\r\n      var result = add(startDate, {\r\n        days: index + rowIndex * 7\r\n      });\r\n      elements.push(this.renderDayOfWeek(result));\r\n    }\r\n    return elements;\r\n  };\r\n\r\n  private _onDeleteTrip = (tripId: number) => {\r\n    this.props.connector\r\n      .deleteTripUsersByTrip(tripId)\r\n      .then((res) => {\r\n        this.props.connector\r\n          .deleteTrip(tripId)\r\n          .then((tRes) => {\r\n            this.loadData();\r\n          })\r\n          .catch((tErr) => {\r\n            console.log(`_onDeleteTrip error: ${tErr}`);\r\n            message.error(`Si  verificato un errore durante l'eliminazione`);\r\n            this.loadData();\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        console.log(`_onDeleteTrip error: ${err}`);\r\n        message.error(`Si  verificato un errore durante l'eliminazione`);\r\n      });\r\n  };\r\n\r\n  private _onEditTrip = (trip: TripDTO) => {\r\n    this.setState({ selectedTrip: trip, showForm: true });\r\n  };\r\n\r\n  private _onDuplicateTrip = (trip: TripDTO) => {\r\n    this.setState({ selectedTrip: trip, showDuplicateTripForm: true });\r\n  };\r\n\r\n  private getTrips = (date: Date): TripDTO[] => {\r\n    const { trips } = this.state;\r\n    const { user } = this.props;\r\n    const tripsOfDate: TripDTO[] = trips\r\n      .filter((trip: TripDTO) => {\r\n        return new Date(trip.date).setHours(0, 0, 0, 0) === date.setHours(0, 0, 0, 0);\r\n      })\r\n      .filter((trip: TripDTO) => {\r\n        if (user !== undefined && user.committeeUser !== undefined) {\r\n          const occupation = user.committeeUser.occupation;\r\n          if (occupation === 0) {\r\n            // Se  dipendente, vede tutti i servizi\r\n            return true;\r\n          }\r\n          // Volontario o altro, vede i servizi non destinati ai dipendenti\r\n          return trip.type > 0;\r\n        }\r\n        return false;\r\n      })\r\n      .sort((trip1: TripDTO, trip2: TripDTO) => {\r\n        const hour1Replaced = trip1.hour.split(':').join('');\r\n        const hour2Replaced = trip2.hour.split(':').join('');\r\n        return Number(hour1Replaced) - Number(hour2Replaced);\r\n      });\r\n    return tripsOfDate;\r\n  };\r\n\r\n  private handleRoleVisibleChange = (uniqueIndex: number, roleVisible: boolean) => {\r\n    const newArray: Array<boolean> = [...this.state.rolesVisible];\r\n    newArray[uniqueIndex] = roleVisible;\r\n    this.setState({ rolesVisible: newArray });\r\n  };\r\n\r\n  private _onDeleteTripUser = (tripUserId: number) => {\r\n    this.props.connector\r\n      .deleteTripUsers(tripUserId)\r\n      .then((res) => {\r\n        this.loadData();\r\n      })\r\n      .catch((err) => {\r\n        console.error(`_onDeleteTripUser: ${err}`);\r\n        message.error(`Si  verificato un errore nell'eliminazione`);\r\n      });\r\n  };\r\n\r\n  get isUserAdmin(): boolean {\r\n    const { user } = this.props;\r\n    if (user !== undefined && user.committeeUser !== undefined) {\r\n      return user?.committeeUser.role < 2;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private renderTooltipUserAvatar = (trip_user: TripUsersDTO) => {\r\n    const { user } = this.props;\r\n    const role: string = ServiceRoleType[trip_user.role];\r\n    return (\r\n      <p>\r\n        {role}\r\n        {this.isUserAdmin || (user?.id || 0) === trip_user.userId ? (\r\n          <Tooltip title=\"Elimina\">\r\n            <Button onClick={() => this._onDeleteTripUser(trip_user.id)} style={{ marginLeft: '5px' }} icon=\"delete\" type=\"danger\" />\r\n          </Tooltip>\r\n        ) : undefined}\r\n      </p>\r\n    );\r\n  };\r\n\r\n  private renderTimeline = () => {\r\n    const { selectedDate, rolesVisible } = this.state;\r\n    const todayTrips: TripDTO[] = this.getTrips(selectedDate);\r\n    if (todayTrips.length === 0) {\r\n      return <Empty />;\r\n    }\r\n    const tripWithMoreUsers: TripDTO = todayTrips.reduce((p: TripDTO, v: TripDTO) => {\r\n      return p.extraUsers > v.extraUsers ? p : v;\r\n    });\r\n    const maximumUsers: number = tripWithMoreUsers.extraUsers + 1;\r\n    const sharedSpan: number = Math.floor(24 / maximumUsers);\r\n    return (\r\n      <Timeline>\r\n        {todayTrips.map((trip: TripDTO, index: number) => {\r\n          const trip_users: TripUsersDTO[] = trip.trip_users || [];\r\n          const totalUsers = trip.extraUsers + 1;\r\n          let users: any[] = [];\r\n          for (let index = 0; index < totalUsers; index++) {\r\n            const trip_user: TripUsersDTO = trip_users[index];\r\n            const uniqueIndex: number = Number(`${trip.id}${index}`);\r\n            const popoverVisible: boolean = rolesVisible[uniqueIndex];\r\n            if (trip_user) {\r\n              const user: UserDTO | undefined = trip_user.user;\r\n              users.push(\r\n                <Col span={sharedSpan} key={index} style={{ textAlign: 'center' }}>\r\n                  <Tooltip title={this.renderTooltipUserAvatar(trip_user)}>\r\n                    <Badge style={{ zIndex: 1 }} count={<b>{ServiceRoleType[trip_user.role].substring(0, 1)}</b>}>\r\n                      <Avatar style={{ backgroundColor: '#87d068' }} shape=\"square\" icon=\"user\" />\r\n                    </Badge>\r\n                    <p>\r\n                      <span style={{ fontSize: '10px' }}>\r\n                        {user?.name} {user?.surname}\r\n                      </span>\r\n                    </p>\r\n                  </Tooltip>\r\n                </Col>\r\n              );\r\n              continue;\r\n            }\r\n            users.push(\r\n              <Col span={sharedSpan} key={index} style={{ textAlign: 'center' }}>\r\n                <Popover\r\n                  content={this.renderRoleChoose(trip)}\r\n                  trigger=\"click\"\r\n                  visible={popoverVisible}\r\n                  onVisibleChange={(visible: boolean) => this.handleRoleVisibleChange(uniqueIndex, visible)}\r\n                >\r\n                  <Button type=\"dashed\" icon=\"user\" />\r\n                </Popover>\r\n              </Col>\r\n            );\r\n          }\r\n          return (\r\n            <Timeline.Item key={index}>\r\n              <Row>\r\n                <Col span={8}>\r\n                  <Row>\r\n                    <b>Ora:</b> {trip.hour.substr(0, 5)}\r\n                    <Tag style={{ marginLeft: '5px' }} color=\"green\">\r\n                      {ServiceTargetLocationType[trip.flgDestination]}\r\n                    </Tag>\r\n                  </Row>\r\n                  <Row>\r\n                    <b>Partenza: </b>\r\n                    {trip.siteDeparture}\r\n                  </Row>\r\n                  <Row>\r\n                    <b>Arrivo: </b> {trip.siteArrival}\r\n                  </Row>\r\n                  <Row>\r\n                    <b>Veicolo: </b> {VehicleType[trip.vehicle.type]} - {trip.vehicle.sign} - {trip.vehicle.description}\r\n                  </Row>\r\n                </Col>\r\n                <Col span={4}>\r\n                  <Row>\r\n                    <Tag>{FlgArType[trip.flgAr]}</Tag>\r\n                  </Row>\r\n                  <Row>\r\n                    <Tag color=\"cyan\">{ServiceTargetRoleType[trip.type]}</Tag>\r\n                  </Row>\r\n                  <Row>{trip.flgNurse === 1 ? <Tag color=\"blue\">Con infermiere</Tag> : undefined}</Row>\r\n                </Col>\r\n                <Col span={5}>\r\n                  <Row>\r\n                    <b>Paziente: </b>\r\n                    {trip.patientData || '-'}\r\n                  </Row>\r\n                  <Row>\r\n                    <b>Servizio: </b>\r\n                    {trip.serviceType || '-'}\r\n                  </Row>\r\n                  <Row>{trip.notes}</Row>\r\n                </Col>\r\n                <Col span={this.isUserAdmin ? 5 : 7}>\r\n                  <Row>{users}</Row>\r\n                </Col>\r\n                {this.isUserAdmin ? (\r\n                  <Col\r\n                    span={2}\r\n                    style={{\r\n                      textAlign: 'center',\r\n                      padding: '10px'\r\n                    }}\r\n                  >\r\n                    <Tooltip title=\"Modifica\">\r\n                      <Button size=\"small\" icon=\"edit\" onClick={() => this._onEditTrip(trip)} />\r\n                    </Tooltip>\r\n                    <Tooltip title=\"Duplica\">\r\n                      <Button icon=\"copy\" size=\"small\" style={{ marginLeft: '1px' }} onClick={() => this._onDuplicateTrip(trip)} />\r\n                    </Tooltip>\r\n                    <Popconfirm\r\n                      placement=\"topLeft\"\r\n                      title={\"Confermare l'eliminazione del servizio?\"}\r\n                      onConfirm={() => this._onDeleteTrip(trip.id)}\r\n                      okText=\"Si\"\r\n                      cancelText=\"No\"\r\n                    >\r\n                      <Button size=\"small\" style={{ marginLeft: '1px' }} icon=\"delete\" type=\"danger\" />\r\n                    </Popconfirm>\r\n                  </Col>\r\n                ) : undefined}\r\n              </Row>\r\n            </Timeline.Item>\r\n          );\r\n        })}\r\n      </Timeline>\r\n    );\r\n  };\r\n\r\n  private _onConfirmRole = (role: number, trip: TripDTO, userId: number) => {\r\n    const tripToPublish: TripUsersDTO = {\r\n      id: 0,\r\n      tripId: trip.id,\r\n      userId,\r\n      role\r\n    };\r\n    const { rolesVisible } = this.state;\r\n    const newRolesVisible = rolesVisible.map((element: boolean) => false);\r\n    this.props.connector\r\n      .publishTripUser(tripToPublish)\r\n      .then((res) => {\r\n        message.success('Salvataggio completato');\r\n        this.setState({ rolesVisible: newRolesVisible }, () => {\r\n          this.loadData();\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        message.error('Si  verificato un errore nel salvataggio');\r\n      });\r\n  };\r\n\r\n  private renderRoleChoose = (trip: TripDTO) => {\r\n    const { users } = this.props;\r\n    return (\r\n      <RoleChoose\r\n        users={users.filter((user: UserDTO) => !!!user.committeeUser.disabled)}\r\n        isUserAdmin={this.isUserAdmin}\r\n        loggedUser={this.props.user as UserDTO}\r\n        onConfirmRole={(role: number, userId: number) => this._onConfirmRole(role, trip, userId)}\r\n      />\r\n    );\r\n  };\r\n\r\n  private _onCreate = () => {\r\n    this.setState({ selectedTrip: this.getEmptyTrip(), showForm: true });\r\n  };\r\n\r\n  private _onCloseTripForm = () => {\r\n    this.setState({ showForm: false, selectedTrip: undefined });\r\n  };\r\n\r\n  private _onCloseDuplicateTripForm = () => {\r\n    this.setState({ showDuplicateTripForm: false, selectedTrip: undefined });\r\n  };\r\n\r\n  private _onConfirmDuplicateTrip = async (trip: TripDTO, newDates: IDuplicateTripItem[]) => {\r\n    let withError: boolean = false;\r\n    for (let index = 0; index < newDates.length; index++) {\r\n      const newDate: IDuplicateTripItem = newDates[index];\r\n      const date: string = newDate.date.format('YYYY-MM-DD');\r\n      const hour: string = newDate.hour.format('HH:mm');\r\n      const newTrip: TripDTO = {\r\n        ...trip,\r\n        id: 0,\r\n        date,\r\n        hour\r\n      };\r\n\r\n      await this.props.connector\r\n        .publishTrip(newTrip)\r\n        .then((res) => {\r\n          console.log('_onConfirmDuplicateTrip done');\r\n        })\r\n        // eslint-disable-next-line\r\n        .catch((err) => {\r\n          withError = true;\r\n          console.error(`_onConfirmDuplicateTrip error for trip with date ${date} and hour ${hour}. Error: ${err}`);\r\n        });\r\n    }\r\n    this.setState({ showDuplicateTripForm: false, selectedTrip: undefined }, () => {\r\n      if (withError) {\r\n        message.error(`Si sono verificati degli errori durante l'operazione`);\r\n      } else {\r\n        message.success('Operazione completata con successo');\r\n      }\r\n      this.loadData();\r\n    });\r\n  };\r\n\r\n  private _onSave = (trip: TripDTO) => {\r\n    this.props.connector\r\n      .publishTrip(trip)\r\n      .then((res) => {\r\n        message.success('Salvataggio completato');\r\n        this.setState({ showForm: false, selectedTrip: undefined }, () => {\r\n          this.loadData();\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        message.error('Si  verificato un errore nel salvataggio');\r\n      });\r\n  };\r\n\r\n  private _onMoveViewRight = () => {\r\n    const { viewMode, firstDayOfView } = this.state;\r\n    var newFirstDayOfView = add(firstDayOfView, {\r\n      days: viewMode === ViewModeType.week ? 7 : 28\r\n    });\r\n    this.setState({\r\n      firstDayOfView: newFirstDayOfView,\r\n      selectedDate: newFirstDayOfView\r\n    });\r\n  };\r\n\r\n  private _onMoveViewLeft = () => {\r\n    const { viewMode, firstDayOfView } = this.state;\r\n    var newFirstDayOfView = add(firstDayOfView, {\r\n      days: viewMode === ViewModeType.week ? -7 : -28\r\n    });\r\n    this.setState({\r\n      firstDayOfView: newFirstDayOfView,\r\n      selectedDate: newFirstDayOfView\r\n    });\r\n  };\r\n\r\n  public render() {\r\n    const { selectedTrip, showForm, showDuplicateTripForm, vehicles } = this.state;\r\n    const { user } = this.props;\r\n    return (\r\n      <div>\r\n        <div style={{ textAlign: 'end', margin: 10 }}>\r\n          Visualizzazione:\r\n          <Radio.Group defaultValue={this.state.viewMode} size=\"default\" onChange={this._onChangeView} style={{ marginLeft: 5 }}>\r\n            <Radio.Button value={ViewModeType.week}>Settimana</Radio.Button>\r\n            <Radio.Button value={ViewModeType.month}>Mese</Radio.Button>\r\n          </Radio.Group>\r\n        </div>\r\n        <div>\r\n          <div>{this.renderDays()}</div>\r\n          <Card style={{ width: '100%', height: '100%', borderRadius: '10px' }}>{this.renderTimeline()}</Card>\r\n        </div>\r\n        <TripForm\r\n          visible={showForm}\r\n          trip={selectedTrip}\r\n          vehicles={vehicles.filter((vehicle: VehicleDTO) => !!!vehicle.disabled)}\r\n          onClose={this._onCloseTripForm}\r\n          onSave={this._onSave}\r\n        />\r\n        <DuplicateTripForm\r\n          visible={showDuplicateTripForm}\r\n          trip={selectedTrip}\r\n          onClose={this._onCloseDuplicateTripForm}\r\n          onConfirm={this._onConfirmDuplicateTrip}\r\n        />\r\n        {showForm || showDuplicateTripForm || (user && user.committeeUser.role > 1) ? undefined : <PlusFabButton onClick={this._onCreate} />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: any, ownProps: any) => {\r\n  return {\r\n    user: state.appData.user,\r\n    connector: state.appData.connector,\r\n    committee: state.appData.committee,\r\n    users: state.appData.users\r\n  };\r\n};\r\nconst ServicesContainer = connect(mapStateToProps)(Services);\r\nexport default ServicesContainer;\r\n","import LoggedUserInfoDTO from '../dto/LoggedUserInfoDTO';\r\nimport { LOGGED_USER_INFO_LOCAL_STORAGE_KEY } from './Constants';\r\n\r\nexport const setUserInfo = (userInfo: string) => {\r\n  localStorage.setItem(LOGGED_USER_INFO_LOCAL_STORAGE_KEY, JSON.stringify(userInfo));\r\n};\r\n\r\nexport const getUserInfo = (): LoggedUserInfoDTO | undefined => {\r\n  const loggedUserInfo: string | null = localStorage.getItem(LOGGED_USER_INFO_LOCAL_STORAGE_KEY);\r\n  if (loggedUserInfo) {\r\n    const loggedUserInfoDto: LoggedUserInfoDTO = JSON.parse(loggedUserInfo);\r\n    return loggedUserInfoDto;\r\n  }\r\n  return undefined;\r\n};\r\n\r\nexport const resetUserInfo = () => {\r\n  localStorage.removeItem(LOGGED_USER_INFO_LOCAL_STORAGE_KEY);\r\n};\r\n","export const PORTAL_NAME: string = \"Servizio Facile v.1.0\";\r\nexport const LOGGED_USER_INFO_LOCAL_STORAGE_KEY : string = 'redcross-logged-userinfo';","import axios, { AxiosInstance } from 'axios';\r\nimport VehicleDTO from '../dto/VehicleDTO';\r\nimport UserDTO from '../dto/UserDTO';\r\nimport CommitteeUserDTO from '../dto/CommitteeUserDTO';\r\nimport TripDTO from '../dto/TripDTO';\r\nimport TripUsersDTO from '../dto/TripUsersDTO';\r\nimport { getUserInfo } from './Utils';\r\nimport LoggedUserInfoDTO from '../dto/LoggedUserInfoDTO';\r\n\r\nexport class Connector {\r\n  private axiosInstance: AxiosInstance;\r\n\r\n  constructor() {\r\n    const headers = {\r\n      'Content-Type': 'application/json'\r\n    };\r\n\r\n    let baseURL: string | undefined = undefined;\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\r\n      baseURL = 'http://localhost:3001';\r\n    }\r\n    this.axiosInstance = axios.create({\r\n      baseURL,\r\n      headers\r\n    });\r\n  }\r\n\r\n  public async getCommittees(): Promise<any> {\r\n    const operation = 'api/committees';\r\n    return await this.call(operation);\r\n  }\r\n\r\n  public async getVehicles(committeeId: number): Promise<any> {\r\n    const operation = `api/vehicles/findByCommittee/${committeeId}`;\r\n    return await this.call(operation);\r\n  }\r\n\r\n  public async publishVehicle(vehicle: VehicleDTO): Promise<any> {\r\n    const { id } = vehicle;\r\n    const operation = `api/vehicles/${id > 0 ? id : ''}`;\r\n    const body = JSON.stringify(vehicle);\r\n    return await this.call(operation, body, id > 0 ? 'PUT' : 'POST');\r\n  }\r\n\r\n  public async deleteVehicle(vehicle: VehicleDTO): Promise<any> {\r\n    const { id } = vehicle;\r\n    const operation = `api/vehicles/${id}`;\r\n    return await this.call(operation, undefined, 'DELETE');\r\n  }\r\n\r\n  public async deleteTripUsersByTrip(tripId: number): Promise<any> {\r\n    const operation = `api/trips_users/deleteByTrip/${tripId}`;\r\n    return await this.call(operation, undefined, 'DELETE');\r\n  }\r\n\r\n  public async deleteTripUsers(tripUserId: number): Promise<any> {\r\n    const operation = `api/trips_users/${tripUserId}`;\r\n    return await this.call(operation, undefined, 'DELETE');\r\n  }\r\n\r\n  public async deleteCommitteesUsers(userId: number): Promise<any> {\r\n    const operation = `api/committees_users/deleteByUserId/${userId}`;\r\n    return await this.call(operation, undefined, 'DELETE');\r\n  }\r\n\r\n  public async getUserTrips(userId: number): Promise<any> {\r\n    const operation = `api/trips_users/findByUserId/${userId}`;\r\n    return await this.call(operation);\r\n  }\r\n\r\n  public async deleteTrip(tripId: number): Promise<any> {\r\n    const operation = `api/trips/${tripId}`;\r\n    return await this.call(operation, undefined, 'DELETE');\r\n  }\r\n\r\n  public async getTrips(committeeId: number): Promise<any> {\r\n    const operation = `api/trips/findByCommittee/${committeeId}`;\r\n    return await this.call(operation);\r\n  }\r\n\r\n  public async publishTrip(trip: TripDTO): Promise<any> {\r\n    const { id } = trip;\r\n    const operation = `api/trips/${id > 0 ? id : ''}`;\r\n    const body = JSON.stringify(trip);\r\n    return await this.call(operation, body, id > 0 ? 'PUT' : 'POST');\r\n  }\r\n\r\n  public async publishTripUser(tripUser: TripUsersDTO): Promise<any> {\r\n    const { id } = tripUser;\r\n    const operation = `api/trips_users/${id > 0 ? id : ''}`;\r\n    const body = JSON.stringify(tripUser);\r\n    return await this.call(operation, body, id > 0 ? 'PUT' : 'POST');\r\n  }\r\n\r\n  public async getUser(userId: number): Promise<any> {\r\n    const operation = `api/users/${userId}`;\r\n    return await this.call(operation);\r\n  }\r\n\r\n  public async getUsers(committeeId: number): Promise<any> {\r\n    const operation = `api/users/findByCommittee/${committeeId}`;\r\n    return await this.call(operation);\r\n  }\r\n\r\n  public async deleteUser(userId: number): Promise<any> {\r\n    const operation = `api/users/${userId}`;\r\n    return await this.call(operation, undefined, 'DELETE');\r\n  }\r\n\r\n  public async deleteCommitteeUser(committeeUserId: number): Promise<any> {\r\n    const operation = `api/committees_users/${committeeUserId}`;\r\n    return await this.call(operation, undefined, 'DELETE');\r\n  }\r\n\r\n  public async publishUser(user: UserDTO): Promise<any> {\r\n    const { id } = user;\r\n    const operation = `api/users/${id > 0 ? id : ''}`;\r\n    const body = JSON.stringify(user);\r\n    return this.call(operation, body, id > 0 ? 'PUT' : 'POST');\r\n  }\r\n\r\n  public async publishUserCommittee(user: UserDTO, committeeUserInfo: CommitteeUserDTO): Promise<any> {\r\n    const userResponse = await this.publishUser(user);\r\n    if (userResponse.status !== 200) {\r\n      console.log(userResponse);\r\n      throw new Error(`Si  verificato un errore nell'inserimento`);\r\n    }\r\n\r\n    const { id } = user;\r\n    const publishedUser: UserDTO = userResponse.data;\r\n    const committeeUser: CommitteeUserDTO = {\r\n      id: committeeUserInfo.id,\r\n      userId: id > 0 ? id : publishedUser.id,\r\n      committeeId: committeeUserInfo.committeeId,\r\n      role: committeeUserInfo.role,\r\n      occupation: committeeUserInfo.occupation,\r\n      disabled: committeeUserInfo.disabled\r\n    };\r\n    const bodyCommUser = JSON.stringify(committeeUser);\r\n    const operationCommUser = `api/committees_users/${committeeUserInfo.id > 0 ? committeeUserInfo.id : ''}`;\r\n    return await this.call(operationCommUser, bodyCommUser, committeeUserInfo.id > 0 ? 'PUT' : 'POST');\r\n  }\r\n\r\n  public async signin(username: string, password: string, committeeId: number): Promise<any> {\r\n    let baseURL: string | undefined = undefined;\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\r\n      baseURL = 'http://localhost:3001';\r\n    }\r\n    const tempInstance = axios.create({\r\n      baseURL\r\n    });\r\n    return tempInstance({\r\n      url: `api/auth/signin`,\r\n      method: 'POST',\r\n      data: {\r\n        username,\r\n        password,\r\n        committeeId\r\n      }\r\n    });\r\n  }\r\n\r\n  public async findUserByUsername(username: string, password: string): Promise<any> {\r\n    const operation = `api/users/findbyusername/${username}`;\r\n    const hash: string = btoa(`${username}:${password}`);\r\n    const headers = {\r\n      Authorization: `Basic ${hash}`\r\n    };\r\n    let baseURL: string | undefined = undefined;\r\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\r\n      baseURL = 'http://localhost:3001';\r\n    }\r\n    const tempInstance = axios.create({\r\n      baseURL,\r\n      headers\r\n    });\r\n    return tempInstance({\r\n      url: operation,\r\n      method: 'GET'\r\n    });\r\n  }\r\n\r\n  private authHeader = () => {\r\n    const userInfo: LoggedUserInfoDTO | undefined = getUserInfo();\r\n    if (userInfo && userInfo.accessToken) {\r\n      // for Node.js Express back-end\r\n      return { 'x-access-token': userInfo.accessToken };\r\n    } else {\r\n      return {};\r\n    }\r\n  };\r\n\r\n  /**\r\n   * @param url\r\n   * @param body stringa (in json) oppure UrlSearchParams per gli environment\r\n   * @param method\r\n   */\r\n  private async call(url: string, body?: string, method: 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE' = 'GET'): Promise<any> {\r\n    return this.axiosInstance({\r\n      url,\r\n      method,\r\n      headers: this.authHeader(),\r\n      data: body\r\n    });\r\n  }\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport { TReducerActions, ReduxActionTypes } from '../actions/action';\r\nimport { Connector } from '../utils/Connector';\r\nimport UserDTO from '../dto/UserDTO';\r\nimport CommitteeDTO from '../dto/CommitteeDTO';\r\nimport { resetUserInfo } from '../utils/Utils';\r\n\r\nexport interface IAppDataState extends IWithUser, IWithCommittee, IWIthConnector {\r\n  user: UserDTO | undefined;\r\n  accessToken: string;\r\n  committee: CommitteeDTO | undefined;\r\n  users: UserDTO[];\r\n  showLoading: boolean;\r\n  connector: Connector;\r\n}\r\n\r\nconst stateDefault: IAppDataState = {\r\n  user: undefined,\r\n  accessToken: '',\r\n  committee: undefined,\r\n  users: [],\r\n  connector: new Connector(),\r\n  showLoading: false\r\n};\r\n\r\nexport interface IWithUser {\r\n  user: UserDTO | undefined;\r\n}\r\n\r\nexport interface IWithUsers {\r\n  users: UserDTO[];\r\n}\r\n\r\nexport interface IWithCommittee {\r\n  committee: CommitteeDTO | undefined;\r\n}\r\n\r\nexport interface IWIthConnector {\r\n  connector: Connector;\r\n}\r\n\r\nconst appData = (state: IAppDataState = stateDefault, action: TReducerActions): IAppDataState => {\r\n  switch (action.type) {\r\n    case ReduxActionTypes.SET_ACCESS_TOKEN:\r\n      const { accessToken } = action.data;\r\n      const connector = new Connector();\r\n      return {\r\n        ...state,\r\n        accessToken,\r\n        connector\r\n      };\r\n    case ReduxActionTypes.SET_USER_DATA:\r\n      const { user, committeeId } = action.data;\r\n      let normalizedUser = (user && { ...user }) || undefined;\r\n      if (user) {\r\n        if ((user as any).committee_users) {\r\n          normalizedUser = {\r\n            ...user,\r\n            committeeUser: (user as any).committee_users.find((committee_user: any) => committee_user.committeeId === committeeId)\r\n          };\r\n        }\r\n      }\r\n      const newState = {\r\n        ...state,\r\n        user: normalizedUser\r\n      };\r\n      return newState;\r\n    case ReduxActionTypes.SET_COMMITTEE_DATA:\r\n      const { committee } = action.data;\r\n      return {\r\n        ...state,\r\n        committee\r\n      };\r\n    case ReduxActionTypes.SET_SHOW_LOADING:\r\n      return { ...state, showLoading: action.data };\r\n    case ReduxActionTypes.RESET_AUTH_DATA:\r\n      resetUserInfo();\r\n      return {\r\n        ...state,\r\n        user: undefined,\r\n        committee: undefined,\r\n        connector: new Connector(),\r\n        accessToken: '',\r\n        users: []\r\n      };\r\n    case ReduxActionTypes.SET_USERS_DATA:\r\n      const { users } = action.data;\r\n      const normalizedUsers: any = (users || []).map((userToNormalize: UserDTO) => {\r\n        return {\r\n          ...userToNormalize,\r\n          committeeUser: (userToNormalize as any).committee_users[0]\r\n        };\r\n      });\r\n      return {\r\n        ...state,\r\n        users: normalizedUsers\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst AppReducers = combineReducers({\r\n  appData\r\n});\r\n\r\nexport default AppReducers;\r\n","export const Links = {\r\n  LOGIN: '/',\r\n  LOGOUT: '/',\r\n  SERVICES: '/services',\r\n  USERS: '/users',\r\n  VEHICLES: '/vehicles',\r\n  PERSONAL_AREA: '/personal_area'\r\n};\r\n","import * as React from 'react';\r\nimport { Button, Col, Form, message, Modal, Row, Input, Select, Icon } from 'antd';\r\nimport { connect } from 'react-redux';\r\nimport { IWithUser, IWIthConnector } from '../reducers/reducers';\r\nimport {\r\n  setUserData,\r\n  setAccessToken,\r\n  setCommitteeData,\r\n  setUsersData,\r\n  ISetUserDataProps,\r\n  ISetCommitteeDataProps,\r\n  ISetUsersDataProps,\r\n  ISetAccessTokenProps\r\n} from '../actions/action';\r\nimport { Connector } from '../utils/Connector';\r\nimport CommitteeDTO from '../dto/CommitteeDTO';\r\nimport { FormComponentProps } from 'antd/lib/form/Form';\r\nimport { Links } from '../utils/Links';\r\nimport { RouterProps } from 'react-router';\r\nimport { PORTAL_NAME } from '../utils/Constants';\r\nimport { getUserInfo, setUserInfo } from '../utils/Utils';\r\n\r\nconst { Option } = Select;\r\n\r\ninterface ILoginFormState {\r\n  committees: CommitteeDTO[];\r\n  loading: boolean;\r\n}\r\n\r\nclass LoginForm extends React.Component<\r\n  IWithUser & IWIthConnector & ISetUserDataProps & ISetAccessTokenProps & ISetCommitteeDataProps & ISetUsersDataProps & FormComponentProps & RouterProps,\r\n  ILoginFormState\r\n> {\r\n  state = {\r\n    committees: [],\r\n    loading: false\r\n  };\r\n\r\n  connector: Connector | undefined;\r\n\r\n  componentDidMount() {\r\n    const userInfo = getUserInfo();\r\n    if (userInfo) {\r\n      this.login(userInfo.id, userInfo.committeeId);\r\n    }\r\n    this.props.connector\r\n      .getCommittees()\r\n      .then((res) => {\r\n        this.setState(\r\n          {\r\n            ...this.state,\r\n            committees: res.data\r\n          },\r\n          () => {\r\n            if (res.data && res.data[0]) {\r\n              this.handleSelectChange(res.data[0].id);\r\n              if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\r\n                this.props.form.setFieldsValue({\r\n                  username: 'f.marchetti',\r\n                  password: 'default'\r\n                });\r\n              }\r\n            }\r\n          }\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  handleSelectChange = (value: number) => {\r\n    this.props.form.setFieldsValue({\r\n      committeeId: value\r\n    });\r\n  };\r\n\r\n  private buildCommitteesSelect = () => {\r\n    const { committees } = this.state;\r\n    if (committees.length === 0) {\r\n      return <Icon type=\"loading\" />;\r\n    }\r\n\r\n    const { getFieldDecorator } = this.props.form;\r\n    return (\r\n      <Form.Item>\r\n        {getFieldDecorator('committeeId', {\r\n          rules: [{ required: true, message: 'Selezionare il comitato' }]\r\n        })(\r\n          <Select onChange={this.handleSelectChange}>\r\n            {committees.map((committee: CommitteeDTO) => (\r\n              <Option key={committee.id} value={committee.id}>\r\n                {committee.description}\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n        )}\r\n      </Form.Item>\r\n    );\r\n  };\r\n\r\n  private login = (userId: number, committeeId: number) => {\r\n    const { connector } = this.props;\r\n    connector\r\n      .getUser(userId)\r\n      .then((res) => {\r\n        const user = res.data;\r\n        const committee_users: Array<any> = user.committee_users;\r\n        if (committee_users) {\r\n          const founded = committee_users.find((element) => element.committeeId === committeeId);\r\n          if (!founded || founded.disabled === 1) {\r\n            message.error('Utente non abilitato al comitato selezionato');\r\n          } else {\r\n            this.props.setUserData(user, committeeId);\r\n            this.props.setCommitteeData(founded.committee);\r\n            this.props.connector\r\n              .getUsers(committeeId)\r\n              .then((uRes) => {\r\n                message.success('Autenticato');\r\n                this.props.setUsersData(uRes.data);\r\n                this.props.history.push(Links.SERVICES);\r\n              })\r\n              .catch((uErr) => {\r\n                message.error(`Si  verificato un errore nel recupero degli utenti`);\r\n              });\r\n          }\r\n        } else {\r\n          message.error('Utente non abilitato al comitato selezionato');\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        message.error(`Si  verificato un errore. Contattare l'amministratore di sistema.`);\r\n      });\r\n  };\r\n\r\n  private handleSubmit = (e: any) => {\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        this.setState({ loading: true }, () => {\r\n          const committeeId = values.committeeId;\r\n          const { username, password } = values;\r\n          this.props.connector\r\n            .signin(username, password, committeeId)\r\n            .then((res) => {\r\n              const { id, committeeId } = res.data;\r\n              setUserInfo(res.data);\r\n              this.setState({ loading: false }, () => this.login(id, committeeId));\r\n            })\r\n            .catch((err) => {\r\n              let errorMessage = 'Username e password non validi';\r\n              const { response } = err;\r\n              if (response) {\r\n                const { data } = response;\r\n                if (data) {\r\n                  errorMessage = data.message;\r\n                }\r\n              }\r\n              this.setState({ loading: false }, () => message.error(errorMessage));\r\n              console.error(err);\r\n            });\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  public render() {\r\n    const { getFieldDecorator } = this.props.form;\r\n    const { committees } = this.state;\r\n    return (\r\n      <Modal visible={true} closable={false} confirmLoading={false} footer={null}>\r\n        <div style={{ textAlign: 'right' }}>\r\n          <b>{PORTAL_NAME}</b>\r\n        </div>\r\n        <Row gutter={8}>\r\n          <Col span={24}>\r\n            <img alt={''} src={process.env.PUBLIC_URL + '/red_cross_logo.png'} width=\"100%\" />\r\n          </Col>\r\n        </Row>\r\n        <Form onSubmit={this.handleSubmit} className=\"login-form\">\r\n          <Form.Item>\r\n            {getFieldDecorator('username', {\r\n              rules: [{ required: true, message: 'Username obbligatoria' }]\r\n            })(<Input prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"Digitare il proprio username\" />)}\r\n          </Form.Item>\r\n          <Form.Item>\r\n            {getFieldDecorator('password', {\r\n              rules: [{ required: true, message: 'Password obbligatoria' }]\r\n            })(<Input prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} type=\"password\" placeholder=\"Digitare la propria password\" />)}\r\n          </Form.Item>\r\n          {this.buildCommitteesSelect()}\r\n          <Form.Item>\r\n            <Button\r\n              loading={this.state.loading}\r\n              disabled={committees === null || committees === undefined || committees.length === 0}\r\n              type=\"primary\"\r\n              htmlType=\"submit\"\r\n              style={{ width: '100%' }}\r\n              className=\"login-form-button\"\r\n            >\r\n              Log in\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nconst WrappeLoginForm = Form.create({ name: 'normal_login' })(LoginForm);\r\nconst mapStateToProps = (state: any, ownProps: any) => {\r\n  return {\r\n    user: state.appData.user,\r\n    connector: state.appData.connector\r\n  };\r\n};\r\nconst LoginContainer = connect(mapStateToProps, {\r\n  setUserData,\r\n  setAccessToken,\r\n  setCommitteeData,\r\n  setUsersData\r\n})(WrappeLoginForm);\r\nexport default LoginContainer;\r\n","import * as React from 'react';\r\nimport { Fab } from 'react-tiny-fab';\r\n\r\nexport interface PlusFabButtonProps {\r\n  onClick: () => void;\r\n}\r\n\r\nclass PlusFabButton extends React.Component<PlusFabButtonProps, any> {\r\n  public render() {\r\n    return (\r\n      <Fab\r\n        mainButtonStyles={{ backgroundColor: '#1890ff' }}\r\n        alwaysShowTitle={false}\r\n        event={'click'}\r\n        icon={<span>+</span>}\r\n        position={{ bottom: 25, right: 25 }}\r\n        onClick={this.props.onClick}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default PlusFabButton;\r\n","import CommitteeUserDTO from './CommitteeUserDTO';\r\n\r\nexport default interface UserDTO {\r\n  id: number;\r\n  username: string;\r\n  password: string;\r\n  flgPasswordChanged: number;\r\n  name: string;\r\n  surname: string;\r\n  birth_date?: Date;\r\n  email?: string;\r\n  gender: number;\r\n  superuser: number;\r\n  withDrivingLicense: number;\r\n  committeeUser: CommitteeUserDTO;\r\n}\r\n\r\nexport const UserRoleType: { [code: number]: string } = {\r\n  0: 'Superuser',\r\n  1: 'Admin',\r\n  2: 'Utente'\r\n};\r\n\r\nexport const UserOccupationType: { [code: number]: string } = {\r\n  0: 'Dipendente',\r\n  1: 'Volontario',\r\n  2: 'Medico/Sanitario',\r\n  3: 'Altro'\r\n};\r\n\r\nexport const UserGenderType: { [code: number]: string } = {\r\n  0: 'Maschio',\r\n  1: 'Femmina',\r\n};\r\n","import * as React from 'react';\r\nimport { Form, Button, Col, Row, Input, Select, DatePicker, Switch } from 'antd';\r\nimport { FormComponentProps } from 'antd/lib/form/Form';\r\nimport UserDTO, { UserGenderType, UserRoleType, UserOccupationType } from '../../dto/UserDTO';\r\nimport moment from 'moment';\r\n\r\nconst { Option } = Select;\r\n\r\nexport interface IUserFormProps {\r\n  loggedUserId: number;\r\n  user: UserDTO | undefined;\r\n  personalArea?: boolean;\r\n  onCancel: () => void;\r\n  onSave: (user: UserDTO) => void;\r\n}\r\n\r\nclass User extends React.Component<IUserFormProps & FormComponentProps> {\r\n  private getInitialValueBirthDate = () => {\r\n    const { user } = this.props;\r\n    return user?.birth_date ? moment(user.birth_date) : undefined;\r\n  };\r\n\r\n  private handleSubmit = (e: any) => {\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        const userToSave: UserDTO = {\r\n          ...values,\r\n          birth_date: values.birth_date ? values.birth_date.format('YYYY-MM-DD') : undefined,\r\n          committeeUser: {\r\n            id: values.committeeUserId,\r\n            userId: values.id,\r\n            committeeId: values.committeeId,\r\n            role: values.role,\r\n            occupation: values.occupation,\r\n            disabled: values.disabled\r\n          }\r\n        };\r\n        this.props.onSave(userToSave);\r\n      }\r\n    });\r\n  };\r\n\r\n  public render() {\r\n    const { getFieldDecorator } = this.props.form;\r\n    const { user, onCancel, personalArea } = this.props;\r\n    return (\r\n      <Form layout=\"vertical\" onSubmit={this.handleSubmit}>\r\n        <Row gutter={16}>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Username\">\r\n              {getFieldDecorator('username', {\r\n                initialValue: this.props.user?.username,\r\n                rules: [{ required: true, message: 'Specificare il nome utente' }]\r\n              })(<Input disabled={user && user.id > 0} placeholder=\"Specificare il nome utente\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Password\">\r\n              {getFieldDecorator('password', {\r\n                initialValue: this.props.user?.password,\r\n                rules: [{ required: true, message: 'Specificare la password' }]\r\n              })(\r\n                personalArea ? (\r\n                  <Input.Password disabled={true} placeholder=\"Specificare la password\" />\r\n                ) : (\r\n                  <Input disabled={user && user.id > 0} type=\"password\" placeholder=\"Specificare la password\" />\r\n                )\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row gutter={16}>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Nome\">\r\n              {getFieldDecorator('name', {\r\n                initialValue: this.props.user?.name,\r\n                rules: [{ required: true, message: 'Specificare il nome' }]\r\n              })(<Input placeholder=\"Specificare il nome\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Cognome\">\r\n              {getFieldDecorator('surname', {\r\n                initialValue: this.props.user?.surname,\r\n                rules: [{ required: true, message: 'Specificare il cognome' }]\r\n              })(<Input placeholder=\"Specificare il cognome\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row gutter={16}>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Data di nascita\">\r\n              {getFieldDecorator('birth_date', {\r\n                initialValue: this.getInitialValueBirthDate(),\r\n                rules: []\r\n              })(<DatePicker format=\"DD-MM-YYYY\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Sesso\">\r\n              {getFieldDecorator('gender', {\r\n                initialValue: this.props.user?.gender,\r\n                rules: [\r\n                  {\r\n                    required: true,\r\n                    message: 'Specificare il sesso'\r\n                  }\r\n                ]\r\n              })(\r\n                <Select placeholder=\"Sesso\">\r\n                  <Option value={0}>{UserGenderType[0]}</Option>\r\n                  <Option value={1}>{UserGenderType[1]}</Option>\r\n                </Select>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row gutter={16}>\r\n          <Col span={24}>\r\n            <Form.Item label=\"Email\">\r\n              {getFieldDecorator('email', {\r\n                initialValue: this.props.user?.email,\r\n                rules: []\r\n              })(<Input placeholder=\"Specificare l'email\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row gutter={16} style={{ visibility: personalArea ? 'collapse' : 'visible' }}>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Ruolo\">\r\n              {getFieldDecorator('role', {\r\n                initialValue: this.props.user?.committeeUser.role,\r\n                rules: [\r\n                  {\r\n                    required: true,\r\n                    message: 'Specificare il ruolo'\r\n                  }\r\n                ]\r\n              })(\r\n                <Select placeholder=\"Role\">\r\n                  <Option value={1}>{UserRoleType[1]}</Option>\r\n                  <Option value={2}>{UserRoleType[2]}</Option>\r\n                </Select>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Occupazione\">\r\n              {getFieldDecorator('occupation', {\r\n                initialValue: this.props.user?.committeeUser.occupation,\r\n                rules: [\r\n                  {\r\n                    required: true,\r\n                    message: `Specificare l'occupazione`\r\n                  }\r\n                ]\r\n              })(\r\n                <Select placeholder=\"Occupazione\">\r\n                  <Option value={0}>{UserOccupationType[0]}</Option>\r\n                  <Option value={1}>{UserOccupationType[1]}</Option>\r\n                  <Option value={2}>{UserOccupationType[2]}</Option>\r\n                </Select>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row style={{ visibility: personalArea ? 'collapse' : 'visible' }}>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Con patente\">\r\n              {getFieldDecorator('withDrivingLicense', {\r\n                initialValue: this.props.user?.withDrivingLicense,\r\n                valuePropName: 'checked'\r\n              })(<Switch />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Disabilita\">\r\n              {getFieldDecorator('disabled', {\r\n                initialValue: this.props.user?.committeeUser.disabled,\r\n                valuePropName: 'checked'\r\n              })(<Switch />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row gutter={16} style={{ visibility: 'collapse' }}>\r\n          <Col span={6}>\r\n            <Form.Item label=\"Id\">\r\n              {getFieldDecorator('id', {\r\n                initialValue: this.props.user?.id\r\n              })(<Input placeholder=\"Specificare id utente\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={6}>\r\n            <Form.Item label=\"Password modificata\">\r\n              {getFieldDecorator('flgPasswordChanged', {\r\n                initialValue: this.props.user?.flgPasswordChanged\r\n              })(<Input placeholder=\"Password modificata\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={6}>\r\n            <Form.Item label=\"CommitteeUserId\">\r\n              {getFieldDecorator('committeeUserId', {\r\n                initialValue: this.props.user?.committeeUser.id\r\n              })(<Input placeholder=\"CommitteeUserId\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={6}>\r\n            <Form.Item label=\"CommitteeId\">\r\n              {getFieldDecorator('committeeId', {\r\n                initialValue: this.props.user?.committeeUser.committeeId\r\n              })(<Input placeholder=\"CommitteeId\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <div\r\n          style={{\r\n            position: 'absolute',\r\n            right: 0,\r\n            bottom: 0,\r\n            width: '100%',\r\n            borderTop: '1px solid #e9e9e9',\r\n            padding: '10px 16px',\r\n            background: '#fff',\r\n            textAlign: 'right'\r\n          }}\r\n        >\r\n          <Button onClick={onCancel} style={{ marginRight: 8 }}>\r\n            Annulla\r\n          </Button>\r\n          <Button htmlType=\"submit\" type=\"primary\">\r\n            Salva\r\n          </Button>\r\n        </div>\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n\r\nconst UserContainer = Form.create({ name: 'user_form ' })(User);\r\nclass UserForm extends React.Component<IUserFormProps> {\r\n  public render() {\r\n    return <UserContainer {...this.props} />;\r\n  }\r\n}\r\n\r\nexport default UserForm;\r\n","import * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { IWIthConnector, IWithCommittee, IWithUser, IWithUsers } from '../reducers/reducers';\r\nimport { Spin, Button, Popconfirm, Icon, Tooltip, Drawer } from 'antd';\r\nimport { message, Table } from 'antd';\r\nimport 'react-tiny-fab/dist/styles.css';\r\nimport PlusFabButton from './base/PlusFabButton';\r\nimport UserDTO, { UserRoleType, UserOccupationType } from '../dto/UserDTO';\r\nimport UserForm from './forms/UserForm';\r\nimport { setUsersData, ISetUsersDataProps } from '../actions/action';\r\nimport TripUsersDTO from '../dto/TripUsersDTO';\r\n\r\ninterface IUsersState {\r\n  loading: boolean;\r\n  showForm: boolean;\r\n  selectedUser?: UserDTO;\r\n}\r\n\r\nclass Users extends React.Component<IWithUser & IWithUsers & IWIthConnector & IWithCommittee & ISetUsersDataProps, IUsersState> {\r\n  columns = [\r\n    {\r\n      title: 'Username',\r\n      dataIndex: 'username',\r\n      key: 'username',\r\n      render: (value: any, record: any) => <b>{value}</b>\r\n    },\r\n    {\r\n      title: 'Nome',\r\n      dataIndex: 'name',\r\n      key: 'name'\r\n    },\r\n    {\r\n      title: 'Cognome',\r\n      dataIndex: 'surname',\r\n      key: 'surname'\r\n    },\r\n    {\r\n      title: 'Data di nascita',\r\n      dataIndex: 'birth_date',\r\n      key: 'birth_date'\r\n    },\r\n    {\r\n      title: 'Ruolo',\r\n      dataIndex: 'committeeUser.role',\r\n      key: 'role',\r\n      render: (value: any, record: any) => <span>{UserRoleType[value]}</span>\r\n    },\r\n    {\r\n      title: 'Occupazione',\r\n      dataIndex: 'committeeUser.occupation',\r\n      key: 'occupation',\r\n      render: (value: any, record: any) => <span>{UserOccupationType[value]}</span>\r\n    },\r\n    {\r\n      title: 'Con patente',\r\n      dataIndex: 'withDrivingLicense',\r\n      key: 'withDrivingLicense',\r\n      render: (value: any, record: any) => <p>{value === 0 ? undefined : <Icon type=\"check\" />}</p>\r\n    },\r\n    {\r\n      title: 'Disabilitato',\r\n      dataIndex: 'committeeUser.disabled',\r\n      key: 'disabled',\r\n      render: (value: any, record: any) => <p>{value === 0 ? undefined : <Icon type=\"check\" />}</p>\r\n    },\r\n    {\r\n      title: '',\r\n      key: 'action',\r\n      render: (text: any, record: UserDTO) => (\r\n        <span>\r\n          <Tooltip title=\"Modifica\">\r\n            <Button size=\"small\" icon=\"edit\" onClick={() => this._onEditRow(record)} />\r\n          </Tooltip>\r\n          <Popconfirm\r\n            placement=\"topLeft\"\r\n            title={`Confermare l'eliminazione dell'utente?`}\r\n            onConfirm={() => this._onDeleteUser(record)}\r\n            okText=\"Si\"\r\n            cancelText=\"No\"\r\n          >\r\n            <Button size=\"small\" style={{ marginLeft: '1px' }} icon=\"delete\" type=\"danger\" />\r\n          </Popconfirm>\r\n        </span>\r\n      )\r\n    }\r\n  ];\r\n\r\n  emptyUser: UserDTO = {\r\n    id: 0,\r\n    username: '',\r\n    password: '',\r\n    flgPasswordChanged: 0,\r\n    name: '',\r\n    surname: '',\r\n    birth_date: undefined,\r\n    email: undefined,\r\n    gender: 0,\r\n    withDrivingLicense: 0,\r\n    superuser: 0,\r\n    committeeUser: {\r\n      id: 0,\r\n      committeeId: this.props.committee?.id || 0,\r\n      userId: 0,\r\n      role: 2,\r\n      occupation: 0,\r\n      disabled: 0\r\n    }\r\n  };\r\n\r\n  state: IUsersState = {\r\n    loading: false,\r\n    showForm: false\r\n  };\r\n\r\n  private loadData = () => {\r\n    const { committee } = this.props;\r\n    if (committee !== undefined) {\r\n      this.props.connector\r\n        .getUsers(committee.id)\r\n        .then((res) => {\r\n          this.setState({ loading: false }, () => {\r\n            this.props.setUsersData(res.data);\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          message.error(`Si  verificato un errore nella lettura degli utenti`);\r\n          this.setState({ loading: false });\r\n          console.error(err);\r\n        });\r\n    }\r\n  };\r\n\r\n  private _onClose = () => {\r\n    this.setState({ showForm: false, selectedUser: undefined });\r\n  };\r\n\r\n  private _onEditRow = (selectedUser: UserDTO) => {\r\n    this.setState({ selectedUser, showForm: true });\r\n  };\r\n\r\n  private _onDeleteUser = (user: UserDTO) => {\r\n    this.props.connector\r\n      .getUserTrips(user.id)\r\n      .then((res) => {\r\n        const tripUsers: TripUsersDTO[] = res.data || [];\r\n        if (tripUsers.length > 0) {\r\n          message.error(`Utente gi assegnato a servizi. Impossibile eliminare`);\r\n          return;\r\n        }\r\n        this.props.connector\r\n          .deleteCommitteesUsers(user.id)\r\n          .then((res) => {\r\n            this.props.connector\r\n              .deleteUser(user.id)\r\n              .then((res) => {\r\n                this.loadData();\r\n              })\r\n              .catch((err) => {\r\n                console.error(`_onDeleteUser - deleteUser: ${err}`);\r\n                message.error(`Si  verificato un errore durante l'eliminazione`);\r\n              });\r\n          })\r\n          .catch((err) => {\r\n            console.error(`_onDeleteUser - deleteCommitteesUsers: ${err}`);\r\n            message.error(`Si  verificato un errore durante l'eliminazione`);\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        console.error(`_onDeleteUser - getUserTrips: ${err}`);\r\n        message.error(`Si  verificato un errore durante l'eliminazione`);\r\n      });\r\n  };\r\n\r\n  private _onSave = (user: UserDTO) => {\r\n    const { committeeUser } = user;\r\n    if (!committeeUser) {\r\n      console.warn(`Expected NOT NULL 'committee' - This should never happen!`);\r\n      message.error('Si  verificato un errore nel salvataggio');\r\n      return;\r\n    }\r\n    this.props.connector\r\n      .publishUserCommittee(user, committeeUser)\r\n      .then((res) => {\r\n        message.success('Salvataggio completato');\r\n        this.setState({ showForm: false, selectedUser: undefined }, () => {\r\n          this.loadData();\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        message.error('Si  verificato un errore nel salvataggio');\r\n      });\r\n  };\r\n\r\n  private _onCreate = () => {\r\n    this.setState({ selectedUser: this.emptyUser, showForm: true });\r\n  };\r\n\r\n  private getDataSource = (): UserDTO[] => {\r\n    const { user, users } = this.props;\r\n    if (user !== undefined) {\r\n      // Un utente NON superuser pu gestire solo utenti Admin e User\r\n      if (user.superuser === 0) {\r\n        return users.filter((user: UserDTO) => user.superuser === 0);\r\n      }\r\n      return users;\r\n    } else {\r\n      return [];\r\n    }\r\n  };\r\n\r\n  public render() {\r\n    const { loading, selectedUser, showForm } = this.state;\r\n    return (\r\n      <div>\r\n        {loading ? (\r\n          <div style={{ textAlign: 'center' }}>\r\n            <Spin />\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <Table columns={this.columns} pagination={{ pageSize: 10 }} dataSource={this.getDataSource()} />\r\n            <Drawer\r\n              title={`${(selectedUser as any)?.id === 0 ? 'Crea' : 'Modifica'} utente`}\r\n              width={480}\r\n              onClose={this._onClose}\r\n              visible={showForm}\r\n              bodyStyle={{ paddingBottom: 80 }}\r\n            >\r\n              {showForm ? <UserForm loggedUserId={this.props.user?.id || 0} user={selectedUser} onCancel={this._onClose} onSave={this._onSave} /> : undefined}\r\n            </Drawer>\r\n            {showForm ? undefined : <PlusFabButton onClick={this._onCreate} />}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: any, ownProps: any) => {\r\n  return {\r\n    user: state.appData.user,\r\n    connector: state.appData.connector,\r\n    committee: state.appData.committee,\r\n    users: state.appData.users\r\n  };\r\n};\r\nconst UsersContainer = connect(mapStateToProps, { setUsersData })(Users);\r\nexport default UsersContainer;\r\n","import CommitteeDTO from './CommitteeDTO';\r\n\r\nexport default interface VehicleDTO {\r\n  id: number;\r\n  type: number;\r\n  plate: string;\r\n  sign: string;\r\n  description: string;\r\n  disabled: number;\r\n  committeeId: number;\r\n  committee: CommitteeDTO;\r\n}\r\n\r\nexport const VehicleType: { [code: number]: string } = {\r\n  0: 'Furgone',\r\n  1: 'Ambulanza',\r\n  2: 'Autovettura'\r\n};\r\n","import * as React from 'react';\r\nimport { Drawer, Form, Button, Col, Row, Input, Select, Switch } from 'antd';\r\nimport VehicleDTO, { VehicleType } from '../../dto/VehicleDTO';\r\nimport { FormComponentProps } from 'antd/lib/form/Form';\r\n\r\nconst { Option } = Select;\r\n\r\nexport interface IVehicleFormProps {\r\n  visible: boolean;\r\n  vehicle: VehicleDTO | undefined;\r\n  onClose: () => void;\r\n  onSave: (vehicle: VehicleDTO) => void;\r\n}\r\n\r\nclass Vehicle extends React.Component<IVehicleFormProps & FormComponentProps> {\r\n  componentWillReceiveProps(nextProps: IVehicleFormProps & FormComponentProps) {\r\n    const { vehicle } = nextProps;\r\n    if (\r\n      vehicle !== undefined &&\r\n      JSON.stringify(this.props.vehicle) !== JSON.stringify(nextProps.vehicle)\r\n    ) {\r\n      const { form } = nextProps;\r\n      form.setFieldsValue({\r\n        type: vehicle.type,\r\n        plate: vehicle.plate,\r\n        sign: vehicle.sign,\r\n        description: vehicle.description,\r\n        disabled: vehicle.disabled\r\n      });\r\n    }\r\n  }\r\n\r\n  private handleSubmit = (e: any) => {\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        const { vehicle } = this.props;\r\n        const vehicleToSave: VehicleDTO = {\r\n          ...values,\r\n          id: (vehicle as any).id,\r\n          committeeId: (vehicle as any).committeeId,\r\n          committee: (vehicle as any).committee\r\n        };\r\n        this.props.onSave(vehicleToSave);\r\n      }\r\n    });\r\n  };\r\n\r\n  public render() {\r\n    const { getFieldDecorator } = this.props.form;\r\n    return (\r\n      <Drawer\r\n        title={`${this.props.vehicle?.id === 0 ? 'Crea' : 'Modifica'} veicolo`}\r\n        width={480}\r\n        onClose={this.props.onClose}\r\n        visible={this.props.visible}\r\n        bodyStyle={{ paddingBottom: 80 }}\r\n      >\r\n        <Form layout=\"vertical\" onSubmit={this.handleSubmit}>\r\n          <Row gutter={16}>\r\n            <Col span={24}>\r\n              <Form.Item label=\"Tipo\">\r\n                {getFieldDecorator('type', {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: 'Specificare il tipo'\r\n                    }\r\n                  ],\r\n                  initialValue: '0'\r\n                })(\r\n                  <Select placeholder=\"Tipologia\">\r\n                    <Option value={0}>{VehicleType[0]}</Option>\r\n                    <Option value={1}>{VehicleType[1]}</Option>\r\n                    <Option value={2}>{VehicleType[2]}</Option>\r\n                  </Select>\r\n                )}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16}>\r\n            <Col span={24}>\r\n              <Form.Item label=\"Targa\">\r\n                {getFieldDecorator('plate', {\r\n                  rules: [{ required: true, message: 'Specificare la targa' }]\r\n                })(<Input placeholder=\"Specificare la targa\" />)}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16}>\r\n            <Col span={24}>\r\n              <Form.Item label=\"Sigla\">\r\n                {getFieldDecorator('sign', {\r\n                  rules: [{ required: false, message: 'Specificare la sigla' }]\r\n                })(<Input placeholder=\"Specificare una sigla\" />)}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16}>\r\n            <Col span={24}>\r\n              <Form.Item label=\"Descrizione\">\r\n                {getFieldDecorator('description', {\r\n                  rules: [\r\n                    {\r\n                      required: false\r\n                    }\r\n                  ]\r\n                })(\r\n                  <Input.TextArea\r\n                    rows={4}\r\n                    placeholder=\"Specificare una descrizione\"\r\n                  />\r\n                )}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col span={12}>\r\n              <Form.Item label=\"Disabilita\">\r\n                {getFieldDecorator('disabled', { valuePropName: 'checked' })(\r\n                  <Switch />\r\n                )}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <div\r\n            style={{\r\n              position: 'absolute',\r\n              right: 0,\r\n              bottom: 0,\r\n              width: '100%',\r\n              borderTop: '1px solid #e9e9e9',\r\n              padding: '10px 16px',\r\n              background: '#fff',\r\n              textAlign: 'right'\r\n            }}\r\n          >\r\n            <Button onClick={this.props.onClose} style={{ marginRight: 8 }}>\r\n              Annulla\r\n            </Button>\r\n            <Button htmlType=\"submit\" type=\"primary\">\r\n              Salva\r\n            </Button>\r\n          </div>\r\n        </Form>\r\n      </Drawer>\r\n    );\r\n  }\r\n}\r\n\r\nconst VehicleContainer = Form.create({ name: 'vehicle_form ' })(Vehicle);\r\nclass VehicleForm extends React.Component<IVehicleFormProps> {\r\n  public render() {\r\n    return <VehicleContainer {...this.props} />;\r\n  }\r\n}\r\n\r\nexport default VehicleForm;\r\n","import * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport VehicleDTO, { VehicleType } from '../dto/VehicleDTO';\r\nimport { IWIthConnector, IWithCommittee } from '../reducers/reducers';\r\nimport { Spin, Button, Popconfirm, Tooltip, Icon } from 'antd';\r\nimport { message, Table } from 'antd';\r\nimport VehicleForm from './forms/VehicleForm';\r\nimport 'react-tiny-fab/dist/styles.css';\r\nimport PlusFabButton from './base/PlusFabButton';\r\n\r\ninterface IVechiclesState {\r\n  loading: boolean;\r\n  showForm: boolean;\r\n  selectedVehicle: VehicleDTO | undefined;\r\n  vehicles: VehicleDTO[];\r\n}\r\n\r\nclass Vehicles extends React.Component<\r\n  IWIthConnector & IWithCommittee,\r\n  IVechiclesState\r\n> {\r\n  columns = [\r\n    {\r\n      title: 'Targa',\r\n      dataIndex: 'plate',\r\n      key: 'plate'\r\n    },\r\n    {\r\n      title: 'Sigla',\r\n      dataIndex: 'sign',\r\n      key: 'sign'\r\n    },\r\n    {\r\n      title: 'Tipologia',\r\n      dataIndex: 'type',\r\n      key: 'type',\r\n      render: (value: any, record: any) => <span>{VehicleType[value]}</span>\r\n    },\r\n    {\r\n      title: 'Descrizione',\r\n      dataIndex: 'description',\r\n      key: 'description'\r\n    },\r\n    {\r\n      title: 'Disabilitato',\r\n      dataIndex: 'disabled',\r\n      key: 'disabled',\r\n      render: (value: any, record: any) => (\r\n        <p>{value === 0 ? undefined : <Icon type=\"close\" />}</p>\r\n      )\r\n    },\r\n    {\r\n      title: '',\r\n      key: 'action',\r\n      render: (text: any, record: VehicleDTO) => (\r\n        <span>\r\n          <Tooltip title=\"Modifica\">\r\n            <Button\r\n              size=\"small\"\r\n              icon=\"edit\"\r\n              onClick={() => this._onEditVehicle(record)}\r\n            />\r\n          </Tooltip>\r\n          <Popconfirm\r\n            placement=\"topLeft\"\r\n            title={`Confermare l'eliminazione?`}\r\n            onConfirm={() => this._onDeleteVehicle(record)}\r\n            okText=\"Si\"\r\n            cancelText=\"No\"\r\n          >\r\n            <Button\r\n              size=\"small\"\r\n              style={{ marginLeft: '1px' }}\r\n              icon=\"delete\"\r\n              type=\"danger\"\r\n            />\r\n          </Popconfirm>\r\n        </span>\r\n      )\r\n    }\r\n  ];\r\n\r\n  emptyVehicle: VehicleDTO = {\r\n    id: 0,\r\n    type: 0,\r\n    plate: '',\r\n    sign: '',\r\n    description: '',\r\n    disabled: 0,\r\n    committeeId: this.props.committee?.id || 0,\r\n    committee: this.props.committee as any\r\n  };\r\n\r\n  state = {\r\n    loading: true,\r\n    showForm: false,\r\n    selectedVehicle: undefined,\r\n    vehicles: []\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.loadData();\r\n  }\r\n\r\n  private loadData = () => {\r\n    const { committee } = this.props;\r\n    if (committee !== undefined) {\r\n      this.props.connector\r\n        .getVehicles(committee.id)\r\n        .then(res => {\r\n          this.setState({\r\n            vehicles: res.data,\r\n            loading: false\r\n          });\r\n        })\r\n        .catch(err => {\r\n          this.setState({ vehicles: [], loading: false });\r\n          console.error(err);\r\n        });\r\n    }\r\n  };\r\n\r\n  private _onClose = () => {\r\n    this.setState({ showForm: false, selectedVehicle: undefined });\r\n  };\r\n\r\n  private _onEditVehicle = (selectedVehicle: VehicleDTO) => {\r\n    this.setState({ selectedVehicle, showForm: true });\r\n  };\r\n\r\n  private _onDeleteVehicle = (vehicle: VehicleDTO) => {\r\n    this.props.connector.deleteVehicle(vehicle).then(res => {\r\n      this.loadData();\r\n    });\r\n  };\r\n\r\n  private _onSave = (vehicle: VehicleDTO) => {\r\n    this.publishVehicle(vehicle);\r\n  };\r\n\r\n  private publishVehicle = (vehicle: VehicleDTO) => {\r\n    this.props.connector\r\n      .publishVehicle(vehicle)\r\n      .then(res => {\r\n        message.success('Salvataggio completato');\r\n        this.setState({ showForm: false, selectedVehicle: undefined }, () => {\r\n          this.loadData();\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n        message.error('Si  verificato un errore nel salvataggio');\r\n      });\r\n  };\r\n\r\n  private _onCreate = () => {\r\n    this.setState({ selectedVehicle: this.emptyVehicle, showForm: true });\r\n  };\r\n\r\n  public render() {\r\n    const { loading, vehicles } = this.state;\r\n    return (\r\n      <div>\r\n        {loading ? (\r\n          <div style={{ textAlign: 'center' }}>\r\n            <Spin />{' '}\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <Table\r\n              columns={this.columns}\r\n              pagination={{ pageSize: 10 }}\r\n              dataSource={vehicles}\r\n            />\r\n            <VehicleForm\r\n              visible={this.state.showForm}\r\n              vehicle={this.state.selectedVehicle}\r\n              onClose={this._onClose}\r\n              onSave={this._onSave}\r\n            />\r\n            {this.state.showForm ? (\r\n              undefined\r\n            ) : (\r\n              <PlusFabButton onClick={this._onCreate} />\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: any, ownProps: any) => {\r\n  return {\r\n    connector: state.appData.connector,\r\n    committee: state.appData.committee\r\n  };\r\n};\r\nconst VehiclesContainer = connect(mapStateToProps)(Vehicles);\r\nexport default VehiclesContainer;\r\n","import CommitteeDTO from './CommitteeDTO';\r\nimport VehicleDTO from './VehicleDTO';\r\nimport TripUsersDTO from './TripUsersDTO';\r\n\r\nexport default interface TripDTO {\r\n  id: number;\r\n  date: string;\r\n  hour: string; // Esiste il time?\r\n  flgDestination: number;\r\n  flgAr: number;\r\n  siteDeparture: string;\r\n  siteArrival: string;\r\n  serviceType: string;\r\n  patientData?: string;\r\n  type: number;\r\n  extraUsers: number;\r\n  flgNurse: number;\r\n  flgToNotify: number;\r\n  notes?: string;\r\n  committeeId: number;\r\n  vehicleId: number;\r\n  committee: CommitteeDTO;\r\n  vehicle: VehicleDTO;\r\n  trip_users?: TripUsersDTO[];\r\n}\r\n\r\nexport const ServiceTargetRoleType: { [code: number]: string } = {\r\n  0: 'Dipendenti',\r\n  1: 'Volontari',\r\n  2: 'Chiunque'\r\n};\r\n\r\nexport const ServiceTargetLocationType: { [code: number]: string } = {\r\n  0: 'In Sede',\r\n  1: 'Destinazione',\r\n  2: 'Prelevamento'\r\n};\r\n\r\nexport const FlgArType: { [code: number]: string } = {\r\n  0: 'Solo Andata',\r\n  1: 'Andata/Ritorno'\r\n};\r\n","import UserDTO from './UserDTO';\r\n\r\nexport default interface TripUsersDTO {\r\n  id: number;\r\n  tripId: number;\r\n  userId: number;\r\n  role: number;\r\n  user?: UserDTO;\r\n}\r\n\r\nexport const ServiceRoleType: { [code: number]: string } = {\r\n  0: 'Autista',\r\n  1: 'Soccorritore',\r\n  2: 'Medico/Sanitario'\r\n};\r\n","import * as React from 'react';\r\nimport { Drawer, Form, Col, Row, Input, InputNumber, DatePicker, TimePicker, Button, Radio, Select, Switch } from 'antd';\r\nimport { FormComponentProps } from 'antd/lib/form/Form';\r\nimport TripDTO, { ServiceTargetLocationType, FlgArType, ServiceTargetRoleType } from '../../dto/TripDTO';\r\nimport moment from 'moment';\r\nimport VehicleDTO, { VehicleType } from '../../dto/VehicleDTO';\r\n\r\nconst { Option } = Select;\r\n\r\nexport interface ITripFormProps {\r\n  visible: boolean;\r\n  vehicles: VehicleDTO[];\r\n  trip: TripDTO | undefined;\r\n  onClose: () => void;\r\n  onSave: (trip: TripDTO) => void;\r\n}\r\n\r\nclass Trip extends React.Component<ITripFormProps & FormComponentProps> {\r\n  private setFieldsValue = (trip: TripDTO) => {\r\n    const { form } = this.props;\r\n    const dateForHour = new Date(2000, 1, 1, trip.hour ? Number(trip.hour.substring(0, 2)) : 12, trip.hour ? Number(trip.hour.substring(3, 5)) : 0);\r\n    const formValues = {\r\n      ...trip,\r\n      tripDate: trip.date ? moment(trip.date) : undefined,\r\n      tripHour: moment(dateForHour)\r\n    };\r\n    form.setFieldsValue(formValues);\r\n  };\r\n\r\n  componentWillReceiveProps(nextProps: ITripFormProps & FormComponentProps) {\r\n    const { trip } = nextProps;\r\n    if (trip !== undefined && JSON.stringify(this.props.trip) !== JSON.stringify(nextProps.trip)) {\r\n      this.setFieldsValue(trip as TripDTO);\r\n    }\r\n  }\r\n\r\n  private handleSubmit = (e: any) => {\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        const tripToSave: TripDTO = {\r\n          ...values,\r\n          date: values.tripDate ? values.tripDate.format('YYYY-MM-DD') : undefined,\r\n          hour: values.tripHour.format('HH:mm')\r\n        };\r\n        this.props.onSave(tripToSave);\r\n      }\r\n    });\r\n  };\r\n\r\n  public render() {\r\n    const { getFieldDecorator } = this.props.form;\r\n    const { trip, onClose, visible, vehicles } = this.props;\r\n    return (\r\n      <Drawer title={`${trip?.id === 0 ? 'Crea' : 'Modifica'} servizio`} width={480} onClose={onClose} visible={visible} bodyStyle={{ paddingBottom: 80 }}>\r\n        <Form layout=\"vertical\" onSubmit={this.handleSubmit}>\r\n          <Row gutter={16}>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Data del servizio\">\r\n                {getFieldDecorator('tripDate', {\r\n                  rules: [{ required: true, message: 'Specificare data di partenza' }]\r\n                })(<DatePicker style={{ width: '100%' }} format=\"DD-MM-YYYY\" />)}\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Ora\">\r\n                {getFieldDecorator('tripHour', {\r\n                  rules: [\r\n                    {\r\n                      type: 'object',\r\n                      required: true,\r\n                      message: `Specificare l'ora del servizio`\r\n                    }\r\n                  ]\r\n                })(<TimePicker style={{ width: '100%' }} placeholder=\"Ora servizio\" format=\"HH:mm\" />)}\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Luogo\">\r\n                {getFieldDecorator('flgDestination', {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: 'Specificare il luogo'\r\n                    }\r\n                  ]\r\n                })(\r\n                  <Select placeholder=\"Luogo\">\r\n                    <Option value={0}>{ServiceTargetLocationType[0]}</Option>\r\n                    <Option value={1}>{ServiceTargetLocationType[1]}</Option>\r\n                    <Option value={2}>{ServiceTargetLocationType[2]}</Option>\r\n                  </Select>\r\n                )}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <Form.Item label=\"Partenza\">\r\n                {getFieldDecorator('siteDeparture', {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: 'Specificare il luogo di partenza'\r\n                    }\r\n                  ]\r\n                })(<Input.TextArea rows={4} placeholder=\"Luogo di partenza\" />)}\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={12}>\r\n              <Form.Item label=\"Arrivo\">\r\n                {getFieldDecorator('siteArrival', {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: 'Specificare il luogo di arrivo'\r\n                    }\r\n                  ]\r\n                })(<Input.TextArea rows={4} placeholder=\"Luogo di arrivo\" />)}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16}>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Veicolo\">\r\n                {getFieldDecorator('vehicleId', {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: 'Specificare il veicolo'\r\n                    }\r\n                  ]\r\n                })(\r\n                  <Select placeholder=\"veicolo\">\r\n                    {vehicles.map((vehicle: VehicleDTO) => {\r\n                      const vehicleId: number = vehicle.id;\r\n                      return (\r\n                        <Option key={vehicleId} value={vehicle.id}>\r\n                          {vehicle.sign} - {VehicleType[vehicle.type]}\r\n                        </Option>\r\n                      );\r\n                    })}\r\n                  </Select>\r\n                )}\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item>\r\n                {getFieldDecorator('flgAr')(\r\n                  <Radio.Group style={{ marginTop: '10px' }}>\r\n                    <Radio value={0}>{FlgArType[0]}</Radio>\r\n                    <Radio value={1}>{FlgArType[1]}</Radio>\r\n                  </Radio.Group>\r\n                )}\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Servizio per\">\r\n                {getFieldDecorator('type', {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: 'Specificare il tipo'\r\n                    }\r\n                  ]\r\n                })(\r\n                  <Select placeholder=\"Servizio per\">\r\n                    <Option value={0}>{ServiceTargetRoleType[0]}</Option>\r\n                    <Option value={1}>{ServiceTargetRoleType[1]}</Option>\r\n                    <Option value={2}>{ServiceTargetRoleType[2]}</Option>\r\n                  </Select>\r\n                )}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16}>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Tipologia servizio\">\r\n                {getFieldDecorator('serviceType', {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: 'Specificare il tipo di servizio'\r\n                    }\r\n                  ]\r\n                })(<Input.TextArea rows={2} placeholder=\"Tipologia servizio\" />)}\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Dati paziente\">{getFieldDecorator('patientData')(<Input.TextArea rows={2} placeholder=\"Dati paziente\" />)}</Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Con infermiere\">{getFieldDecorator('flgNurse', { valuePropName: 'checked' })(<Switch />)}</Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16}>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Note\">{getFieldDecorator('notes')(<Input.TextArea rows={3} placeholder=\"Eventuali note aggiuntive\" />)}</Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Numero accompagnatori\">{getFieldDecorator('extraUsers', { initialValue: 1 })(<InputNumber min={1} max={10} />)}</Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Da notificare\">{getFieldDecorator('flgToNotify', { valuePropName: 'checked' })(<Switch />)}</Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={16} style={{ visibility: 'collapse' }}>\r\n            <Col span={6}>\r\n              <Form.Item label=\"Id\">{getFieldDecorator('id')(<Input placeholder=\"Specificare id servizio\" />)}</Form.Item>\r\n              <Col span={6}>\r\n                <Form.Item label=\"CommitteeId\">{getFieldDecorator('committeeId')(<Input placeholder=\"CommitteeId\" />)}</Form.Item>\r\n              </Col>\r\n            </Col>\r\n          </Row>\r\n          <div\r\n            style={{\r\n              position: 'absolute',\r\n              right: 0,\r\n              bottom: 0,\r\n              width: '100%',\r\n              borderTop: '1px solid #e9e9e9',\r\n              padding: '10px 16px',\r\n              background: '#fff',\r\n              textAlign: 'right'\r\n            }}\r\n          >\r\n            <Button onClick={this.props.onClose} style={{ marginRight: 8 }}>\r\n              Annulla\r\n            </Button>\r\n            <Button htmlType=\"submit\" type=\"primary\">\r\n              Salva\r\n            </Button>\r\n          </div>\r\n        </Form>\r\n      </Drawer>\r\n    );\r\n  }\r\n}\r\n\r\nconst TripContainer = Form.create({ name: 'trip_form ' })(Trip);\r\nclass TripForm extends React.Component<ITripFormProps> {\r\n  public render() {\r\n    return <TripContainer {...this.props} />;\r\n  }\r\n}\r\n\r\nexport default TripForm;\r\n","import * as React from 'react';\r\nimport { ServiceRoleType } from '../../dto/TripUsersDTO';\r\nimport { Button, Radio, Row, Select } from 'antd';\r\nimport { RadioChangeEvent } from 'antd/lib/radio';\r\nimport UserDTO from '../../dto/UserDTO';\r\n\r\nconst { Option } = Select;\r\n\r\ninterface RoleChooseProps {\r\n  users: UserDTO[];\r\n  isUserAdmin: boolean;\r\n  loggedUser: UserDTO;\r\n  onConfirmRole: (role: number, userId: number) => void;\r\n}\r\n\r\ninterface RoleChooseState {\r\n  roleSelected: number;\r\n  userSelected: UserDTO;\r\n}\r\n\r\nclass RoleChoose extends React.Component<RoleChooseProps, RoleChooseState> {\r\n  state = {\r\n    userSelected: this.props.isUserAdmin ? this.props.users[0] : this.props.loggedUser,\r\n    roleSelected: 1\r\n  };\r\n\r\n  private _onChangeRole = (e: RadioChangeEvent) => {\r\n    this.setState({ roleSelected: e.target.value });\r\n  };\r\n\r\n  private _onChangeUser = (value: number) => {\r\n    const { users } = this.props;\r\n    const userSelected: UserDTO | undefined = users.find((user: UserDTO) => user.id === value);\r\n    if (userSelected !== undefined) {\r\n      this.setState({ userSelected, roleSelected: 1 });\r\n    }\r\n  };\r\n\r\n  public render() {\r\n    const { users, isUserAdmin, loggedUser } = this.props;\r\n    const { userSelected, roleSelected } = this.state;\r\n    return (\r\n      <div>\r\n        <Row>\r\n          <Select style={{ width: '100%' }} defaultValue={this.state.userSelected.id} onChange={this._onChangeUser}>\r\n            {users\r\n              .filter((user: UserDTO) => isUserAdmin || user.id === loggedUser.id)\r\n              .map((user: UserDTO) => (\r\n                <Option value={user.id} key={user.id}>\r\n                  {user.name} {user.surname}\r\n                </Option>\r\n              ))}\r\n          </Select>\r\n        </Row>\r\n        <Row>\r\n          <Radio.Group style={{ marginTop: '5px', width: '100%' }} value={roleSelected} buttonStyle=\"solid\" onChange={this._onChangeRole}>\r\n            {userSelected.withDrivingLicense === 1 ? <Radio.Button value={0}>{ServiceRoleType[0]}</Radio.Button> : undefined}\r\n            <Radio.Button value={1}>{ServiceRoleType[1]}</Radio.Button>\r\n            {userSelected.committeeUser.occupation === 2 ? <Radio.Button value={2}>{ServiceRoleType[2]}</Radio.Button> : undefined}\r\n          </Radio.Group>\r\n        </Row>\r\n        <Row>\r\n          <Button style={{ marginTop: '5px', width: '100%' }} onClick={() => this.props.onConfirmRole(this.state.roleSelected, this.state.userSelected.id)}>\r\n            Conferma\r\n          </Button>\r\n        </Row>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RoleChoose;\r\n","import * as React from 'react';\r\nimport TripDTO from '../../dto/TripDTO';\r\nimport Form, { FormComponentProps } from 'antd/lib/form/Form';\r\nimport { Icon, Button, Drawer, Row, Col, DatePicker, TimePicker } from 'antd';\r\nimport moment from 'moment';\r\n\r\nexport interface IDuplicateTripItem {\r\n  date: moment.Moment;\r\n  hour: moment.Moment;\r\n}\r\n\r\nexport interface IDuplicateTripFormProps {\r\n  visible: boolean;\r\n  trip: TripDTO | undefined;\r\n  onClose: () => void;\r\n  onConfirm: (trip: TripDTO, newDates: IDuplicateTripItem[]) => void;\r\n}\r\n\r\nlet id = 0;\r\n\r\nclass DuplicateTrip extends React.Component<\r\n  IDuplicateTripFormProps & FormComponentProps\r\n> {\r\n  componentWillReceiveProps(\r\n    nextProps: IDuplicateTripFormProps & FormComponentProps\r\n  ) {\r\n    const { trip } = nextProps;\r\n    if (\r\n      trip !== undefined &&\r\n      JSON.stringify(this.props.trip) !== JSON.stringify(nextProps.trip)\r\n    ) {\r\n      this.props.form.setFieldsValue({\r\n        keys: [],\r\n        duplicateElements: []\r\n      });\r\n    }\r\n  }\r\n\r\n  private onDeleteDate = (k: any) => {\r\n    const { form } = this.props;\r\n    const keys = form.getFieldValue('keys');\r\n    const duplicateElements: IDuplicateTripItem[] =\r\n      form.getFieldValue('duplicateElements') || [];\r\n    if (keys.length === 1) {\r\n      return;\r\n    }\r\n\r\n    form.setFieldsValue({\r\n      keys: keys.filter((key: any) => key !== k),\r\n      duplicateElements: duplicateElements.filter(\r\n        (value: IDuplicateTripItem, index: number) => index !== k\r\n      )\r\n    });\r\n  };\r\n\r\n  private onAddDate = () => {\r\n    const { form } = this.props;\r\n    const keys = form.getFieldValue('keys');\r\n    const nextKeys = keys.concat(id++);\r\n\r\n    form.setFieldsValue({\r\n      keys: nextKeys\r\n    });\r\n  };\r\n\r\n  handleSubmit = (e: any) => {\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        const { duplicateElements } = values;\r\n        const { trip } = this.props;\r\n        this.props.onConfirm(\r\n          trip as any,\r\n          duplicateElements.filter((element: any) => !!element)\r\n        );\r\n      }\r\n    });\r\n  };\r\n\r\n  private getInitialDateValue = (key: number) => {\r\n    const { trip: tripToDuplicate } = this.props;\r\n    const tripDate = moment(\r\n      tripToDuplicate !== undefined ? tripToDuplicate.date : new Date()\r\n    );\r\n    const newTripDate = tripDate.add(key + 1, 'd');\r\n    return newTripDate;\r\n  };\r\n\r\n  private getInitialHourValue = () => {\r\n    const { trip: tripToDuplicate } = this.props;\r\n    const dateForHour = new Date(\r\n      2000,\r\n      1,\r\n      1,\r\n      tripToDuplicate?.hour ? Number(tripToDuplicate.hour.substring(0, 2)) : 12,\r\n      tripToDuplicate?.hour ? Number(tripToDuplicate.hour.substring(3, 5)) : 0\r\n    );\r\n    const tripHour = moment(dateForHour);\r\n    return tripHour;\r\n  };\r\n\r\n  public render() {\r\n    const { getFieldDecorator, getFieldValue } = this.props.form;\r\n    getFieldDecorator('keys', { initialValue: [] });\r\n    const keys = getFieldValue('keys');\r\n    const myFormItems = keys.map((key: any, index: number) => (\r\n      <Row gutter={16} key={index}>\r\n        <Col span={11}>\r\n          <Form.Item>\r\n            {getFieldDecorator(`duplicateElements[${key}].date`, {\r\n              initialValue: this.getInitialDateValue(index),\r\n              rules: [\r\n                {\r\n                  required: true,\r\n                  message: 'Selezionare data del viaggio'\r\n                }\r\n              ]\r\n            })(<DatePicker style={{ width: '100%' }} format=\"DD-MM-YYYY\" />)}\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={11}>\r\n          <Form.Item>\r\n            {getFieldDecorator(`duplicateElements[${key}].hour`, {\r\n              initialValue: this.getInitialHourValue(),\r\n              rules: [\r\n                {\r\n                  type: 'object',\r\n                  required: true,\r\n                  message: `Specificare l'ora del servizio`\r\n                }\r\n              ]\r\n            })(\r\n              <TimePicker\r\n                style={{ width: '100%' }}\r\n                placeholder=\"Ora servizio\"\r\n                format=\"HH:mm\"\r\n              />\r\n            )}\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={2}>\r\n          {key === 0 ? (\r\n            undefined\r\n          ) : (\r\n            <Icon\r\n              style={{ marginTop: '10px' }}\r\n              className=\"dynamic-delete-button\"\r\n              type=\"minus-circle-o\"\r\n              onClick={() => this.onDeleteDate(key)}\r\n            />\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    ));\r\n\r\n    return (\r\n      <Drawer\r\n        title={`Duplica servizio`}\r\n        width={480}\r\n        onClose={this.props.onClose}\r\n        visible={this.props.visible}\r\n        bodyStyle={{ paddingBottom: 80 }}\r\n      >\r\n        <Form onSubmit={this.handleSubmit}>\r\n          {myFormItems}\r\n          <Row gutter={16}>\r\n            <Col span={24}>\r\n              <Form.Item>\r\n                <Button\r\n                  type=\"dashed\"\r\n                  onClick={this.onAddDate}\r\n                  style={{ width: '100%' }}\r\n                >\r\n                  <Icon type=\"plus\" /> Aggiungi data\r\n                </Button>\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <div\r\n            style={{\r\n              position: 'absolute',\r\n              right: 0,\r\n              bottom: 0,\r\n              width: '100%',\r\n              borderTop: '1px solid #e9e9e9',\r\n              padding: '10px 16px',\r\n              background: '#fff',\r\n              textAlign: 'right'\r\n            }}\r\n          >\r\n            <Button onClick={this.props.onClose} style={{ marginRight: 8 }}>\r\n              Annulla\r\n            </Button>\r\n            <Button htmlType=\"submit\" type=\"primary\">\r\n              Conferma\r\n            </Button>\r\n          </div>\r\n        </Form>\r\n      </Drawer>\r\n    );\r\n  }\r\n}\r\n\r\nconst DuplicateTripContainer = Form.create({ name: 'duplicate_trip_form ' })(\r\n  DuplicateTrip\r\n);\r\nclass DuplicateTripForm extends React.Component<IDuplicateTripFormProps> {\r\n  public render() {\r\n    return <DuplicateTripContainer {...this.props} />;\r\n  }\r\n}\r\n\r\nexport default DuplicateTripForm;\r\n","import * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { IWithUser, IWIthConnector } from '../reducers/reducers';\r\nimport { Row, Col, message } from 'antd';\r\nimport UserForm from './forms/UserForm';\r\nimport UserDTO from '../dto/UserDTO';\r\nimport { RouterProps } from 'react-router';\r\nimport { ISetUserDataProps, setUserData } from '../actions/action';\r\n\r\ninterface IPersonalAreaProps extends IWithUser, IWIthConnector, ISetUserDataProps, RouterProps {}\r\n\r\nclass PersonalArea extends React.Component<IPersonalAreaProps> {\r\n  private _onCancel = () => {\r\n    this.props.history.goBack();\r\n  };\r\n  private _onSave = (userToPublish: UserDTO) => {\r\n    const { user } = this.props;\r\n    this.props.connector\r\n      .publishUser(userToPublish)\r\n      .then((res) => {\r\n        this.props.setUserData(userToPublish, user?.committeeUser.id || 0);\r\n        message.success('Salvataggio completato');\r\n      })\r\n      .catch((err) => {\r\n        console.error(`_onSave: error ${err}`);\r\n        message.error('Si  verificato un errore nel salvataggio');\r\n      });\r\n  };\r\n\r\n  public render() {\r\n    const { user } = this.props;\r\n    return (\r\n      <Row>\r\n        <Col span={6}></Col>\r\n        <Col span={12} style={{ marginTop: '10px' }}>\r\n          <UserForm loggedUserId={(user as UserDTO).id} user={user} personalArea={true} onCancel={this._onCancel} onSave={this._onSave} />\r\n        </Col>\r\n        <Col span={6}></Col>\r\n      </Row>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: any, ownProps: any) => {\r\n  return {\r\n    user: state.appData.user,\r\n    connector: state.appData.connector,\r\n    committee: state.appData.committee\r\n  };\r\n};\r\nconst PersonalAreaContainer = connect(mapStateToProps, {\r\n  setUserData\r\n})(PersonalArea);\r\nexport default PersonalAreaContainer;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Layout, Menu, Icon, Button, Row, Col, Tooltip } from 'antd';\r\nimport { Route } from 'react-router-dom';\r\nimport { Links } from '../utils/Links';\r\nimport UsersContainer from './Users';\r\nimport VehiclesContainer from './Vehicles';\r\nimport ServicesContainer from './Services';\r\nimport { IWithUser, IWithCommittee } from '../reducers/reducers';\r\nimport { RouterProps } from 'react-router';\r\nimport { PORTAL_NAME } from '../utils/Constants';\r\nimport { IResetAuthDataProps, resetAuthData } from '../actions/action';\r\nimport PersonalAreaContainer from './PersonalArea';\r\n\r\nconst { Header, Content, Footer, Sider } = Layout;\r\n\r\ninterface IDashboardProps extends IWithUser, IWithCommittee, IResetAuthDataProps, RouterProps {}\r\n\r\ninterface IDashboardState {\r\n  collapsed: boolean;\r\n}\r\n\r\nclass Dashboard extends React.Component<IDashboardProps, IDashboardState> {\r\n  constructor(props: IDashboardProps) {\r\n    super(props);\r\n\r\n    const { user, committee } = this.props;\r\n    if (!user && !committee) {\r\n      this._onLogout();\r\n    }\r\n  }\r\n  state = {\r\n    collapsed: true\r\n  };\r\n\r\n  _onCollapse = (collapsed: any) => {\r\n    this.setState({ collapsed });\r\n  };\r\n\r\n  _onClickLogout = () => {\r\n    this.props.resetAuthData();\r\n    this._onLogout();\r\n  };\r\n\r\n  _onLogout = () => {\r\n    this.props.history.replace(Links.LOGOUT);\r\n  };\r\n\r\n  get isUserAdmin(): boolean {\r\n    const { user } = this.props;\r\n    if (user !== undefined && user.committeeUser !== undefined) {\r\n      return user?.committeeUser.role < 2;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public render() {\r\n    const { user, committee } = this.props;\r\n    return (\r\n      <Layout style={{ minHeight: '100vh' }}>\r\n        <Sider collapsible collapsed={this.state.collapsed} onCollapse={this._onCollapse}>\r\n          <div style={{ height: '60px', width: '100%' }} />\r\n          <Menu theme=\"dark\" defaultSelectedKeys={['1']} mode=\"inline\">\r\n            <Menu.Item\r\n              key=\"1\"\r\n              onClick={() => {\r\n                this.props.history.push(Links.SERVICES);\r\n              }}\r\n            >\r\n              <Icon type=\"calendar\" />\r\n              <span>Gestione Servizi</span>\r\n            </Menu.Item>\r\n            {this.isUserAdmin ? (\r\n              <Menu.Item\r\n                key=\"2\"\r\n                onClick={() => {\r\n                  this.props.history.push(Links.USERS);\r\n                }}\r\n              >\r\n                <Icon type=\"team\" />\r\n                <span>Gestione Utenti</span>\r\n              </Menu.Item>\r\n            ) : undefined}\r\n            {this.isUserAdmin ? (\r\n              <Menu.Item\r\n                key=\"3\"\r\n                onClick={() => {\r\n                  this.props.history.push(Links.VEHICLES);\r\n                }}\r\n              >\r\n                <Icon type=\"car\" />\r\n                <span>Gestione Veicoli</span>\r\n              </Menu.Item>\r\n            ) : undefined}\r\n          </Menu>\r\n        </Sider>\r\n        <Layout>\r\n          <Header style={{ background: '#001529', maxHeight: '64px', padding: 0 }}>\r\n            <Row>\r\n              <Col span={16} style={{ textAlign: 'left' }}>\r\n                <span\r\n                  style={{\r\n                    color: 'white',\r\n                    marginLeft: '5px',\r\n                    fontStyle: 'bold',\r\n                    fontSize: 'larger'\r\n                  }}\r\n                >\r\n                  {PORTAL_NAME}\r\n                </span>\r\n                -\r\n                <span\r\n                  style={{\r\n                    color: 'white',\r\n                    marginLeft: '5px',\r\n                    fontStyle: 'italic'\r\n                  }}\r\n                >\r\n                  {committee?.description}\r\n                </span>\r\n              </Col>\r\n              <Col span={6} style={{ textAlign: 'right' }}>\r\n                <span style={{ color: 'white', marginRight: '5px' }}>\r\n                  {user?.name} {user?.surname}\r\n                </span>\r\n              </Col>\r\n              <Col span={1}>\r\n                <Tooltip title=\"Area personale\" placement=\"bottom\">\r\n                  <Button\r\n                    ghost\r\n                    icon=\"user\"\r\n                    onClick={() => {\r\n                      this.props.history.push(Links.PERSONAL_AREA);\r\n                    }}\r\n                    style={{ height: '64px', width: '100%' }}\r\n                  />\r\n                </Tooltip>\r\n              </Col>\r\n              <Col span={1}>\r\n                <Tooltip title=\"Logout\" placement=\"bottom\">\r\n                  <Button ghost icon=\"logout\" style={{ height: '64px', width: '100%' }} onClick={this._onClickLogout} />\r\n                </Tooltip>\r\n              </Col>\r\n            </Row>\r\n          </Header>\r\n          <Content style={{ margin: '0 16px' }}>\r\n            <Route path={Links.SERVICES} component={ServicesContainer} />\r\n            <Route path={Links.USERS} component={UsersContainer} />\r\n            <Route path={Links.VEHICLES} component={VehiclesContainer} />\r\n            <Route path={Links.PERSONAL_AREA} component={PersonalAreaContainer} />\r\n          </Content>\r\n          <Footer style={{ textAlign: 'center' }} />\r\n        </Layout>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: any, ownProps: any) => {\r\n  return {\r\n    user: state.appData.user,\r\n    committee: state.appData.committee\r\n  };\r\n};\r\nconst DashboardContainer = connect(mapStateToProps, { resetAuthData })(Dashboard);\r\nexport default DashboardContainer;\r\n","import React from 'react';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport { Links } from './utils/Links';\r\nimport LoginContainer from './components/Login';\r\nimport DashboardContainer from './components/Dashboard';\r\n\r\nclass App extends React.Component {\r\n  public render() {\r\n    return (\r\n      <Router>\r\n        <Switch>\r\n          <Route exact={true} path={Links.LOGIN} component={LoginContainer} />\r\n          <Route component={DashboardContainer} />\r\n        </Switch>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport 'antd/dist/antd.css';\nimport { createStore } from 'redux';\nimport AppReducers from './reducers/reducers';\nimport { Provider } from 'react-redux';\nimport App from './App';\n\nexport function configureStore() {\n  const store = createStore(AppReducers);\n  return store;\n}\n\nReactDOM.render(\n  <Provider store={configureStore()}>\n    <App />\n  </Provider>,\n  document.getElementById('root') as HTMLElement\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}